{"hash":"29c8696ef7044eb35a5645ab27c0306b691b5868","data":{"post":{"title":"JavaScript event delegation","path":"/java-script-event-delegation/","date":"18. May 2008","timeToRead":2,"tags":[{"id":"JavaScript","title":"JavaScript","path":"/tag/JavaScript/"}],"description":"As I've mentioned previously I'm creating a dashboard to represent the components in the exchange that I work for. Each component widget on the page has a number of events associated with it. This has become less manageable, the more I add. So I thought about using one delegate to handle all events, and pass on a component reference, and parameters to other functions.","content":"<p>A quick google led me to <a href=\"https://blog.danwebb.net/2008/2/8/event-delegation-made-easy-in-jquery\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">this article</a> by <a href=\"https://blog.danwebb.net/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Dan Webb</a>. Looks like a common technique. Very useful article, though I needed to be able to pass parameters to the functions. There may be a better to way to do this, but this is how I achieved it.</p>\n<p>Using jQuery (what else?!) the delegate method is called via an onClick event on the body of the document. In this case, it checks that the target of the event is a button. If any other element is clicked, nothing will happen.</p>\n<p>Using jQuery (what else?!) the delegate method is called via an onClick event on the body of the document. In this case, it checks that the target of the event is a button. If any other element is clicked, nothing will happen.</p>\n<pre class=\"language-text\"><code class=\"language-text\">$(document).ready(function(){\n    $(&#39;body&#39;).click(function(e){\n        if (e.target.type == &#39;submit&#39; || e.target.type == &#39;button&#39;){\n            var t = $(e.target);\n            var fn = t.attr(&#39;class&#39;);\n            var p = eval(&#39;(&#39; + t.find(&#39;.params&#39;).html() + &#39;)&#39;);\n\n            window[fn].call(this, t, p);\n        }\n    });\n});</code></pre>\n<p>The function that the delegate passes the parameters to, is decided by the class name of the button. You could also use this class name to style the button in any manner you wish. The parameters to pass to this function are evaluated from JSON that is stored within hidden span class called params. Example button markup:</p>\n<pre class=\"language-text\"><code class=\"language-text\">&lt;button class=&quot;changeLabel&quot;&gt;\n    &lt;span class=&quot;params&quot;&gt;\n        {message:&quot;Button pressed&quot;}\n    &lt;/span&gt;\n    &lt;span class=&quot;label&quot;&gt;\n        Press me\n    &lt;/span&gt;\n&lt;/button&gt;</code></pre>\n<p>I've surrounded the button label text within another span class called label. This enables me to change the label text without losing the parameters. Simple CSS is used to hide the parameter span tag:</p>\n<pre class=\"language-text\"><code class=\"language-text\">.params {\n    display: none;\n}</code></pre>\n<p>The way I've stored the parameters may be a little odd, and I feel I may be missing something here. I construct my dashboard dynamically using jQuery, so all the parameters are injected into each control buttons at runtime. If anyone can point out an easier solution feel free to share. Full example:</p>\n<pre class=\"language-text\"><code class=\"language-text\">&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;Delegate example&lt;/title&gt;\n    &lt;script type=&quot;text/javascript&quot; src=&quot;/path/to/jquery.js&quot;&gt;&lt;/script&gt;\n    &lt;script type=&quot;text/javascript&quot;&gt;\n    $(document).ready(function(){\n        $(&#39;body&#39;).click(function(e){\n            if (e.target.type == &#39;submit&#39; || e.target.type == &#39;button&#39;){\n                var t = $(e.target);\n                var fn = t.attr(&#39;class&#39;);\n                var p = eval(&#39;(&#39; + t.find(&#39;.params&#39;).html() + &#39;)&#39;);\n\n                window[fn].call(this, t, p);\n            }\n        });\n    });\n\n    function changeLabel(obj, params){\n        obj.find(&#39;.label&#39;).text(params.message);\n    }\n    &lt;/script&gt;\n    &lt;style type=&quot;text/css&quot;&gt;\n    .params {\n        display: none;\n    }\n    &lt;/style&gt;\n&lt;/head&gt;\n&lt;body&gt;\n\n&lt;button class=&quot;changeLabel&quot;&gt;\n    &lt;span class=&quot;params&quot;&gt;\n        {message:&quot;Button pressed&quot;}\n    &lt;/span&gt;\n    &lt;span class=&quot;label&quot;&gt;\n        Press me\n    &lt;/span&gt;\n&lt;/button&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;</code></pre>\n<h2 id=\"one-thought-on-javascript-event-delegation\"><a href=\"#one-thought-on-javascript-event-delegation\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>One thought on “JavaScript event delegation”</h2>\n<h3 id=\"geralynn\"><a href=\"#geralynn\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Geralynn</h3>\n<p><em>April 28, 2011 at 5:49 am</em></p>\n<p>Walking in the presence of giants here. Cool thinking all arnuod!</p>\n<hr>\n","cover_image":null}},"context":{}}