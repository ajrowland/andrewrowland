{"hash":"7a4543962a9c9fdc79942c2ec9ee69f3625333b8","data":{"tag":{"title":"CodeIgniter","belongsTo":{"edges":[{"node":{"title":"Wolf CMS Related Pages plugin","path":"/wolf-cms-related-pages-plugin/","date":"17. May 2010","timeToRead":2,"description":"For many small projects I've been using Wolf CMS. a really nice and fairly lightweight application for managing content. What I like about it is that the core code is quite minimal, but allows you to extend using plugins.","content":"<p>For many small projects I've been using Wolf CMS, a really nice and fairly lightweight application for managing content. What I like about it is that the core code is quite minimal, but allows you to extend using plugins.</p>\n<p>Recently I've been asked to build a site that requires a the ability to relate other pages to the one an editor is currently editing.</p>\n<p>The plugin can be <a href=\"/downloads/related_pages.zip\">downloaded here</a>. Note: This version is for Wolf 0.7.2 and above. The older plugin for Wolf 0.6 is <a href=\"/downloads/related_pages_0_0_2.zip\">also available</a>. Once installed in the plugins directory and enabled in the administration screen, the following tab is now available when editing pages: Once installed in the plugins directory and enabled in the admininistration screen, the following tab is now available when editing pages:</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 478 450' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-5033ed37e3b6c24e79e25cce3c03d112'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-5033ed37e3b6c24e79e25cce3c03d112)' width='478' height='450' xlink:href='data:image/gif%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAA8CAYAAADWibxkAAAACXBIWXMAAAPoAAAD6AG1e1JrAAANb0lEQVRo3uVa%2bXNb1RXO39JSIHsIJBCyEdbpTCnlh7a/MHSmUEJbhgIpy5AQKB1mykACZCEZyrBkIU7sOI4db7JlO973Rbtlydpl2ZZsSZZtWYu/nnOf3rOsyEsCjeWgmW/u03v3vvfueWf5zrl3jdNth2fIhRG/72eJNW6vE/0DRtReV6OuvgbXG%2boItdJxfa1A5vk7CWsC46N4%2b503ce/ae/DAtvuxceN6bNy0AVvvvw%2bbt2zClvs2i%2bMNG9Zh0%2baNos/9D2ydB76%2bWrFmLOjHiy%2b9gLvv%2bRW20mR%2b88xv8fTTv8ZmmvieR3Zj1%2b6HqeNWPPPs7/DkE/uwdt292EBCYmGsW79WEdZ9W7esSpAARvHy3/bj7rvvwoMP78Chf32IP/7%2bWbz8yqs4/MFBHPrgEB5/4gkcPPwe/vnmGzjwxut4%2ba/78dL%2bF/HagQN4/rk/kEA2rFpNkARAE7qHNGD7jofw1sFD%2bNPzz%2bGtd9/FoffewYG3D%2bDRxx7Hq/94BY899SS%2bOP4Fjnx2FJ988h8c//JLvPr3F7CezINNY9WawF9eehG/vOsXwuZ37HoYu/fsxPaHtmPbdrLx1MQ2bFyHtet5olvx6JNPYf/%2bP5N/2ETXtmAjmcOmVQrhBF8/8BpN9gH60vvI5ndiJ2H3nl3YvXc39jAe2YNH9u3Fvkf3ivM7d%2b3Atge3SdcIfG3vPqnPaoMIgzqDFp3dHeju7VoWevq60avpWXb/XMYal8cBu9MGm2PwZwkhAKvNArOlHwNWcwr9RI5MhH5x3pxqpXMS5veXkK1P%2bthsY8Q47p82VoxLIb0fXzOZjTCY9ALGfoOAoX/umMF9uG%2b2Z2VCCGDQbhF/LIMDSuvyOOFw2YWUuB20W0XrdDsEbPRf7iuPY0FyHwfRa25Zsxwum9TyGLqXZZAenBojjxNj%2bN6pZ9pdkkbanYPKM1gYXp8H4Ykg4skYZpHATDyKmdg04okZxPiYEJ2ZFH3cXpcYY0l7VjZkCIDB2mBA8dUrUNfVorW9lehwnbD7anUVyq4Vo6qqEp29Pco4MXkSiEHfh6rqKqjV1ahSq9DQeB11dXWoIxqtqiqne7VJk1eEPYBB2wBqa6tRc70OZaVFqFBVoL6hES1tzWhqaRbvIwsgFB4H/zpa6lFdU4cBM02QNEyj6SItMMFKlN5is4s%2bwdCY0KqbEoAQAn1Fg7EXBZfycPrkSXz6%2bRf4%2bOOP0dDSApVKhW9OncCxz4%2biTF0DB30hoaYEK30xbXc7Tp/%2bL04cP4avv/0aJ48dwdEj1J/4wudHP8U3Z87BnK76BJt9AAUXzxOnOI2vvjqOb777GieOnsSxU1/iFI0zWgZgpRdllR4LBsTkivPzcJB4yvuHP8Rnn36C9z84TKTtPfp/GIWlKtFnbNwvxshatmwTYDXmllXRQr6guaURfTqNMAGG%2bBryV6e%2b2WBJ%2bQO2x36yx7nWqNxf9E216fbeb6H3sJjQ2NwAvcmg3JOvsWoDSUi/hFB9VntuGYmk1IIMhDVgsXeUoQjATA/mCU5FJ4VdRWemxM3Y1ti%2bpun8NJ2LpsB9FgOPyYZotv6pa/I4bpOzceVYvA8hkbJ9vsYtBJIK%2bJwM7ruc90wJwCq%2bADseHijfjDtMTUeQ/TebeolkGhLzXiIb5ve/8cWz908o/Xjyy0Hm2IVwgwAkFUqKyffqdNAa9LCRKnZ190Cj16KX7Ly1rQ1joaAQwnJf6KdCugZkQ3qf5WBBAbD6cSjk0MMCaGlpRVVNDbqa61BYVILR8TEhAFktF3po%2bvnZZWjI7UZWAaTbEQuCfxOREDxDHsVE0n%2byEFggEubMJFcnvqQA5r04HRsp5vaQSTgGTSgoKEBZZTmulRShrKKSYr0ajQ0tiJC/8PmGMDLiw8ioj7x2aPVqQKYacwgKhQOIRILoFzTURHxBRyGLWCOxPK/Hg0mKFP7AKPz%2bYQz5vHeOANiTeoa86Og1YCwwQhMLZ6j%2bwj/FD6xGE2AkUgLQ6PtRpGqDzaDB%2be/O4lzBJZz9/gwuEmN0k3A8Hi%2b8XjdcLiecDhu1Drg9bsRn%2bUGyMFehAGTHxnyA1T%2bRYl3sFGeIaISp5R%2bf4z6CKEUZk4I8zXL8ViYfX31O0DfsRWCM7JpU32qzIhDwoa%2bvBx2d7TAa9RikZKVPo0GUWdsMMbkYZ2QpJimzupQjXSxELifGr4gAPENuMXlOLnwjQ3BTAlRZXoyGpibUUxbX1NxESVINguEgmYBXqD2bgcdNqS2lwcMjwySApGRO5DOWJipzJpMTApApI/%2bfSfFx5gbMCaZI1dN/ccERZB6QXMQ1JhSekMkbpMnnWBRIpCbmoq/q9nAxxIbOPg1cNhOaW9txrbgIhcQJiq9eJk7QDF1POy4XFKGK6wgdzVDX1ENVRn0KC1FdrcaFvB9IgxoprAYFZ/D7RzBCCBK9zikNmHOCSckRToVFbOeqC79wZCJAXMCIvt4uaIwGWAb00GoN8A050cO5g0GHQUptu7p64Rw0o6OjHWazGTrKKTilnoiEyaeMYpR4A1Pu8eDYPH%2bREybABIi9u9vrQZfGiHAoQL5gWAhkenoCkalISnkX5wMLsIQbM0yefK7kAiwEJ8Vzv99HWaEZBWXN8DgHkJ93AecuFaKmqoQSoyLkMR8oLCYTKIKfkiS7XeIBHCG8xBHYZySUokVMwULJU05pAMdyUcgQhZBJJOnFmer6hj2i6jJJGsDtNIU%2bqWLD7C9G2jGpOM3Mr5wtT89MZ3OICCUV9eZwyPY6TIlOsaqFGJ8ddoeFvrYLDhrLZXQj2X03OUifzwk92brVyiUyK%2bUPJthtFqEhUqUmKgiTXH2KpUpbt1sIS2pAujNkR%2bUdcpEAhtHUaRCcQG/Soqq0FLXXa9HSRpygvBTFFWqixjbYBq2oLi9BHpnLtWvlaGuug9bUj1Hy/Eyb3U4X3ZO4g9sFu9NOrHJCCbk5lQ5nsrTJqQnwuKloRJjE/FieruqCHQhaLDtKWavSfYCoPdBzV4INLlsA/Ppuj1OAv1aXllJhSozKy1UopfhfUVWDzq4ONDRch2%2bUTcVPYS1ANJracemYw1xiVnJyS5W0clAASeHseCKcCPGqcpgwQPbd292G1vZOaTWmX4/xcEiQnGFS9VESxjDlEz5SdabFiXnZ4c3X/FamIpQmBHnVpUdnEgyOIf8ik2EaH0vz9FkMIy3O50KR5KZ8gEyJnZTs5JU0w6TpRFl5GQquFKP0yiWcOZuHC%2bfPY5iE4vaQwyTyxImRi0zGLWi0C7FETITJH1v9ve0akH6OwxbvLGEmOEVwi4k6ECFqyz5CcIFkPLVqEyMnGBEpslRxTk%2bIkvMSrpXwBTcdBVgDOBPs7O2jL%2byElUKdzWaFl74uawbfr6u7g2zeDZNOjz5tN0bGx%2bFyDECj14lr/WYTorGoEv8zV5NyUgPm0uNZSoSG4aQJD3ns6OjsxJX8PPxw5nsUkSlU84bK2kpUqcpx9UIhyipKUNvUCrOhDwWXL6O47BrU6koaP0RJk1twAAYL1UHEirWJtSanBCAfx1OxmnmA3WETSZK8hBZPfT2h3IkoJpUltYSw%2b/kMIZFleW1W9BX8QMkHco0HUJjzEBxOUnOtFvYBE3raOlAr1v/LcLW0BNdVtbASQ6xWqdDYWIMmum7QkpYUlqCysgzqmhqxv%2bBy0VWEKHfwB/wYI67AZbdgaDzj%2bZlVohXmAcwBuDTGPIDNIBzyY2DADI22B62tzdAbdeho6UAwEoRG0wudrgca8gM6TRf6ujXo6mhFd28PDEY9Wqh/aCJE9wuI5IoF6xseElq0UK1wxQSQyQPGee2dnB/zgdHRIaLE04rnTyImSI%2b0bjCj%2bI3xUCBraSye4KX3qSzZ4lxpbe5d4itTEsssjTkppndrNRiixKi7qQ6FxeXkCPMJl9He1Q61qhLnvv0WFwou4srVK5QwGZGfdxZ55ATzL15AXkE%2bCi/n4dz5i6hvqMHVwmsYIRPgtQVeWvN43ATJ3NKLqv8PLLo/INs6vrx0zrm/SGFjU2KlaIwmEKB0mdVaFE1ddlEpZmc5MTmBcDhAPsRN4dIpKs3MG7geyGYVDI6LgirXELjkNkn9mVOwqUkVp6XX%2bW8VN2yRiZCHF1tPFtjlIXZzpCo73MrH6VoiL7EnhUePK9Ejm0ATYlxMqQekV4wkzCi7SJba7XEruGGTlLJXJ22/X%2bYev6U2Ht0KFrvnUju9fgxu0AB2cBzfkxlOh6XF8Z/VV95/91MLYSVwgw%2bQihNRNDfVw0jOS9NLOX5zC%2bX4o1IEIJuVt5/dCZgvAGrZGcXjUzh17AiOnTyBkyeO4d8ffQR1Q6tSF%2bStqHfC18%2bqAXNl8aQS9ycnQ6LqK3MAlhz3lfcOrmYsui6QToOR9l/emHgnYMFdYpy/Rygec92fW3aMoVBQHE%2bIGH1z4Pusmh0i8ldvqlWjoqJUFDyrKotxMS%2bf8nuDsj1mKZYlL4rwdluvoMe3f1/hLe0TlFQ9AafDITZFDDqcgtFZBgcxTNGAqSmnuLFEfEnEkwnB5qZnoqtrj5C0ASqZkZzMKvsEFtoLnA1c4JD39Oca/ge73Iv7xIu6FgAAAABJRU5ErkJggg==' /%3e%3c/svg%3e\" width=\"478\" alt=\"Related pages plug-in screenshot\" data-srcset=\"/assets/static/screenshot_related_pages.69ed4eb.107b7ea9498b975710aa5c68c68d7a96.gif 478w\" data-sizes=\"(max-width: 478px) 100vw, 478px\" data-src=\"/assets/static/screenshot_related_pages.69ed4eb.107b7ea9498b975710aa5c68c68d7a96.gif\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/screenshot_related_pages.69ed4eb.107b7ea9498b975710aa5c68c68d7a96.gif\" width=\"478\" alt=\"Related pages plug-in screenshot\"></noscript></p>\n<p>See the documention screen for sample frontend code which lists the related pages.</p>\n<p>Please be aware that I really did knock this together rather quickly, but it works for me. If anyone finds any bugs, please let me know.</p>\n<h2 id=\"6-thoughts-on-wolf-cms-related-pages-plugin\"><a href=\"#6-thoughts-on-wolf-cms-related-pages-plugin\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>6 thoughts on “Wolf CMS Related Pages plugin”</h2>\n<h3 id=\"steven\"><a href=\"#steven\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Steven</h3>\n<p><em>January 15, 2011 at 4:08 pm</em></p>\n<p>Very nice work! The plugin for Wolf version 0.6 works perfectly but I also tried the version for wolf 0.7.2 and it didn’t open the sub pages.</p>\n<p>I tried it on a fresh install of the latest Wolf release (which is 0.7.3) so maybe that why the sub pages didn’t show. Just letting you know in case the problem is coming from version 0.7.3</p>\n<p>Still amazing! Keep up the good work!</p>\n<hr>\n<h3 id=\"steven-1\"><a href=\"#steven-1\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Steven</h3>\n<p><em>March 19, 2011 at 1:54 pm</em></p>\n<p>Hey Andrew, I found a bug in your plugin,\nin the DeleteAllByPage function, you need to change it to</p>\n<pre class=\"language-text\"><code class=\"language-text\">Record::deleteWhere(__CLASS__, ‘page_id = ? OR related_page_id’, array($page_id, $page_id));</code></pre>\n<p>Because you also need to delete all of the records of the pages linked to the deleted page. When you get the relations, you get the url manually… but if you give it an id of a page that was deleted, it loops forever. So when a page is deleted, make sure you delete it’s entries and the entries of the pages linking to it.</p>\n<hr>\n<h3 id=\"steven-2\"><a href=\"#steven-2\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Steven</h3>\n<p><em>March 19, 2011 at 1:55 pm</em></p>\n<p>Sorry, there was a mistake in the line I sent you… this is the fix:</p>\n<pre class=\"language-text\"><code class=\"language-text\">Record::deleteWhere(__CLASS__, ‘page_id = ? OR related_page_id = ?’, array($page_id, $page_id));</code></pre>\n<hr>\n<h3 id=\"andy\"><a href=\"#andy\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Andy</h3>\n<p><em>March 19, 2011 at 6:18 pm</em></p>\n<p>Thanks Steven, the download now includes your fix. Thanks for this, it’s much appreciated.</p>\n<hr>\n<h3 id=\"christoph\"><a href=\"#christoph\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Christoph</h3>\n<p><em>October 10, 2011 at 6:22 am</em></p>\n<p>Hi!</p>\n<p>super plugin for wolf cms! My question: are there any possibilities to show the “parent->title()” of a “related article”??</p>\n<p>Thank you for your help!</p>\n<p>Greetings from Germany!\nChristoph</p>\n<hr>\n<h3 id=\"andy-r\"><a href=\"#andy-r\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Andy R</h3>\n<p><em>October 10, 2011 at 8:57 pm</em></p>\n<p>You should by able to access the parent like you would any page object:</p>\n<pre class=\"language-text\"><code class=\"language-text\">&lt;?php\n$relations = get_relations($this-&gt;id);\n\nif (!empty($relations)){\n  echo &#39;&lt;ul&gt;&#39;;\n  foreach ($relations as $related){\n    echo &#39;&lt;li&gt;&#39; . $related-&gt;parent()-&gt;title() . &#39;: &#39; . $related-&gt;link() . &#39;&lt;/li&gt;&#39;;\n  }\n  echo &#39;&lt;/ul&gt;&#39;;\n}\n?&gt;</code></pre>\n<p>But I still think there is a problem with incorrectly initialised objects when obtained by the findById function.</p>\n<p>See: <a href=\"https://github.com/wolfcms/wolfcms/issues/175\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://github.com/wolfcms/wolfcms/issues/175</a></p>\n<hr>\n"}},{"node":{"title":"Using the Zend framework Lucene library Part 2","path":"/using-the-zend-framework-lucene-library-part-2/","date":"4. July 2008","timeToRead":10,"description":"Note: Since this article was written I’ve moved to WordPress, and have not implemented the example code listed below.\nIn a previous article I talked about using a library from the Zend framework to create a site search. As you try out this functionality using the search box, above right.","content":"<p><strong>Note</strong>: Since this article was written I’ve moved to WordPress, and have not implemented the example code listed below.</p>\n<p>In a previous article I talked about using a library from the Zend framework to create a site search. As you try out this functionality using the search box, above right.</p>\n<p>I never finished the article, so I'll explain here how I implemented this using CodeIgniter. I'll also detail how I built the 'quick results' tool (click in the search box).</p>\n<p>Below is an example controller class that shows how I constructed the search index by pulling articles out of the database. My actual class calls security methods that require authentication before performing any of these methods. I left them out of the listing to keep it short and sweet. You will have to alter the code to allow for the difference in database schema, and to suit your intended available search criteria.</p>\n<pre class=\"language-text\"><code class=\"language-text\">&lt;?php\nclass Search extends Controller {\n\n    function Search()\n    {\n        parent::Controller();\n\n        // Load Zend Lucene library.  See previous article.\n        $this-&gt;load-&gt;library(&#39;zend&#39;);\n        $this-&gt;zend-&gt;load( &#39;Zend/Search/Lucene&#39;);\n\n        // Location of search index.  Used by all Search controller methods.\n        $this-&gt;search_index = APPPATH . &#39;search/index&#39;;\n    }\n\n    function reindex()\n    {\n        // Create index.  Will delete any existing index.\n        $index = Zend_Search_Lucene::create($this-&gt;search_index);\n\n        // Obtain all articles.\n        $query = $this-&gt;db-&gt;get(&#39;articles&#39;);\n\n        // Loop through articles, adding an index for each one.\n        foreach ($query-&gt;result() as $article)\n        {\n            // Create Lucene document for this article.\n            $doc = new Zend_Search_Lucene_Document();\n\n            // Add required fields.\n            $doc-&gt;addField(Zend_Search_Lucene_Field::Text(&#39;title&#39;, $article-&gt;title));\n            $doc-&gt;addField(Zend_Search_Lucene_Field::Text(&#39;subtitle&#39;, $subtitle));\n            $doc-&gt;addField(Zend_Search_Lucene_Field::Text(&#39;category&#39;, $category_list));\n            $doc-&gt;addField(Zend_Search_Lucene_Field::Text(&#39;path&#39;, &#39;/article/display/&#39; . $article-&gt;path));\n            $doc-&gt;addField(Zend_Search_Lucene_Field::UnStored(&#39;content&#39;, $article-&gt;summary . $article-&gt;text));\n\n            // Add docuument to index.\n            $index-&gt;addDocument($doc);\n\n            echo &#39;Added &#39; . $item-&gt;title . &#39; to index.&lt;br /&gt;&#39;;\n        }\n\n        $index-&gt;optimize();\n    }\n\n    function optimize()\n    {\n        $index = Zend_Search_Lucene::open($this-&gt;search_index);\n        $index-&gt;optimize();\n\n        echo &#39;&lt;p&gt;Index optimized.&lt;/p&gt;&#39;;\n    }\n}</code></pre>\n<p>To utilise the index a result method is required:</p>\n<pre class=\"language-text\"><code class=\"language-text\">function result()\n{\n    // Create empty array, in case there are no results.\n    $data[&#39;results&#39;] = array();\n\n    // If a search_query parameter has been posted, search the index.\n    if ($this-&gt;input-&gt;post(&#39;search_query&#39;))\n    {\n        $index = Zend_Search_Lucene::open($this-&gt;search_index);\n\n        // Get results.\n        $data[&#39;results&#39;] = $index-&gt;find($this-&gt;input-&gt;post(&#39;search_query&#39;));\n    }\n\n    // Load view, and populate with results.\n    $this-&gt;load-&gt;view(&#39;search_result_view&#39;, $data);\n}</code></pre>\n<p>And, of course, a view is required to display the results:</p>\n<pre class=\"language-text\"><code class=\"language-text\">&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;Search results&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n\n&lt;h1&gt;Search results&lt;/h1&gt;\n\n&lt;?php if (empty($_POST[&#39;search_query&#39;])):?&gt;\n&lt;p&gt;No search query submitted.&lt;/p&gt;\n&lt;?php else:?&gt;\n    &lt;?php if (count($results)):?&gt;\n&lt;p&gt;&lt;?php echo count($results) ?&gt; result(s) returned for query: &lt;?php echo $_POST[&#39;search_query&#39;];?&gt;&lt;/p&gt;\n&lt;ul&gt;\n    &lt;?php foreach($results as $result):?&gt;\n    &lt;li&gt;&lt;?=anchor(site_url($result-&gt;path), $result-&gt;title);?&gt; (&lt;?php echo round($result-&gt;score, 2) * 100;?&gt;%)&lt;/li&gt;\n    &lt;?php endforeach;?&gt;\n&lt;/ul&gt;\n    &lt;?php else:?&gt;\n&lt;p&gt;No results were returned for query: &lt;?php echo $_POST[&#39;search_query&#39;];?&gt;&lt;/p&gt;\n    &lt;?php endif;?&gt;\n&lt;?php endif;?&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;</code></pre>\n<h2 id=\"20-thoughts-on-using-the-zend-framework-lucene-library-part-2\"><a href=\"#20-thoughts-on-using-the-zend-framework-lucene-library-part-2\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>20 thoughts on “Using the Zend framework Lucene library Part 2”</h2>\n<h3 id=\"jeff\"><a href=\"#jeff\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Jeff</h3>\n<p><em>November 14, 2008 at 8:07 am</em></p>\n<p>Great post! Keep it up.</p>\n<hr>\n<h3 id=\"rob\"><a href=\"#rob\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Rob</h3>\n<p><em>March 9, 2009 at 6:01 am</em></p>\n<p>Hi Andrew,</p>\n<p>Many thanks for these articles, after a little tweakage I managed to get it all going on a project I’m working on. (I’m pretty new to CI/PHP/Apache having come from ASP/VBScript/IIS [Yuk, I know..])</p>\n<p>However, I have a question: At the moment, same as your tutorial, I’m searching on only one table in the db, a table called Items (news, events, careers) which is fine but I need to be able to index a number of other tables. What I’m mostly wondering about is how to set the link in the result, I presume the rest is just replicating the code I already have for indexing?</p>\n<p>Have you any insights, experience, wisdom, links? Any help would be greatly appreciated.</p>\n<p>Thanks,</p>\n<p>Rob.</p>\n<hr>\n<h3 id=\"rob-1\"><a href=\"#rob-1\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Rob</h3>\n<p><em>March 11, 2009 at 5:35 am</em></p>\n<p>Andrew,</p>\n<p>Many thanks for your swift and insightful reply.. I haven’t had a chance to test it yet but your code and explanations make sense and have cleared up a lot for me.</p>\n<p>Thanks again for your time, you’ve saved me a lot of mine!</p>\n<p>Cheers!</p>\n<p>Rob.</p>\n<hr>\n<h3 id=\"zaw\"><a href=\"#zaw\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>zaw</h3>\n<p><em>March 13, 2009 at 9:42 am</em></p>\n<p>In the display result view page, when searching html file content the result will be long text.\nHow can I display only the synopsis of the long text?\nI want to show the parts of text in result that found the search terms.</p>\n<p>e.g. in google result when I find the search term | zend framework sample |</p>\n<p>Akra?s DevNotes ? Tutorial: Getting Started with Zend Framework\nThe original tutorial for Zend Framework 1.0 is still available, ... Rob, Did you have a sample of using Zend call linux command ? how to do that? ...</p>\n<p>In above e.g., Google show two parts of text. How can I do like this?</p>\n<hr>\n<h3 id=\"zaw-1\"><a href=\"#zaw-1\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>zaw</h3>\n<p><em>March 14, 2009 at 3:28 pm</em></p>\n<p>Hi Andrew</p>\n<p>I mean in the result list I would like to show only the line near the search term found.</p>\n<p>I’m testing with zend frame sample code ZendFramework-1.7.6demosZendSearchLucenefeed-searchsearch-index.php</p>\n<p>At line 41 of search-index.php, trim(substr($hit->$field,0,76)). It is only show the first 76 characters of result text.</p>\n<p>I’m afraid that the search term may not include within first 76 characters.\nI mean if the search term found at the postition of 100th character, I want to show the text near 100th character like google result.</p>\n<p>thanks</p>\n<hr>\n<h3 id=\"andy\"><a href=\"#andy\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Andy</h3>\n<p><em>March 15, 2009 at 12:52 pm</em></p>\n<p>Hello Zaw</p>\n<p>Take a look at:</p>\n<p><a href=\"http://framework.zend.com/manual/en/zend.search.lucene.searching.html#\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">http://framework.zend.com/manual/en/zend.search.lucene.searching.html#</a>\nzend.search.lucene.searching.highlighting</p>\n<p>You will need to store the content as a text field, so it can be used by the Zend Query Parser to highlight the returned text.</p>\n<p>The main problem you will have, is restricting the amount of content returned, as you will not want the entire document, only the sentence(s) in which the highlighed search terms appear.</p>\n<p>I had a go quick on my site, and made it work, but did not get around to the final problem I’ve, er, highlighed.</p>\n<hr>\n<h3 id=\"zaw-2\"><a href=\"#zaw-2\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Zaw</h3>\n<p><em>May 13, 2009 at 4:38 am</em></p>\n<p>Hello</p>\n<p>Thanks for your reply.</p>\n<p>I found a way to display search results as I want in the following link\n<a href=\"http://www.whatstyle.net/articles/6/displaying_search_results_with_php\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">http://www.whatstyle.net/articles/6/displaying_search_results_with_php</a></p>\n<p>This class can show the parts of content near search keyword.\nI want to integrate this class with zend lucene result.\nBut this chunk class require three parameters</p>\n<ol>\n<li>the subject string,</li>\n<li>a maximum amount of characters and</li>\n<li>an array of search words.</li>\n</ol>\n<p>How can I get array of search words from zend lucene result?\nIf I query with wild card in lucene, the result hightlight text may vary depend of the content of file.</p>\n<p>e.g. If I query like meth*, the result may include method, methodology, etc.\nI need to know which words are found in the file to use the chunk class.</p>\n<p>Is there a way to find the list of keywords that found for a search result?</p>\n<p>Thanks</p>\n<hr>\n<h3 id=\"junaid\"><a href=\"#junaid\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>junaid</h3>\n<p><em>May 16, 2009 at 12:13 pm</em></p>\n<p>hi andrew,\ni have a problem while using your method code. i have only included exception .php file and Zend/Search folder in my application/libraries. i get an error\nMessage:</p>\n<pre class=\"language-text\"><code class=\"language-text\">CI_Zend::require_once(Zend/Search/Lucene.php) [ci-zend.require-once]: failed to open stream: No such file or directory\n\nFilename: libraries/Zend.php\n\nLine Number: 35</code></pre>\n<p>if u can please help me .</p>\n<hr>\n<h3 id=\"junaid-1\"><a href=\"#junaid-1\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>junaid</h3>\n<p><em>May 17, 2009 at 4:18 am</em></p>\n<p>hi,\nthanks for your reply.</p>\n<pre class=\"language-text\"><code class=\"language-text\">/system/application/libraries/Zend/Search/Lucene.php does exist.</code></pre>\n<p>i m on windows with XAMPP. i m also using CI 1.71. but i read on codeigniter/forums that u have to write</p>\n<pre class=\"language-text\"><code class=\"language-text\">$this-&gt;load-&gt;library(‘zend’);\n$this-&gt;zend-&gt;load( ‘Zend/Search/Lucene’);</code></pre>\n<p>instead of</p>\n<pre class=\"language-text\"><code class=\"language-text\">$this-&gt;load-&gt;library(‘zend’, ‘Zend/Search/Lucene’);</code></pre>\n<p>in the controller.</p>\n<p>also i have upgraded log_threshold to 4. i have checked the log and classes are successfully initialized and loaded...</p>\n<p>i have changed the reindex function according to my database. i have a “event” table in my DB. and it has a “Event_name” field. so reindex looks like</p>\n<pre class=\"language-text\"><code class=\"language-text\">function reindex()\n{\n    // Create index. Will delete any existing index.\n    $this-&gt;create();\n\n    // Obtain all events.\n    $query = $this-&gt;db-&gt;get(‘event’);\n\n    // Loop through articles, adding an index for each one.\n    foreach ($query-&gt;result() as $event)\n    {\n        // Create Lucene document for this article.\n        $doc = new Zend_Search_Lucene_Document();\n\n        // Add required fields.\n        $doc-&gt;addField(Zend_Search_Lucene_Field::Text(‘eventname’, $event-&gt;Event_name));\n\n        $index-&gt;addDocument($doc);\n\n        echo ‘Added ‘ . $item-&gt;eventname . ‘ to index.\n        ‘;\n    }\n\n    $index-&gt;optimize();\n}</code></pre>\n<p>and i get a long long error</p>\n<pre class=\"language-text\"><code class=\"language-text\">Fatal error: Uncaught exception ‘Zend_Search_Lucene_Exception’ with message ‘Index doesn’t exists in the specified directory.’ in C:xampphtdocscodeignitersystemapplicationlibrariesZendSearchLucene.php:547 Stack trace: #0 C:xampphtdocscodeignitersystemapplicationlibrariesZendSearchLucene.php(214): Zend_Search_Lucene-&gt;__construct(‘C:xampphtdocs…’, false) #1 C:xampphtdocscodeignitersystemapplicationcontrollerssearch.php(70): Zend_Search_Lucene::open(‘C:xampphtdocs…’) #2 C:xampphtdocscodeignitersystemcodeigniterCodeIgniter.php(233): Search-&gt;result() #3 C:xampphtdocscodeigniterindex.php(115): require_once(‘C:xampphtdocs…’) #4 {main} thrown in C:xampphtdocscodeignitersystemapplicationlibrariesZendSearchLucene.php on line 547</code></pre>\n<hr>\n<h3 id=\"andy-1\"><a href=\"#andy-1\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Andy</h3>\n<p><em>May 17, 2009 at 4:19 am</em></p>\n<p>It looks like an error in my code. I’ve changed the way the library is loaded, as you suggested. Removed the create method, and have created the index directly within the reindex method.</p>\n<hr>\n<h3 id=\"john\"><a href=\"#john\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>john</h3>\n<p><em>May 21, 2009 at 6:51 am</em></p>\n<pre class=\"language-text\"><code class=\"language-text\">A PHP Error was encountered\nSeverity: Notice</code></pre>\n<p>I got this error when i try ur code. i spend few days but i still can’t fix it. please help</p>\n<pre class=\"language-text\"><code class=\"language-text\">Message: iconv_strlen() [function.iconv-strlen]: Wrong charset, conversion from `’ to `UCS-4LE’ is not allowed\n\nFilename: Search/QueryLexer.php\n\nLine Number: 343</code></pre>\n<hr>\n<h3 id=\"andy-2\"><a href=\"#andy-2\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Andy</h3>\n<p><em>May 21, 2009 at 6:55 am</em></p>\n<p>You appear to be having a problem with the Zend library class rather than my code.</p>\n<p>A quick Google brings something that might help.</p>\n<hr>\n<h3 id=\"yeiniel\"><a href=\"#yeiniel\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>yeiniel</h3>\n<p><em>February 10, 2010 at 11:47 am</em></p>\n<p>there is no problem width the code, the problem here is that the search index is not created. you need to create the index first. see Zend framework documentation to acomplish that</p>\n<hr>\n<h3 id=\"noel\"><a href=\"#noel\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>noel</h3>\n<p><em>May 14, 2010 at 4:50 am</em></p>\n<p>This works fine on my local, but as soon as i put it on my live server i get:</p>\n<pre class=\"language-text\"><code class=\"language-text\">A PHP Error was encountered\n\nSeverity: Warning\n\nMessage: CI_Zend::require_once(Zend/Search/Lucene.php) [ci-zend.require-once]: failed to open stream: No such file or directory\n\nFilename: libraries/Zend.php\n\nLine Number: 51</code></pre>\n<hr>\n<h3 id=\"brian\"><a href=\"#brian\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Brian</h3>\n<p><em>January 3, 2011 at 12:58 pm</em></p>\n<p>Thank you, I have the Lucene searching within the CI framework now, but do you know of a way to paginate the results? The CI Library is fine for database queries, but I am not sure how to implement pagination with the Lucene indexes...</p>\n<hr>\n<h3 id=\"tom\"><a href=\"#tom\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>tom</h3>\n<p><em>January 3, 2011 at 12:59 pm</em></p>\n<p>pls help me...</p>\n<pre class=\"language-text\"><code class=\"language-text\">Fatal error: Class ‘Zend_Search_Lucene’ not found</code></pre>\n<hr>\n<h3 id=\"ria\"><a href=\"#ria\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>ria</h3>\n<p><em>March 19, 2011 at 1:54 pm</em></p>\n<p>very helpful resource. thanks for sharing.</p>\n<hr>\n<h3 id=\"annony\"><a href=\"#annony\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>annony</h3>\n<p><em>August 8, 2011 at 9:57 am</em></p>\n<p>Index doesnâ€™t exists in the specified directory::</p>\n<p>I work on windows, and may be its due to file permission. Anyway, I tried using create first and then open . See,\n<a href=\"http://framework.zend.com/manual/1.11/en/learning.lucene.index-opening.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">http://framework.zend.com/manual/1.11/en/learning.lucene.index-opening.html</a></p>\n<p>Once created , I removed create statement, and worked fine</p>\n<hr>\n<h3 id=\"leonardo-siagian\"><a href=\"#leonardo-siagian\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Leonardo Siagian</h3>\n<p><em>March 10, 2014 at 5:18 am</em></p>\n<p>how if i use category in searching? it’s mean, i select firstly category before searching.</p>\n<p>i try this code:</p>\n<pre class=\"language-text\"><code class=\"language-text\">$category= $this-&gt;input-&gt;post(‘category’);\n$keyword =strtolower($this-&gt;input-&gt;post(‘keyword’));\n\n$query = new Zend_Search_Lucene_Search_Query_MultiTerm();\n$query-&gt;addTerm(new Zend_Search_Lucene_Index_Term($keyword,’content_article’),true);\n$query-&gt;addTerm(new Zend_Search_Lucene_Index_Term($category,category_article’), true);\n$data[‘results’] = $index-&gt;find($query);</code></pre>\n<p>according that code, i just can use single word as the keyword, and can not use(find) more than one word (phrase).</p>\n<p>anybody can solve my problem? thanks ...</p>\n<hr>\n<h3 id=\"kopano-unity\"><a href=\"#kopano-unity\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Kopano Unity</h3>\n<p><em>July 22, 2014 at 1:41 pm</em>\nHi Jeff</p>\n<p>Thanks for the post first of all it is very understandable, but I keep coming across an error in my code hope you can help me here is my stackoverflow question link <a href=\"http://stackoverflow.com/questions/24887645/zend-lucene-search-content-inside-a-datebase-in-html-on-a-live-website-404-er\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">http://stackoverflow.com/questions/24887645/zend-lucene-search-content-inside-a-datebase-in-html-on-a-live-website-404-er</a></p>\n<hr>\n"}},{"node":{"title":"Using the Zend framework Lucene library","path":"/using-the-zend-framework-lucene-library/","date":"23. May 2008","timeToRead":6,"description":"I know, only a few articles in, so I don't really need a site search function. But you never know, I might actually keep writing (even if no-one is reading) and so I've been looking around for some solutions.","content":"<p>I know, only a few articles in, so I don't really need a site search function. But you never know, I might actually keep writing (even if no-one is reading) and so I've been looking around for some solutions.</p>\n<p>I've looked at a few, for example: <a href=\"http://www.swish-e.org/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Swish-e</a>, and <a href=\"http://www.sphider.eu/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Sphider</a>. Nothing really float my boat, until I had a look at the Zend Framework. It's another MVC based PHP framework, though it looks a little heavier than CodeIgniter. The documentation is not as good either, but it did have a Lucene library.</p>\n<p>I found a way of incorporating a Zend framework class as a CodeIgniter library here by Fred Wu. Nice work Fred, thanks.</p>\n<p>As Fred suggests, copy the Zend folder from the framework library to application/libraries/ in your CodeIgniter installation. I discovered that I only needed the Zend/Search folder, and the Zend/Exception.php file.</p>\n<p>Continuing Fred's instructions, create a Zend.php library file with the code posted on his blog page. Now we can get started.</p>\n<p>Create a directory for the index. In my example code I created a directory called application/search. Now we can create a controller called search.php that will contain some simple create, and search methods:</p>\n<pre class=\"language-text\"><code class=\"language-text\">&lt;?php\nclass Search extends MY_Controller {\n\n    function Search()\n    {\n        parent::MY_Controller();\n\n        $this-&gt;load-&gt;library(&#39;zend&#39;);\n        $this-&gt;zend-&gt;load(&#39;Zend/Search/Lucene&#39;);\n    }\n\n    function create()\n    {\n        // This method should be authenticated, or removed once the index is created.\n        // TODO: Some sort of site spidering process to add the entire site to the index.\n\n        $index = Zend_Search_Lucene::create(APPPATH . &#39;search/index&#39;);\n\n            $doc = Zend_Search_Lucene_Document_Html::loadHTMLFile(&#39;http://www.andrewrowland.com&#39;);\n\n            $index-&gt;addDocument($doc);\n\n        echo &#39;&lt;p&gt;Index created&lt;/p&gt;&#39;;\n    }\n\n    function index()\n    {\n        // TODO: Create an index method that contains a search form.\n    }\n\n    function result()\n    {\n        // Hardcoded search result example.\n        // TODO: Take a user search query, and expand the result summary\n\n        $index = Zend_Search_Lucene::open(APPPATH . &#39;search/index&#39;);\n\n        $data[&#39;results&#39;] = $index-&gt;find(&#39;andrew&#39;);\n\n        $this-&gt;load-&gt;view(&#39;search_result_view&#39;, $data);\n    }\n}\n?&gt;</code></pre>\n<p>I didn't bother with the create index view, as all that is needed is a simple message explaining that the index is created. The search_result_view.php view will display the results:</p>\n<pre class=\"language-text\"><code class=\"language-text\">&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;Search example&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n\n&lt;ul&gt;\n    &lt;?php foreach($results as $result):?&gt;\n    &lt;li&gt;&lt;?php echo $result-&gt;title;?&gt;&lt;/li&gt;\n    &lt;?php endforeach;?&gt;\n&lt;/ul&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;</code></pre>\n<p>As you can see, I've noted a few TODO's. Might add a bit of jQuery action (because I'm worth it) in there to. Weekend coming up, so I'll expand on this next week.</p>\n<h2 id=\"13-thoughts-on-using-the-zend-framework-lucene-library\"><a href=\"#13-thoughts-on-using-the-zend-framework-lucene-library\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>13 thoughts on “Using the Zend framework Lucene library”</h2>\n<h3 id=\"alex\"><a href=\"#alex\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>alex</h3>\n<p><em>May 17, 2009 at 2:36 pm</em></p>\n<p>what do i have to wrote in the code where it is the comment “ro do”?</p>\n<hr>\n<h3 id=\"andy\"><a href=\"#andy\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Andy</h3>\n<p><em>May 17, 2009 at 3:07 pm</em></p>\n<p>The index method doesn’t have to do much really, apart from load the view for this method.</p>\n<p>The view will consist of a form to post your search term. This will post to your result method, which is currently hardcoded with the term ‘Andrew’. You would change this to take the value from the form field.</p>\n<p>Clear? If not, I’ll amend the example.</p>\n<hr>\n<h3 id=\"suresh\"><a href=\"#suresh\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Suresh</h3>\n<p><em>June 30, 2009 at 11:48 am</em></p>\n<p>Hi Andy,</p>\n<p>Could you please post the content for Zend.php library file( CI ). As the link to Fred Wu site is down.</p>\n<p>Thanks for coming up with this search article.</p>\n<hr>\n<h3 id=\"andy-1\"><a href=\"#andy-1\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Andy</h3>\n<p><em>June 30, 2009 at 11:56 am</em></p>\n<p>No problem, you can obtain it here. I don’t know if he ever altered it, but this is the version of the code I use on my site.</p>\n<hr>\n<h3 id=\"peter\"><a href=\"#peter\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Peter</h3>\n<p><em>August 7, 2009 at 6:28 pm</em></p>\n<p>Hi,</p>\n<p>I followed your instruction and got Lucene for Zend to work in Code Igniter on my home server. Unfortunately after i copied it over to the hosted staging server i get these errors whenever i try to execute any Lucene methods:</p>\n<pre class=\"language-text\"><code class=\"language-text\">A PHP Error was encountered\nSeverity: Notice\nMessage: Hex number is too big: 0x100000000\nFilename: Storage/File.php\nLine Number: 268</code></pre>\n<p>Do you have any idea what could be wrong?</p>\n<p>Thanks</p>\n<p>Peter</p>\n<hr>\n<h3 id=\"asif\"><a href=\"#asif\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Asif</h3>\n<p><em>August 7, 2009 at 6:30 pm</em></p>\n<p>will it crawl the whole domain going through each link and create the search content?</p>\n<p>if that is the case then how can i generate the url link with the search keyword in the search result display?</p>\n<hr>\n<h3 id=\"andy-2\"><a href=\"#andy-2\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Andy</h3>\n<p><em>August 7, 2009 at 6:47 pm</em></p>\n<p>This example is just a test case that indexes the home page of my site. A more complete example can be found in the next part of this article.</p>\n<hr>\n<h3 id=\"nir-gavish\"><a href=\"#nir-gavish\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Nir Gavish</h3>\n<p><em>September 13, 2009 at 2:29 am</em></p>\n<p>i’ve seen much talk about using lucene as an indexer, but what about using it as the sole data repository? anyone ever try it? how did it preform? how reliable was it? thanks</p>\n<hr>\n<h3 id=\"junaid\"><a href=\"#junaid\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>junaid</h3>\n<p><em>April 10, 2010 at 4:12 am</em></p>\n<p>Hi,\na month ago i sent you comments regarding your article about integration of zend lucene with CI. I have got out of the errors as i reported to you before. but got into some new ones. Now i want to search html docs in my application…every query i m submitting in search is returning no results..when there actually are. i am sending you the code..plz if you can have a look at it and point out my mistake.</p>\n<p>Controller</p>\n<pre class=\"language-text\"><code class=\"language-text\">&lt;?php\nclass Search extends Controller {\n    function Search()\n    {\n        parent::Controller();\n\n        $this-&gt;load-&gt;library(‘zend’);\n        $this-&gt;zend-&gt;load(‘Zend/Search/Lucene’);\n        $this-&gt;search_index = APPPATH . ‘search/index’;\n    }\n\n    function create()\n    {\n        Zend_Search_Lucene::create($this-&gt;search_index);\n        $doc = Zend_Search_Lucene_Document_Html::loadHTMLFile(’http://localhost/codeigniter/index.php/universities/home’);\n        $doc-&gt;addField(Zend_Search_Lucene_Field::UnIndexed(‘url’, ‘http://localhost/codeigniter/index.php/universities/home’));\n\n        $index-&gt;addDocument($doc);\n        $index-&gt;commit();\n\n        $index-&gt;optimize();\n    }\n\n    function optimize()\n    {\n        $this-&gt;login();\n\n        $index = Zend_Search_Lucene::open($this-&gt;search_index);\n        $index-&gt;optimize();\n\n        echo ‘\n\n        Index optimized.\n\n        ‘;\n    }\n\n    function result()\n    {\n        // Create empty array, in case there are no results.\n        $data[‘results’] = array();\n\n        // If a search_query parameter has been posted, search the index.\n        if ($this-&gt;input-&gt;post(‘search_query’))\n\n        {\n            $index = Zend_Search_Lucene::open($this-&gt;search_index);\n            $data[‘results’] = $index-&gt;find($this-&gt;input-&gt;post(‘search_query’));\n        }\n        // Load view, and populate with results.\n        $this-&gt;load-&gt;view(‘search/search_result’, $data);\n    }\n}\n?&gt;</code></pre>\n<p>and at search_result view i get every time “No results were returned for query: a”.</p>\n<p>can u figure aut my mistake plz.</p>\n<hr>\n<h3 id=\"jesmar\"><a href=\"#jesmar\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Jesmar</h3>\n<p><em>February 8, 2011 at 10:28 am</em></p>\n<p>HELLO..i have a problem in my ordering system…I have an error on my controller…Fatal error: <code class=\"language-text\">Call to a member function result() on a non-object in C:xampphtdocscifofb1projectsystemapplicationcontrollerscuser.php on line 210</code>…pls help me</p>\n<hr>\n<h3 id=\"noor\"><a href=\"#noor\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Noor</h3>\n<p><em>January 8, 2015 at 7:27 am</em></p>\n<p>I downloaded the latest Zend framework release ‘ZendFramework-2.3.3.zip’ form site <a href=\"http://framework.zend.com/downloads\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">http://framework.zend.com/downloads</a>, but I did not find the folder “Search” in path “Zend/Search/Lucene” !! from where I can get it?</p>\n<hr>\n<h3 id=\"noor-1\"><a href=\"#noor-1\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Noor</h3>\n<p><em>January 8, 2015 at 8:18 am</em></p>\n<p>Ok, I discover the problem, zf2 put zendSearch as an optional library, so I have to download it alone</p>\n<hr>\n<h3 id=\"noor-2\"><a href=\"#noor-2\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Noor</h3>\n<p><em>January 8, 2015 at 11:08 am</em></p>\n<p>following your steps, the search works for the previous version of zf1., but right now I want to work with zf2.\nI put the folder ZendSearch under librariy/zend, and I have chnaged the links to look like this:</p>\n<pre class=\"language-text\"><code class=\"language-text\">$this-&gt;load-&gt;library(‘zend’);\n$this-&gt;zend-&gt;load(‘Zend/ZendSearch/Lucene/Lucene’);</code></pre>\n<p>But unfortunately nothing works ?? what is wrong ?</p>\n<hr>\n"}},{"node":{"title":"CodeIgniter and Ajax","path":"/code-igniter-and-ajax/","date":"27. April 2008","timeToRead":4,"description":"I've been asked to create a dashboard for many devices across our network. To display real-time information on each component, I'm thinking of using Web services, and AJAX. Like most aspects of coding, using a framework to do all the heavy lifting, rather than developing your own, is a sensible approach.\nSo today I took a look at jQuery, a JavaScript framework. I have to admit, I'm pretty impressed. It did not take me long to come up with some example code, that degrades well when JavaScript is disabled in the browser.","content":"<p>I've been asked to create a dashboard for many devices across our network. To display real-time information on each component, I'm thinking of using Web services, and AJAX. Like most aspects of coding, using a framework to do all the heavy lifting, rather than developing your own, is a sensible approach.</p>\n<p>So today I took a look at jQuery, a JavaScript framework. I have to admit, I'm pretty impressed. It did not take me long to come up with some example code, that degrades well when JavaScript is disabled in the browser.</p>\n<p>My example app lists continents. Clicking on a continent will return a list of countries in that continent.</p>\n<p>Create a CodeIgniter controller and save as <strong>world.php</strong>:</p>\n<pre class=\"language-text\"><code class=\"language-text\">&lt;?php\nclass World extends Controller {\n\n    function World()\n    {\n        parent::Controller();\n    }\n\n    function index($continent = NULL)\n    {\n        // Set continents data.  In a real application we\n        // would obtain this from a database via a model.\n        $data[&#39;continents&#39;] = array(\n                1 =&gt; &#39;Europe&#39;,\n                2 =&gt; &#39;Africa&#39;,\n                3 =&gt; &#39;North America&#39;,\n            );\n\n        // If a non-Ajax continent selection is made, call the\n        // list_countries method, and set countries data.\n        if (isset($continent))\n        {\n            $data[&#39;countries&#39;] = $this-&gt;list_countries($continent);\n        }\n\n        // Load world view.\n        $this-&gt;load-&gt;view(&#39;world_view&#39;, $data);\n    }\n\n    function list_countries($continent)\n    {\n        // Generated countries data.  As before, this would be\n        // obtained from a model.\n        $continents = array(\n                1 =&gt; array(&#39;UK&#39;, &#39;France&#39;, &#39;Germany&#39;),\n                2 =&gt; array(&#39;South Africa&#39;, &#39;Zimbabwe&#39;, &#39;Cameroon&#39;),\n                3 =&gt; array(&#39;USA&#39;, &#39;Canada&#39;),\n            );\n\n        // Decide whether to return JSON data, or an array,\n        // depending if $_POST[&#39;ajax&#39;] is set.\n        if (isset($_POST[&#39;ajax&#39;]))\n        {\n            echo json_encode($continents[$continent]);\n        }\n        else\n        {\n            return $continents[$continent];\n        }\n    }\n}\n?&gt;</code></pre>\n<p>Create a view and save as <strong>world_view.php</strong>:</p>\n<pre class=\"language-text\"><code class=\"language-text\">&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;World example&lt;/title&gt;\n    &lt;script type=&quot;text/javascript&quot; src=&quot;/jquery.js&quot;&gt;&lt;/script&gt;\n    &lt;script type=&quot;text/javascript&quot;&gt;\n    function list_countries(id) {\n        $(&#39;li &gt; ul&#39;).slideUp(&#39;slow&#39;);\n\n        if ($(&#39;#id_&#39; + id).children(&#39;ul&#39;).length == 0) {\n            $.post(&#39;/world/list_countries/&#39; + id, {ajax:&#39;true&#39;},\n                function(data){\n                    unorderedlist = $(&#39;&lt;ul/&gt;&#39;).css(&#39;display&#39;, &#39;none&#39;);\n\n                    $.each(data, function(i, country){\n                        $(&#39;&lt;li/&gt;&#39;).text(country).appendTo(unorderedlist);\n                    });\n\n                    unorderedlist.appendTo(&#39;#id_&#39; + id);\n                    unorderedlist.slideDown(&#39;slow&#39;);\n                }, &#39;json&#39;);\n        } else {\n            $(&#39;#id_&#39; + id + &#39; &gt; ul&#39;).slideDown(&#39;slow&#39;);\n        }\n\n        return false;\n    }\n    &lt;/script&gt;\n&lt;/head&gt;\n\n&lt;body&gt;\n\n&lt;ul&gt;\n    &lt;?php foreach($continents as $id =&gt; $name):?&gt;\n    &lt;li id=&quot;id_&lt;?=$id;?&gt;&quot;&gt;&lt;a onclick=&quot;return list_countries(&lt;?=$id;?&gt;);&quot; href=&quot;&lt;?=site_url(&quot;/world/index/$id&quot;);?&gt;&quot; title=&quot;Show countries in &lt;?=$name;?&gt;&quot;&gt;&lt;?=$name;?&gt;&lt;/a&gt;\n    &lt;?php if ($id == $this-&gt;uri-&gt;segment(3)):?&gt;\n    &lt;ul&gt;\n        &lt;?php foreach($countries as $country):?&gt;\n        &lt;li&gt;&lt;?=$country;?&gt;&lt;/a&gt;&lt;/li&gt;\n        &lt;?php endforeach;?&gt;\n    &lt;/ul&gt;&lt;/li&gt;\n    &lt;?php endif;?&gt;\n    &lt;?php endforeach;?&gt;\n&lt;/ul&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;</code></pre>\n<p>I just noticed that my ISP only has PHP4 installed. If this is the case for you, you will have to alter the controller to get this to work. Change the line:</p>\n<pre class=\"language-text\"><code class=\"language-text\">&lt;a href=&quot;http://www.php.net/echo&quot;&gt;echo&lt;/a&gt; json_encode($continents[$continent]);</code></pre>\n<p>To:</p>\n<pre class=\"language-text\"><code class=\"language-text\">&lt;a href=&quot;http://www.php.net/echo&quot;&gt;echo&lt;/a&gt; &#39;[&quot;&#39; . &lt;a href=&quot;http://www.php.net/implode&quot;&gt;implode&lt;/a&gt;(&#39;&quot;,&quot;&#39;, $continents[$continent]) . &#39;&quot;]&#39;;</code></pre>\n<p>Obviously this solution does not scale well for more complex data structures. I would advise using a JSON serializer library of some description. You could also create a view for the JSON structures, and pass data to that. This would actually be a sensible approach, as you would have complete control over the output.</p>\n<h2 id=\"12-thoughts-on-codeigniter-and-ajax\"><a href=\"#12-thoughts-on-codeigniter-and-ajax\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>12 thoughts on “CodeIgniter and Ajax”</h2>\n<h3 id=\"anonymous\"><a href=\"#anonymous\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Anonymous</h3>\n<p><em>August 12, 2008 at 5:34 pm</em></p>\n<p>Incredible, thanks a lot for this… it is exactly what I was looking for +invisible props.</p>\n<hr>\n<h3 id=\"christophe-sautot\"><a href=\"#christophe-sautot\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Christophe Sautot</h3>\n<p><em>May 13, 2009 at 4:37 am</em></p>\n<p>Thank you for posting this. It was really simple to understand, and straight to the point.</p>\n<hr>\n<h3 id=\"jedd\"><a href=\"#jedd\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Jedd</h3>\n<p><em>November 6, 2009 at 6:38 pm</em></p>\n<p>Looks interesting, and easy to follow. Reading is a bit frustrating on a 22″ monitor, given the code lumps are only showing about a 1/4 to a 1/3 of the width (much left &#x26; right scrolling required). Flippin’ pixel-based stylesheets!</p>\n<hr>\n<h3 id=\"ghprod\"><a href=\"#ghprod\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>ghprod</h3>\n<p><em>December 30, 2009 at 8:45 am</em></p>\n<p>wonderful application!</p>\n<p>thanks for sharing this ajax!</p>\n<hr>\n<h3 id=\"rick\"><a href=\"#rick\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Rick</h3>\n<p><em>January 28, 2010 at 4:17 am</em></p>\n<p>You have to load the url helper in the controller constructor like so:</p>\n<pre class=\"language-text\"><code class=\"language-text\">$this-&gt;load-&gt;helper(‘url’); or you will get an undefined function error site url();</code></pre>\n<p>Very nice post thanks</p>\n<hr>\n<h3 id=\"sudeep\"><a href=\"#sudeep\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>sudeep</h3>\n<p><em>April 10, 2010 at 4:12 am</em></p>\n<p>dear Very very thankxxxxxx</p>\n<hr>\n<h3 id=\"heisler\"><a href=\"#heisler\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>heisler</h3>\n<p><em>August 4, 2010 at 3:29 pm</em></p>\n<p>Gracias</p>\n<hr>\n<h3 id=\"rayhan\"><a href=\"#rayhan\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Rayhan</h3>\n<p><em>January 16, 2011 at 3:20 pm</em></p>\n<p>It’s awesome! thanks a lot</p>\n<hr>\n<h3 id=\"triathlon-wetsuit\"><a href=\"#triathlon-wetsuit\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>triathlon wetsuit</h3>\n<p><em>February 8, 2011 at 10:28 am</em></p>\n<p>Awesome!</p>\n<hr>\n<h3 id=\"frederik-\"><a href=\"#frederik-\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Frederik .</h3>\n<p><em>May 18, 2011 at 8:53 am</em></p>\n<p>exactly what is was looking for, thanks !</p>\n<hr>\n<h3 id=\"kevin-phillips\"><a href=\"#kevin-phillips\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Kevin Phillips</h3>\n<p><em>July 30, 2011 at 9:38 pm</em></p>\n<p>As of ci 2 with csrf enabled you also need to add the ci_csrf_token into the post data.</p>\n<p>You will need to add jquery.cookie.js\nie:\ncreate a var inside the script</p>\n<pre class=\"language-text\"><code class=\"language-text\">var cct = $.cookie(‘ci_csrf_token’);</code></pre>\n<p>then at that to the post data</p>\n<pre class=\"language-text\"><code class=\"language-text\">{ajax:’true’, ‘ci_csrf_token’:cct}</code></pre>\n<hr>\n<h3 id=\"kevin-phillips-1\"><a href=\"#kevin-phillips-1\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Kevin Phillips</h3>\n<p><em>July 30, 2011 at 11:00 pm</em></p>\n<p>I’ve made an update of this tutorial for codeigniter2 with csrf enabled\n<a href=\"http://www.kevinphillips.co.nz/news/jquery-axaj-codeigniter-2\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">http://www.kevinphillips.co.nz/news/jquery-axaj-codeigniter-2</a></p>\n<hr>\n"}}]}}},"context":{}}