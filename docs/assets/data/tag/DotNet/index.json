{"hash":"e21a68655b6a4b87516a75fe5be7f5d170f57ee5","data":{"tag":{"title":"DotNet","belongsTo":{"edges":[{"node":{"title":"Entity Framework quick start","path":"/entity-framework-quick-start/","date":"13. September 2011","timeToRead":3,"description":"Microsoft’s Entity Framework has been around a while, but with it’s latest incarnation it is really shaping up nicely. I’ve been enjoying the ‘code first’ approach in version 4.1 of the framework. This allows you start your application design from POCOs, allowing the framework to infer the database design for you.","content":"<p>Microsoft’s Entity Framework has been around a while, but with it’s latest incarnation it is really shaping up nicely. I’ve been enjoying the ‘code first’ approach in version 4.1 of the framework. This allows you start your application design from POCOs, allowing the framework to infer the database design for you. For example, take the following Member entity model:</p>\n<pre class=\"language-text\"><code class=\"language-text\">class Member\n{\n    public int Id { get; set; }\n    public string FirstName { get; set; }\n    public string LastName { get; set; }\n}</code></pre>\n<p>The following class derives from the DbContext base class, and exposes our Member model:</p>\n<pre class=\"language-text\"><code class=\"language-text\">class EFDbContext : DbContext\n{\n    public DbSet&lt;Member&gt; Members { get; set; }\n\n    public EFDbContext()\n    {\n        Database.SetInitializer&lt;EFDbContext&gt;(new DbContextInitializer());\n    }\n}</code></pre>\n<p>Note the <strong>SetInitializer</strong> call in the constructor. This allows us to seed the database with some data, using the following class:</p>\n<pre class=\"language-text\"><code class=\"language-text\">class DbContextInitializer : DropCreateDatabaseIfModelChanges&lt;EFDbContext&gt;\n{\n    protected override void Seed(EFDbContext Context)\n    {\n        new List&lt;Member&gt;\n        {\n            new Member {\n                FirstName = &quot;Andrew&quot;,\n                LastName = &quot;Rowland&quot;\n            },\n            new Member {\n                FirstName = &quot;Roland&quot;,\n                LastName = &quot;Browning&quot;\n            },\n        }.ForEach(m =&gt; Context.Members.Add(m));\n\n        base.Seed(Context);\n    }\n}</code></pre>\n<p>Now we need a simple repository class, so we can query the database:</p>\n<pre class=\"language-text\"><code class=\"language-text\">class MemberRepository\n{\n    private EFDbContext Context = new EFDbContext();\n\n    public IQueryable&lt;Member&gt; Members\n    {\n        get { return Context.Members; }\n    }\n}</code></pre>\n<p>Standard practice is to use an interface, and obtain this concrete class using an IOC container, but it will do for demonstration purposes.</p>\n<p>Due to lazy loading, nothing would happen until we actually run a query. So finally, a console application to instantiate the repository, and display the data:</p>\n<pre class=\"language-text\"><code class=\"language-text\">class ConsoleApplication\n{\n    static void Main(string[] args)\n    {\n        MemberRepository Repository = new MemberRepository();\n\n        Repository.Members.ToList().ForEach(m =&gt; Console.WriteLine(String.Format(&quot;Member: {0} {1}&quot;, m.FirstName, m.LastName)));\n\n        Console.ReadKey();\n    }\n}</code></pre>\n<p>We can place all of the code into one console application. Install EF4.1, create a console application in Visual Studio 2010, paste in the class below. You may have to set the startup object in the project properties.</p>\n<pre class=\"language-text\"><code class=\"language-text\">using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Text;\nusing System.Data.Entity;\n\nnamespace EFExample\n{\n    class Member\n    {\n        public int Id { get; set; }\n        public string FirstName { get; set; }\n        public string LastName { get; set; }\n    }\n\n    class EFDbContext : DbContext\n    {\n        public DbSet&lt;Member&gt; Members { get; set; }\n\n        public EFDbContext()\n        {\n            Database.SetInitializer&lt;EFDbContext&gt;(new DbContextInitializer());\n        }\n    }\n\n    class DbContextInitializer : DropCreateDatabaseIfModelChanges&lt;EFDbContext&gt;\n    {\n        protected override void Seed(EFDbContext Context)\n        {\n            new List&lt;Member&gt;\n            {\n                new Member {\n                    FirstName = &quot;Andrew&quot;,\n                    LastName = &quot;Rowland&quot;\n                },\n                new Member {\n                    FirstName = &quot;Roland&quot;,\n                    LastName = &quot;Browning&quot;\n                },\n            }.ForEach(m =&gt; Context.Members.Add(m));\n\n            base.Seed(Context);\n        }\n    }\n\n    class MemberRepository\n    {\n        private EFDbContext Context = new EFDbContext();\n\n        public IQueryable&lt;Member&gt; Members\n        {\n            get { return Context.Members; }\n        }\n    }\n\n    class ConsoleApplication\n    {\n        static void Main(string[] args)\n        {\n            MemberRepository Repository = new MemberRepository();\n\n            Repository.Members.ToList().ForEach(m =&gt; Console.WriteLine(String.Format(&quot;Member: {0} {1}&quot;, m.FirstName, m.LastName)));\n\n            Console.ReadKey();\n        }\n    }\n}</code></pre>\n<p>Run the application, and the magic begins. If you have an instance of SQL Server Express running, a database with a single Members table will be created, populated with data, and the results displayed.</p>\n<p>Bit of a quick post this one, so feel free to ask a question. I’m not certain I’ve added enough detail.</p>\n"}},{"node":{"title":"W3C validation of ASP.Net output","path":"/w3-c-validation-of-asp-net-output/","date":"25. July 2009","timeToRead":1,"description":"A while ago I had to make certain that a CMS driven site built in .Net met some validation criteria. Specifically the XHTML markup. Running it by the W3C validator service, the markup always failed.","content":"<p>A while ago I had to make certain that a CMS driven site built in .Net met some validation criteria. Specifically the XHTML markup. Running it by the <a href=\"https://validator.w3.org/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">W3C validator service</a>, the markup always failed.</p>\n<p>I fixed the obvious within the <strong>web.config</strong>. For example, the following is needed to force the application to render XHTML:</p>\n<pre class=\"language-text\"><code class=\"language-text\">&lt;configuration&gt;\n    ...\n    &lt;system.web&gt;\n        ...\n        &lt;xhtmlConformance mode=&quot;Strict&quot; /&gt;\n        ...\n    &lt;/system.web&gt;\n    ...\n&lt;/configuration&gt;</code></pre>\n<p>If I painfully cut and pasted the HTML into the Validatorâ€™s form field, it passed. The problem is, is that the service is not recognised by the Web server, and so a helper file in the application is required.</p>\n<p>In your web root, create a App_Browsers directory. Within this directory create a file called w3c.browser. Paste the following contents into the file:</p>\n<pre class=\"language-text\"><code class=\"language-text\">&lt;browsers&gt;\n    &lt;browser id=&quot;W3C_Validator&quot; parentID=&quot;default&quot;&gt;\n        &lt;identification&gt;\n            &lt;userAgent match=&quot;^W3C_Validator&quot; /&gt;\n        &lt;/identification&gt;\n        &lt;capabilities&gt;\n            &lt;capability name=&quot;browser&quot; value=&quot;W3C Validator&quot; /&gt;\n            &lt;capability name=&quot;ecmaScriptVersion&quot; value=&quot;1.2&quot; /&gt;\n            &lt;capability name=&quot;javascript&quot; value=&quot;true&quot; /&gt;\n            &lt;capability name=&quot;supportsCss&quot; value=&quot;true&quot; /&gt;\n            &lt;capability name=&quot;tables&quot; value=&quot;true&quot; /&gt;\n            &lt;capability name=&quot;tagWriter&quot; value=&quot;System.Web.UI.HtmlTextWriter&quot; /&gt;\n            &lt;capability name=&quot;w3cdomversion&quot; value=&quot;1.0&quot; /&gt;\n        &lt;/capabilities&gt;\n    &lt;/browser&gt;\n&lt;/browsers&gt;</code></pre>\n<p>You should now be able to pass the page by URL:</p>\n<p><a href=\"http://validator.w3.org/check?uri=http%3A%2F%2Fwww.andrewrowland.com\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">http://validator.w3.org/check?uri=http%3A%2F%2Fwww.andrewrowland.com</a></p>\n"}},{"node":{"title":"Validation groups in .Net","path":"/validation-groups-in-net/","date":"24. August 2008","timeToRead":1,"description":"Evening all. Not posted in a while as I've plenty going on in the 'real' world. Anyway, last week I was building a search form whereby you could either search by reference code, or by using full search criteria.","content":"<p>Evening all. Not posted in a while as I've plenty going on in the 'real' world. Anyway, last week I was building a search form whereby you could either search by reference code, or by using full search criteria.</p>\n<p>The problem I had is that both search 'forms' existed on one Web Form, and I was using Validation controls to check each. So when using either submit button, both search groups were validated together. Not useful when I wanted to submit each set of controls independently of each other. So there I was, coding to disable either set of validation controls when a submit button is clicked.</p>\n<p>Validation groups I hear you cry. Yes, I know that now.</p>\n<p>Add the ValidationGroup attribute to all controls, so you can group them together, and submit them separately from other groups. Example:</p>\n<pre class=\"language-text\"><code class=\"language-text\">&lt;form id=&quot;form1&quot; runat=&quot;server&quot;&gt;\n\n&lt;p&gt;\n    &lt;asp:TextBox Id=&quot;TextBox1&quot; Runat=&quot;server&quot; ValidationGroup=&quot;First&quot; /&gt;\n    &lt;asp:TextBox Id=&quot;TextBox2&quot; Runat=&quot;server&quot; ValidationGroup=&quot;First&quot; /&gt;\n    &lt;asp:RequiredFieldValidator Id=&quot;RequiredFieldValidator1&quot; Runat=&quot;server&quot; ValidationGroup=&quot;First&quot; ErrorMessage=&quot;TextBox1 should not be blank&quot; ControlToValidate=&quot;TextBox1&quot; /&gt;\n\n    &lt;asp:Button ID=&quot;Submit1&quot; Runat=&quot;server&quot; ValidationGroup=&quot;First&quot; Text=&quot;Submit 1&quot; /&gt;\n&lt;/p&gt;\n\n&lt;p&gt;\n    &lt;asp:TextBox Id=&quot;TextBox3&quot; Runat=&quot;server&quot; ValidationGroup=&quot;Second&quot; /&gt;\n    &lt;asp:TextBox Id=&quot;TextBox4&quot; Runat=&quot;server&quot; ValidationGroup=&quot;Second&quot; /&gt;\n    &lt;asp:RequiredFieldValidator Id=&quot;RequiredFieldValidator2&quot; Runat=&quot;server&quot; ErrorMessage=&quot; TextBox3 should not be blank&quot; ControlToValidate=&quot;TextBox3&quot; ValidationGroup=&quot;Second&quot; /&gt;\n\n    &lt;asp:Button Id=&quot;Submit2&quot; Runat=&quot;server&quot; ValidationGroup=&quot;Second&quot; Text=&quot;Submit 2&quot; /&gt;\n&lt;/p&gt;\n\n&lt;/form&gt;</code></pre>\n<p>Aye, easy when you know. Googling is a wonderful thing.</p>\n"}},{"node":{"title":"jQuery UI Date Picker control issue with .Net","path":"/j-query-ui-date-picker-control-issue-with-net/","date":"11. June 2008","timeToRead":5,"description":"Aye, I do whitter on about jQuery. It's ace. The newly released jQuery UI is pretty special too. One of the many great widgets is the Date Picker control.","content":"<p>Aye, I do whitter on about <a href=\"https://jquery.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">jQuery</a>. It's ace. The newly released <a href=\"https://jqueryui.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">jQuery UI</a> is pretty special too. One of the many great widgets is the Date Picker control.</p>\n<p>I build many .net applications that require date entry, so I implement the Date Picker control often. Unfortunately, there is a problem when it is used on a field that is validated using a .Net validation control. Upon clicking on a date, I get the following error:</p>\n<pre class=\"language-text\"><code class=\"language-text\">length is null or not an object</code></pre>\n<p>This only occurs when using Internet Explorer. Currently, my only solution is to edit the source code. Locate the following code in <strong>jquery-ui.js</strong> or <strong>ui.datepicker.js</strong>:</p>\n<pre class=\"language-text\"><code class=\"language-text\">inst.input.trigger(&#39;change&#39;)</code></pre>\n<p>Replace it with:</p>\n<pre class=\"language-text\"><code class=\"language-text\">if (!$.browser.msie){inst.input.trigger(&#39;change&#39;)}</code></pre>\n<p>This prevents the change event firing in IE.</p>\n<p>I wouldn't normally advocate changing source code in this manner, as it makes future upgrades tedious. Hopefully it will be addressed in a future release.</p>\n<h2 id=\"24-thoughts-on-jquery-ui-date-picker-control-issue-with-net\"><a href=\"#24-thoughts-on-jquery-ui-date-picker-control-issue-with-net\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>24 thoughts on “jQuery UI Date Picker control issue with .Net”</h2>\n<h3 id=\"pawan-kumar\"><a href=\"#pawan-kumar\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>pawan Kumar</h3>\n<p><em>August 12, 2008 at 5:34 pm</em></p>\n<p>Thanks Andrew, your code snipped helped me alot. I was heading nowhere but you really solved the problem..thanks again..:)</p>\n<hr>\n<h3 id=\"ali-from-istanbul\"><a href=\"#ali-from-istanbul\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Ali from Istanbul</h3>\n<p><em>October 26, 2008 at 4:11 pm</em></p>\n<p>Thanks for the solution. You saved my night.</p>\n<hr>\n<h3 id=\"robin\"><a href=\"#robin\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Robin</h3>\n<p><em>November 26, 2008 at 6:52 am</em></p>\n<p>This issue was a real deal breaker for my project, thanks for this you are my Batman.</p>\n<hr>\n<h3 id=\"anil-chitatil\"><a href=\"#anil-chitatil\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Anil Chitatil</h3>\n<p><em>June 3, 2009 at 4:14 pm</em></p>\n<p>wow fine and Nice article, You help me alot. Thanx for this article</p>\n<hr>\n<h3 id=\"nalin-djayasuriya\"><a href=\"#nalin-djayasuriya\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Nalin D.Jayasuriya</h3>\n<p><em>June 24, 2009 at 5:19 pm</em></p>\n<p>In version 1.7.2 of Datepicker, the text to search and replace is different:</p>\n<p>The new text to search for is:</p>\n<pre class=\"language-text\"><code class=\"language-text\">inst.input.trigger(“change”)</code></pre>\n<p>Thanks for your solution!</p>\n<hr>\n<h3 id=\"andy\"><a href=\"#andy\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Andy</h3>\n<p><em>June 24, 2009 at 6:29 pm</em></p>\n<p>I’ve updated the article. Thanks for taking the time to let me know.</p>\n<hr>\n<h3 id=\"achutha-krishnan\"><a href=\"#achutha-krishnan\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Achutha Krishnan</h3>\n<p><em>July 2, 2009 at 7:47 am</em></p>\n<p>Thanks buddy, it was really a good solution. But what is the cause of the error? I used it and got this error only on a particular scenario. If you are familiar with ASP.NET, I got this error while using RequiredFieldValidator control. When I modified the script, it didn’t appear again?</p>\n<hr>\n<h3 id=\"andy-1\"><a href=\"#andy-1\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Andy</h3>\n<p><em>July 2, 2009 at 7:56 am</em></p>\n<p>Indeed the error ocurred when I used the RequiredFieldValidator control as well. I can’t remember why though, as it was some time ago.</p>\n<p>I’m a fairly pragamatic developer, and so I don’t worry about these things once it’s fixed!</p>\n<hr>\n<h3 id=\"praveen-battula\"><a href=\"#praveen-battula\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Praveen Battula</h3>\n<p><em>September 16, 2009 at 7:01 am</em></p>\n<p>See solution for it here.\n<a href=\"http://praveenbattula.blogspot.com/2009/09/jquery-datepicker-problem-on-date.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">http://praveenbattula.blogspot.com/2009/09/jquery-datepicker-problem-on-date.html</a></p>\n<hr>\n<h3 id=\"praveen-battula-1\"><a href=\"#praveen-battula-1\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Praveen Battula</h3>\n<p><em>September 16, 2009 at 7:02 am</em></p>\n<p>I mean instead of changing the code of the JQuery javascript file, you can override it in your code in my solution.</p>\n<hr>\n<h3 id=\"jrummell\"><a href=\"#jrummell\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>jrummell</h3>\n<p><em>November 11, 2009 at 6:15 pm</em></p>\n<p>What if you have TextChanged event on the TextBox and need it fire when the date is selected? Disabling .change() for IE means that the postback won’t happen and the TextChanged handler won’t execute.</p>\n<hr>\n<h3 id=\"euan-ritchie\"><a href=\"#euan-ritchie\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Euan Ritchie</h3>\n<p><em>December 30, 2009 at 8:43 am</em></p>\n<p>This problem is caused by jQuery raising a Change event on the Input control that is handled by the ASP Net Validation WebResource client code, in which the event object supplies the Datepickers ‘Done’ button as the srcElement.</p>\n<p>This causes the ASP Net function ValidatorOnChange (when in IE) to mis-identify the element on which the Change event is raised and creates a null reference error due to it not gracefully handling a failure to connect the Datepickers ‘Done’ button to any Validator.</p>\n<p>My solution to this is to store a reference to the ValidatorOnChange function, override it with an empty function then bind the input controls onchange event to a call to the stored reference.</p>\n<p>This removes the error, completes the onchange event (thus allowing the validators to perform their function), and permits the asp net webresource code to be changed in framework updates without breaking applications (I’m hoping).</p>\n<p>It should also be applicable to all plugins that experience similar issues, and not just DatePicker.</p>\n<p>This is an example of my method:</p>\n<pre class=\"language-text\"><code class=\"language-text\">// Execute on Document ready…\n$(function() {\n\n    // Correct for IE problem with ASP Net Validators\n    // Store reference to function with problem, and over-ride it with an empty function\n    WebResource_ValidatorOnChange = ValidatorOnChange;\n    ValidatorOnChange = function(event) { }\n\n    // Initialise date and time picker\n    $(‘#&lt;%= Control.ClientID %&gt;‘).datepicker({\n        configuration:options\n    });\n\n    // Bind call to Validation code to change event of Control\n    $(‘#&lt;%= Control.ClientID %&gt;‘).bind(“change”, function(event) {\n        WebResource_ValidatorOnChange(event);\n    });\n\n});</code></pre>\n<hr>\n<h3 id=\"euan-ritchie-1\"><a href=\"#euan-ritchie-1\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Euan Ritchie</h3>\n<p><em>December 30, 2009 at 8:45 am</em></p>\n<p>I ought point out that my solution obviously requires one to bind every control on the page that needs the onchange event for it’s validators.</p>\n<p>It also seems unneccesary if you can use the empty onselect function that is a suggested solution.</p>\n<p>But it turns out that if you use a CustomValidator that uses a server side handler for validation that the onselect function method fails, which is why I use my slightly convuluted technique to provide client side validation in concert with jquery hi datepicker.</p>\n<hr>\n<h3 id=\"muhammad-usman\"><a href=\"#muhammad-usman\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Muhammad Usman</h3>\n<p><em>January 28, 2010 at 4:16 am</em></p>\n<p>Great work sir.</p>\n<hr>\n<h3 id=\"zack-l\"><a href=\"#zack-l\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Zack L</h3>\n<p><em>January 28, 2010 at 4:17 am</em></p>\n<p>Trouble I have with this solution is that I’m using the Google CDN to deliver the jQuery js files to the client so I don’t have the option of modifying the file. The only solution was to get rid of the RequiredFieldValidator and stick with the CustomValidator I’m using to validate the date on the server side.</p>\n<hr>\n<h3 id=\"nitin\"><a href=\"#nitin\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Nitin</h3>\n<p><em>April 10, 2010 at 4:11 am</em></p>\n<p>We can also work around this by setting client script to false for the validation control.</p>\n<hr>\n<h3 id=\"praveen-battula-2\"><a href=\"#praveen-battula-2\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Praveen Battula</h3>\n<p><em>April 10, 2010 at 4:11 am</em></p>\n<p>If the issue is because of the validator then here is the solution for it.\n<a href=\"http://praveenbattula.blogspot.com/2009/09/jquery-datepicker-problem-on-date.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">http://praveenbattula.blogspot.com/2009/09/jquery-datepicker-problem-on-date.html</a></p>\n<hr>\n<h3 id=\"kathy-wu\"><a href=\"#kathy-wu\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Kathy Wu</h3>\n<p><em>July 21, 2010 at 5:41 pm</em></p>\n<p>Thanks a lot, it resolved my error.</p>\n<hr>\n<h3 id=\"sandeep\"><a href=\"#sandeep\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>sandeep</h3>\n<p><em>January 3, 2011 at 1:00 pm</em></p>\n<p>Thank You very much Andrew</p>\n<hr>\n<h3 id=\"anonymous\"><a href=\"#anonymous\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Anonymous</h3>\n<p><em>May 31, 2011 at 10:06 am</em></p>\n<p>Thanks It really helpful buddy, Saved my lot of time of debugging.</p>\n<hr>\n<h3 id=\"mubeen\"><a href=\"#mubeen\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Mubeen</h3>\n<p><em>August 3, 2011 at 6:05 pm</em></p>\n<p>Andrew you saved me a lot of grief!</p>\n<hr>\n<h3 id=\"gangireddy-sathi\"><a href=\"#gangireddy-sathi\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Gangireddy Sathi</h3>\n<p><em>August 18, 2011 at 11:57 pm</em></p>\n<p>Thank you Andrew…</p>\n<hr>\n<h3 id=\"hollman-ladino-paredes\"><a href=\"#hollman-ladino-paredes\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Hollman Ladino Paredes</h3>\n<p><em>February 7, 2013 at 4:13 pm</em></p>\n<p>Hola Andrew.</p>\n<p>Tu solucion me di luz al final del camino. El cambio lo hice en el fuente jquery-ui-timepicker-addon.js linea (815), reemplac <code class=\"language-text\">this.$input.trigger(“change”);</code> por <code class=\"language-text\">if (!$.browser.msie) { this.$input.trigger(“change”); }</code></p>\n<p>Muchas gracias por tu aporte y muchos xitos.</p>\n<hr>\n<h3 id=\"andy-r\"><a href=\"#andy-r\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Andy R</h3>\n<p><em>February 7, 2013 at 4:32 pm</em></p>\n<p>No hay problema, mi amigo!</p>\n<hr>\n"}},{"node":{"title":"Using jQuery selectors to reference .Net controls","path":"/using-j-query-selectors-to-reference-net-controls/","date":"4. June 2008","timeToRead":1,"description":"","content":"<p>You place a control onto your page:</p>\n<pre class=\"language-text\"><code class=\"language-text\">&lt;asp:Content ID=&quot;Content1&quot; ContentPlaceHolderID=&quot;Content&quot; Runat=&quot;Server&quot;&gt;\n    &lt;asp:TextBox Id=&quot;Firstname&quot; Runat=&quot;Server&quot; /&gt;\n&lt;/asp:Content&gt;</code></pre>\n<p>The output is rendered as:</p>\n<pre class=\"language-text\"><code class=\"language-text\">&lt;input name=&quot;ctl00$Content$FirstName&quot; type=&quot;text&quot; id=&quot;ctl00_Content_FirstName&quot; /&gt;</code></pre>\n<p>In the example above, the disparity in the rendered id attribute occurs because the TextBox control has been placed within a Content control, as the Page object inherits a MasterPage.</p>\n<p>So how can you robustly reference the control using client-side JavaScript, regardless where the control resides?Â  Using jQuery it's fairly trivial:</p>\n<pre class=\"language-text\"><code class=\"language-text\">var $firstname = $(&quot;[id$=FirstName]&quot;);</code></pre>\n<p>This little snippet makes use of the jQuery attributeEndsWith selector, as documented <a href=\"https://jquery.com/#attributevalue\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">here</a>.Â  Bare in mind that an array is returned, as any control with an id that ends in FirstName will be selected.</p>\n<h2 id=\"one-thought-on-using-jquery-selectors-to-reference-net-controls\"><a href=\"#one-thought-on-using-jquery-selectors-to-reference-net-controls\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>One thought on “Using jQuery selectors to reference .Net controls”</h2>\n<h3 id=\"adam\"><a href=\"#adam\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Adam</h3>\n<p><em>January 3, 2011 at 1:06 pm</em></p>\n<p>Use could use inline tags to place the ClientID.</p>\n<pre class=\"language-text\"><code class=\"language-text\">var $firstname = $[“#&lt;%= Firstname.ClientID %&gt;”]);</code></pre>\n<p>This would insert the ClientID into your javascript code block and help find the control on the page.</p>\n<hr>\n"}},{"node":{"title":"Consume .Net Web service using jQuery","path":"/consume-net-web-service-using-j-query/","date":"29. April 2008","timeToRead":7,"description":"The JavaScript functionality that is injected into .Net pages seems limited when compared to jQuery.\nWhilst looking for a way to use jQuery instead of the stock Microsoft client library, I came across an excellent article.","content":"<p>The JavaScript functionality that is injected into .Net pages seems limited when compared to jQuery.</p>\n<p>Whilst looking for a way to use jQuery instead of the stock Microsoft client library, I came across this <a href=\"http://encosia.com/2008/03/27/using-jquery-to-consume-aspnet-json-web-services/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">excellent article</a>.</p>\n<p>There doesn 't seem to be too much on Web about this subject. Maybe most .Net developers stick to Microsoft tools, but I like using jQuery for all my client scripting, and would rather not use more than one library. So as it look me a while to get example code working, I 've included my efforts.</p>\n<p>Below is a simple .Net Web service. Once again, I 've used continents and countries as my simple dataset. Pass a continent to the service, and it will return an array of countries.</p>\n<pre class=\"language-text\"><code class=\"language-text\">&lt;%@ webservice Language=&quot;C#&quot; class=&quot;AndrewRowland.Continents&quot; %&gt;\n\nusing System;\nusing System.Web.Script.Services;\nusing System.Web.Services;\nusing System.Collections;\nusing System.Collections.Specialized;\n\nnamespace AndrewRowland\n{\n    [ScriptService]\n    [WebService(Namespace = &quot;AndrewRowland&quot;)]\n    [WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]\n    public class Continents\n    {\n        [WebMethod(Description=&quot;Returns array of countries for a given continent.&quot;)]\n        [ScriptMethod(ResponseFormat = ResponseFormat.Json)]\n        public string[] GetCountries(string continent)\n        {\n            Hashtable ht = new Hashtable();\n\n            ht.Add(&quot;Europe&quot;, new string[] {&quot;UK&quot;, &quot;France&quot;, &quot;Germany&quot;});\n            ht.Add(&quot;Africa&quot;, new string[] {&quot;South Africa&quot;, &quot;Zimbabwe&quot;, &quot;Cameroon&quot;});\n            ht.Add(&quot;North America&quot;, new string[] {&quot;USA&quot;, &quot;Canada&quot;});\n\n            return (string[]) ht[continent];\n        }\n    }\n}</code></pre>\n<p>Note the response format, which is JSON. Originally, I omitted this, and serialized the data as a JSON string using the .Net JavaScriptSerializer class, before returning it.</p>\n<p>This resulted in the client having to evaluate the returned string to build an array. By returning an array, the JSON object is instantly available in our client code, without any jiggery-pokery.</p>\n<p>To enable the client to call the Web service, I had to add following in my web.config file under the system.web section:</p>\n<pre class=\"language-text\"><code class=\"language-text\">&lt;webServices&gt;\n    &lt;protocols&gt;\n        &lt;add name=&quot;HttpPost&quot;/&gt;\n    &lt;/protocols&gt;\n&lt;/webServices&gt;</code></pre>\n<p>Sample client code that calls the .Net Web service:</p>\n<pre class=\"language-text\"><code class=\"language-text\">&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;World example&lt;/title&gt;\n    &lt;script type=&quot;text/javascript&quot; src=&quot;/path/to/jquery.js&quot;&gt;&lt;/script&gt;\n    &lt;script type=&quot;text/javascript&quot;&gt;\n    $(document).ready(function() {\n        $(&#39;#submit&#39;).click(function() {\n            $.ajax({\n                type: &quot;POST&quot;,\n                data: &#39;{continent: &quot;&#39; + $(&#39;#txtContinent&#39;).val() + &#39;&quot;}&#39;,\n                url: &quot;/services/example.asmx/GetCountries&quot;,\n                contentType: &quot;application/json; charset=utf-8&quot;,\n                dataType: &quot;json&quot;,\n                success: function(response) {\n                    var data = (typeof response.d) == &#39;string&#39; ? eval(&#39;(&#39; + response.d + &#39;)&#39;) : response.d;\n\n                    $(&#39;#result&#39;).empty().append(&#39;&lt;table border=1&gt;&lt;thead&gt;&lt;tr&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;/tbody&gt;&lt;/table&gt;&#39;);\n\n                    $(&#39;&lt;th/&gt;&#39;).text($(&#39;#txtContinent&#39;).val()).appendTo(&#39;#result thead tr&#39;);\n\n                    for (var i = 0; i &lt; data.length; i ++) {\n                        $(&#39;&lt;tr/&gt;&#39;).append($(&#39;&lt;td/&gt;&#39;).text(data[i])).appendTo(&#39;#result tbody&#39;);\n                    }\n                },\n                failure: function(msg) {\n                    $(&#39;#result&#39;).empty().append(msg);\n                }\n            });\n        });\n    });\n    &lt;/script&gt;\n&lt;/head&gt;\n&lt;body&gt;\n\n&lt;p&gt;&lt;label for=&quot;txtContinent&quot;&gt;Continent&lt;/label&gt;&lt;br /&gt;\n&lt;input type=&quot;text&quot; id=&quot;txtContinent&quot; /&gt; &lt;input id=&quot;submit&quot; type=&quot;button&quot; value=&quot;Submit&quot; /&gt;&lt;/p&gt;\n\n&lt;div id=&quot;result&quot;&gt;&lt;/div&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;</code></pre>\n<p>Note line 15:</p>\n<pre class=\"language-text\"><code class=\"language-text\">var data = (typeof response) == &#39;string&#39; ? eval(&#39;(&#39; + response + &#39;)&#39;) : response;</code></pre>\n<p>I added this line so that the data object is correctly evaluated if a serialized JSON string is returned.</p>\n<p>There you have it, avoid the Microsoft code bloat, with not a ScriptManager tag in sight.</p>\n<h2 id=\"25-thoughts-on-consume-net-web-service-using-jquery\"><a href=\"#25-thoughts-on-consume-net-web-service-using-jquery\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>25 thoughts on “Consume .Net Web service using jQuery”</h2>\n<h3 id=\"andy\"><a href=\"#andy\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Andy</h3>\n<p><em>August 12, 2008 at 5:34 pm</em></p>\n<p>If you look at line 10 in the HTML example above, the data key of the AJAX request contains a serialised JSON object. I’ve manually serialised the parameters to be sent to the Web service. If your object is more complex, use a JSON stringifier.</p>\n<p>The example Web service I’ve provided takes this very simple JSON object to obtain the parameter continent. It then returns a list of countries.</p>\n<p>Hope this helps.</p>\n<hr>\n<h3 id=\"andy-1\"><a href=\"#andy-1\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Andy</h3>\n<p><em>August 12, 2008 at 5:34 pm</em></p>\n<p>Indeed, and it appears many people are heading in this direction. Thanks very much for posting the first comment.</p>\n<hr>\n<h3 id=\"govind\"><a href=\"#govind\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Govind</h3>\n<p><em>August 12, 2008 at 5:34 pm</em></p>\n<p>+1. Beautiful, I too love jquery and moved away from the scriptmanager/updatepanel/proxy stuff. It was way too clunky.</p>\n<hr>\n<h3 id=\"zbrong\"><a href=\"#zbrong\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>zbrong</h3>\n<p><em>August 12, 2008 at 5:34 pm</em></p>\n<p>good article, thanks</p>\n<p>would you show us how to post a json object to web service and how the service consume the json object, best is sample</p>\n<p>thanks</p>\n<hr>\n<h3 id=\"david\"><a href=\"#david\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>david</h3>\n<p><em>September 11, 2008 at 7:01 am</em></p>\n<p>Hello,</p>\n<p>I am using .net 2.0 with c# and I am stuggling to get any of these exemples working. Could you please send a .net zipped up proj or solutio please</p>\n<hr>\n<h3 id=\"paul\"><a href=\"#paul\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>paul</h3>\n<p><em>September 15, 2008 at 9:46 am</em></p>\n<p>I’m also using .net 2 with C# and would appreciate the revised solution. Thanks in advance.</p>\n<hr>\n<h3 id=\"andy-2\"><a href=\"#andy-2\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Andy</h3>\n<p><em>September 15, 2008 at 9:46 am</em></p>\n<p>Seems to be a fair amount of interest in this post. As you can see, I’m stuggling to find the time to update this blog more regularly.</p>\n<p>I’ll try to come up with a basic site, and post it here some time this week. I don’t use Visual Studio, so I can’t create a project.</p>\n<p>Thanks gents.</p>\n<hr>\n<h3 id=\"andy-3\"><a href=\"#andy-3\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Andy</h3>\n<p><em>September 26, 2008 at 8:46 pm</em></p>\n<p>Sorry for the delay. I installed Visual Studio 2008 Express, and created this project.</p>\n<p>Hope this helps.</p>\n<hr>\n<h3 id=\"fawad-hassan\"><a href=\"#fawad-hassan\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Fawad Hassan</h3>\n<p><em>March 14, 2009 at 3:27 pm</em></p>\n<p>nice article!</p>\n<p>thanks</p>\n<p>Now I shall try it myself...</p>\n<hr>\n<h3 id=\"yoav\"><a href=\"#yoav\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Yoav</h3>\n<p><em>August 20, 2009 at 4:13 pm</em></p>\n<p>Hi there,</p>\n<p>if you’re interested in creating a more object oriented proxy for a webservice using jQuery check out my article on:</p>\n<p><a href=\"http://yoavniran.wordpress.com/2009/08/02/creating-a-webservice-proxy-with-jquery/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">http://yoavniran.wordpress.com/2009/08/02/creating-a-webservice-proxy-with-jquery/</a></p>\n<hr>\n<h3 id=\"andy-4\"><a href=\"#andy-4\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Andy</h3>\n<p><em>August 20, 2009 at 4:17 pm</em></p>\n<p>Good stuff Yoav. I’m sure your article will be useful to others as well.</p>\n<hr>\n<h3 id=\"dacoder\"><a href=\"#dacoder\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>DaCoder</h3>\n<p><em>November 2, 2009 at 4:32 pm</em></p>\n<p>HI</p>\n<p>I am trying to use FullCalendar to display events but I am having trouble trying to get the right json array returned.</p>\n<p>Heres my server side code</p>\n<pre class=\"language-text\"><code class=\"language-text\">public string[][] GetEventsForDate(string currentDate)\n{\n    Hashtable ht = new Hashtable();\n\n    string[][] jaggedArray1 =\n    {\n        new string[] {“1″,”Meeting One”,”2009-10-30T08:15:00.000+10:00″,”2009-10-30T10:15:00.000+10:00″},\n        new string[] {“2″,”Meeting Two”,”2009-10-30T12:15:00.000+10:00″,”2009-10-30T13:15:00.000+10:00″},\n        new string[] {“3″,”Meeting Three”,”2009-10-30T02:15:00.000+10:00″,”2009-10-30T03:15:00.000+10:00″}\n    };\n\n    return jaggedArray1;\n}</code></pre>\n<p>Any ideas?</p>\n<hr>\n<h3 id=\"dacoder-1\"><a href=\"#dacoder-1\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>DaCoder</h3>\n<p><em>November 4, 2009 at 4:17 am</em></p>\n<p>Hi</p>\n<p>I was able to figure out a way to integrate the FullCalendar with ASP.Net, heres the link to a write up I did</p>\n<p><a href=\"http://www.101webdesigns.com/index.php/2009/11/03/jquery-calendar-in-asp-net/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">http://www.101webdesigns.com/index.php/2009/11/03/jquery-calendar-in-asp-net/</a></p>\n<p>Hope someone finds it useful</p>\n<hr>\n<h3 id=\"kenny-evitt\"><a href=\"#kenny-evitt\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Kenny Evitt</h3>\n<p><em>May 14, 2010 at 4:51 am</em></p>\n<p>Excellent example!</p>\n<hr>\n<h3 id=\"prabu\"><a href=\"#prabu\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Prabu</h3>\n<p><em>May 14, 2010 at 4:51 am</em></p>\n<p>Hi.</p>\n<p>I am wondering if this works from a static html page outside of the webservice project?</p>\n<hr>\n<h3 id=\"rupesh\"><a href=\"#rupesh\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Rupesh</h3>\n<p><em>May 14, 2010 at 4:56 am</em></p>\n<p>Hi am using Webservice as a different project and when i add a webreference of this in my project. then jquery call does not works. if the asmx file is in the same webapplication project then it works fine. Is there any way to cosume the webservice’s webmethod by puting the web reference of weservice.</p>\n<hr>\n<h3 id=\"andy-5\"><a href=\"#andy-5\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Andy</h3>\n<p><em>May 14, 2010 at 4:57 am</em></p>\n<p>No reason why not. In your AJAX call, you will have to use the full URL if the service is running on different domain. Other than that consideration, it should not be a problem.</p>\n<hr>\n<h3 id=\"jake\"><a href=\"#jake\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Jake</h3>\n<p><em>July 21, 2010 at 5:41 pm</em></p>\n<p>Here is an example of how to get FullCalendar working in VB.NET using a webservice. <a href=\"http://jake1164.blogspot.com/2010/06/jquery-fullcalendar-and-aspnet.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">http://jake1164.blogspot.com/2010/06/jquery-fullcalendar-and-aspnet.html</a></p>\n<hr>\n<h3 id=\"michael-mofokeng\"><a href=\"#michael-mofokeng\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Michael Mofokeng</h3>\n<p><em>September 2, 2010 at 8:19 am</em></p>\n<p>Hi There. I’ve re-created the example as a project but its not working from my side. It’is doesn’t return a success or failed message either.</p>\n<hr>\n<h3 id=\"mickey\"><a href=\"#mickey\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Mickey</h3>\n<p><em>January 3, 2011 at 1:00 pm</em></p>\n<p>I have a simple example of how I call a webservice using jquery on my tumblr blog. <a href=\"http://mickeyelliott.tumblr.com/post/1581098755/using-jquery-to-call-a-webservice\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">http://mickeyelliott.tumblr.com/post/1581098755/using-jquery-to-call-a-webservice</a></p>\n<hr>\n<h3 id=\"bhargav\"><a href=\"#bhargav\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Bhargav</h3>\n<p><em>February 8, 2011 at 10:28 am</em></p>\n<p>Really Grt article, helped me a lot. Thank you very much.</p>\n<hr>\n<h3 id=\"vani\"><a href=\"#vani\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>vani</h3>\n<p><em>April 2, 2011 at 12:03 pm</em></p>\n<p>nice</p>\n<hr>\n<h3 id=\"nidhi\"><a href=\"#nidhi\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Nidhi</h3>\n<p><em>April 19, 2011 at 7:18 pm</em></p>\n<p>Is it possible to retrieve the user’s identity (authentication) in the web method?</p>\n<p>I’m also wondering if user roles can be checked in web methods. If someone has some info or links, please share</p>\n<hr>\n<h3 id=\"rajesh143\"><a href=\"#rajesh143\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Rajesh143</h3>\n<p><em>September 6, 2011 at 1:11 pm</em></p>\n<p>Hi Andy , nice post it helped me.</p>\n<p>I created a static HTML page and dumped the html code above in that and my web service works fine, But im facing a problem in the response part i.e in the success\nmethod the response is <code class=\"language-text\">NULL</code>.</p>\n<p>Can you please address my problem ASAP.</p>\n<hr>\n<h3 id=\"ad-guru\"><a href=\"#ad-guru\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>ad guru</h3>\n<p><em>March 13, 2012 at 12:43 am</em></p>\n<p>Great help. Thank you.</p>\n<hr>\n"}}]}}},"context":{}}