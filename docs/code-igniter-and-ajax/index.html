<!DOCTYPE html>
<html data-html-server-rendered="true" lang="en" data-vue-tag="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>CodeIgniter and Ajax - Andrew Rowland</title><meta name="gridsome:hash" content="69c0472a8ba0453388470c19f241c3f399c8311e"><meta data-vue-tag="ssr" charset="utf-8"><meta data-vue-tag="ssr" name="generator" content="Gridsome v0.7.12"><meta data-vue-tag="ssr" data-key="viewport" name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta data-vue-tag="ssr" data-key="format-detection" name="format-detection" content="telephone=no"><meta data-vue-tag="ssr" data-key="description" name="description" content="I only want to help you"><meta data-vue-tag="ssr" name="description" content="I&#x27;ve been asked to create a dashboard for many devices across our network. To display real-time information on each component, I&#x27;m thinking of using Web services, and AJAX. Like most aspects of coding, using a framework to do all the heavy lifting, rather than developing your own, is a sensible approach.
So today I took a look at jQuery, a JavaScript framework. I have to admit, I&#x27;m pretty impressed. It did not take me long to come up with some example code, that degrades well when JavaScript is disabled in the browser."><link data-vue-tag="ssr" rel="icon" href="data:,"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="16x16" href="/assets/static/favicon.ce0531f.ac64c76abcd4710b88c6efd7d6aa8915.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="32x32" href="/assets/static/favicon.ac8d93a.ac64c76abcd4710b88c6efd7d6aa8915.png"><link rel="preload" href="/assets/css/0.styles.62ecc4ed.css" as="style"><link rel="preload" href="/assets/js/app.c118ccac.js" as="script"><link rel="preload" href="/assets/js/page--src-templates-post-vue.64ac9a83.js" as="script"><link rel="prefetch" href="/assets/js/page--src-pages-404-vue.a65c7339.js"><link rel="prefetch" href="/assets/js/page--src-pages-index-vue.d929f4be.js"><link rel="prefetch" href="/assets/js/page--src-templates-redirect-vue.29ebfca3.js"><link rel="prefetch" href="/assets/js/page--src-templates-tag-vue.a9c9f2d5.js"><link rel="stylesheet" href="/assets/css/0.styles.62ecc4ed.css"><noscript data-vue-tag="ssr"><style>.g-image--loading{display:none;}</style></noscript>
  </head>
  <body >
    <script>
      // Add dark / light detection that runs before Vue.js load. Borrowed from overreacted.io
      (function() {
        window.__onThemeChange = function() {};
        function setTheme(newTheme) {
          window.__theme = newTheme;
          preferredTheme = newTheme;
          document.body.setAttribute('data-theme', newTheme);
          window.__onThemeChange(newTheme);
        }

        var preferredTheme;
        try {
          preferredTheme = localStorage.getItem('theme');
        } catch (err) { }

        window.__setPreferredTheme = function(newTheme) {
          setTheme(newTheme);
          try {
            localStorage.setItem('theme', newTheme);
          } catch (err) {}
        }

        var darkQuery = window.matchMedia('(prefers-color-scheme: light)');
        darkQuery.addListener(function(e) {
          window.__setPreferredTheme(e.matches ? 'dark' : 'light')
        });

        setTheme(preferredTheme || (darkQuery.matches ? 'dark' : 'light'));
      })();
    </script>

    <div id="app" data-server-rendered="true"><header class="header"><div class="header__left"><a href="/" class="logo active"><span class="logo__text">
    ‚Üê Andrew Rowland
  </span></a></div><div class="header__right"><button role="button" aria-label="Toggle dark/light" class="toggle-theme"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg></button></div></header><main class="main"><div class="post-title"><h1 class="post-title__text">
      CodeIgniter and Ajax
    </h1><div class="post-meta">
   Posted 27. April 2008.
   <strong>4 min read.</strong></div></div><div class="post content-box"><div class="post__header"><!----></div><div class="post__content"><p>I've been asked to create a dashboard for many devices across our network. To display real-time information on each component, I'm thinking of using Web services, and AJAX. Like most aspects of coding, using a framework to do all the heavy lifting, rather than developing your own, is a sensible approach.</p>
<p>So today I took a look at jQuery, a JavaScript framework. I have to admit, I'm pretty impressed. It did not take me long to come up with some example code, that degrades well when JavaScript is disabled in the browser.</p>
<p>My example app lists continents. Clicking on a continent will return a list of countries in that continent.</p>
<p>Create a CodeIgniter controller and save as <strong>world.php</strong>:</p>
<pre class="language-text"><code class="language-text">&lt;?php
class World extends Controller {

    function World()
    {
        parent::Controller();
    }

    function index($continent = NULL)
    {
        // Set continents data.  In a real application we
        // would obtain this from a database via a model.
        $data[&#39;continents&#39;] = array(
                1 =&gt; &#39;Europe&#39;,
                2 =&gt; &#39;Africa&#39;,
                3 =&gt; &#39;North America&#39;,
            );

        // If a non-Ajax continent selection is made, call the
        // list_countries method, and set countries data.
        if (isset($continent))
        {
            $data[&#39;countries&#39;] = $this-&gt;list_countries($continent);
        }

        // Load world view.
        $this-&gt;load-&gt;view(&#39;world_view&#39;, $data);
    }

    function list_countries($continent)
    {
        // Generated countries data.  As before, this would be
        // obtained from a model.
        $continents = array(
                1 =&gt; array(&#39;UK&#39;, &#39;France&#39;, &#39;Germany&#39;),
                2 =&gt; array(&#39;South Africa&#39;, &#39;Zimbabwe&#39;, &#39;Cameroon&#39;),
                3 =&gt; array(&#39;USA&#39;, &#39;Canada&#39;),
            );

        // Decide whether to return JSON data, or an array,
        // depending if $_POST[&#39;ajax&#39;] is set.
        if (isset($_POST[&#39;ajax&#39;]))
        {
            echo json_encode($continents[$continent]);
        }
        else
        {
            return $continents[$continent];
        }
    }
}
?&gt;</code></pre>
<p>Create a view and save as <strong>world_view.php</strong>:</p>
<pre class="language-text"><code class="language-text">&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;World example&lt;/title&gt;
    &lt;script type=&quot;text/javascript&quot; src=&quot;/jquery.js&quot;&gt;&lt;/script&gt;
    &lt;script type=&quot;text/javascript&quot;&gt;
    function list_countries(id) {
        $(&#39;li &gt; ul&#39;).slideUp(&#39;slow&#39;);

        if ($(&#39;#id_&#39; + id).children(&#39;ul&#39;).length == 0) {
            $.post(&#39;/world/list_countries/&#39; + id, {ajax:&#39;true&#39;},
                function(data){
                    unorderedlist = $(&#39;&lt;ul/&gt;&#39;).css(&#39;display&#39;, &#39;none&#39;);

                    $.each(data, function(i, country){
                        $(&#39;&lt;li/&gt;&#39;).text(country).appendTo(unorderedlist);
                    });

                    unorderedlist.appendTo(&#39;#id_&#39; + id);
                    unorderedlist.slideDown(&#39;slow&#39;);
                }, &#39;json&#39;);
        } else {
            $(&#39;#id_&#39; + id + &#39; &gt; ul&#39;).slideDown(&#39;slow&#39;);
        }

        return false;
    }
    &lt;/script&gt;
&lt;/head&gt;

&lt;body&gt;

&lt;ul&gt;
    &lt;?php foreach($continents as $id =&gt; $name):?&gt;
    &lt;li id=&quot;id_&lt;?=$id;?&gt;&quot;&gt;&lt;a onclick=&quot;return list_countries(&lt;?=$id;?&gt;);&quot; href=&quot;&lt;?=site_url(&quot;/world/index/$id&quot;);?&gt;&quot; title=&quot;Show countries in &lt;?=$name;?&gt;&quot;&gt;&lt;?=$name;?&gt;&lt;/a&gt;
    &lt;?php if ($id == $this-&gt;uri-&gt;segment(3)):?&gt;
    &lt;ul&gt;
        &lt;?php foreach($countries as $country):?&gt;
        &lt;li&gt;&lt;?=$country;?&gt;&lt;/a&gt;&lt;/li&gt;
        &lt;?php endforeach;?&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;?php endif;?&gt;
    &lt;?php endforeach;?&gt;
&lt;/ul&gt;

&lt;/body&gt;
&lt;/html&gt;</code></pre>
<p>I just noticed that my ISP only has PHP4 installed. If this is the case for you, you will have to alter the controller to get this to work. Change the line:</p>
<pre class="language-text"><code class="language-text">&lt;a href=&quot;http://www.php.net/echo&quot;&gt;echo&lt;/a&gt; json_encode($continents[$continent]);</code></pre>
<p>To:</p>
<pre class="language-text"><code class="language-text">&lt;a href=&quot;http://www.php.net/echo&quot;&gt;echo&lt;/a&gt; &#39;[&quot;&#39; . &lt;a href=&quot;http://www.php.net/implode&quot;&gt;implode&lt;/a&gt;(&#39;&quot;,&quot;&#39;, $continents[$continent]) . &#39;&quot;]&#39;;</code></pre>
<p>Obviously this solution does not scale well for more complex data structures. I would advise using a JSON serializer library of some description. You could also create a view for the JSON structures, and pass data to that. This would actually be a sensible approach, as you would have complete control over the output.</p>
<h2 id="12-thoughts-on-codeigniter-and-ajax"><a href="#12-thoughts-on-codeigniter-and-ajax" aria-hidden="true"><span class="icon icon-link"></span></a>12 thoughts on ‚ÄúCodeIgniter and Ajax‚Äù</h2>
<h3 id="anonymous"><a href="#anonymous" aria-hidden="true"><span class="icon icon-link"></span></a>Anonymous</h3>
<p><em>August 12, 2008 at 5:34 pm</em></p>
<p>Incredible, thanks a lot for this‚Ä¶ it is exactly what I was looking for +invisible props.</p>
<hr>
<h3 id="christophe-sautot"><a href="#christophe-sautot" aria-hidden="true"><span class="icon icon-link"></span></a>Christophe Sautot</h3>
<p><em>May 13, 2009 at 4:37 am</em></p>
<p>Thank you for posting this. It was really simple to understand, and straight to the point.</p>
<hr>
<h3 id="jedd"><a href="#jedd" aria-hidden="true"><span class="icon icon-link"></span></a>Jedd</h3>
<p><em>November 6, 2009 at 6:38 pm</em></p>
<p>Looks interesting, and easy to follow. Reading is a bit frustrating on a 22‚Ä≥ monitor, given the code lumps are only showing about a 1/4 to a 1/3 of the width (much left &#x26; right scrolling required). Flippin‚Äô pixel-based stylesheets!</p>
<hr>
<h3 id="ghprod"><a href="#ghprod" aria-hidden="true"><span class="icon icon-link"></span></a>ghprod</h3>
<p><em>December 30, 2009 at 8:45 am</em></p>
<p>wonderful application!</p>
<p>thanks for sharing this ajax!</p>
<hr>
<h3 id="rick"><a href="#rick" aria-hidden="true"><span class="icon icon-link"></span></a>Rick</h3>
<p><em>January 28, 2010 at 4:17 am</em></p>
<p>You have to load the url helper in the controller constructor like so:</p>
<pre class="language-text"><code class="language-text">$this-&gt;load-&gt;helper(‚Äòurl‚Äô); or you will get an undefined function error site url();</code></pre>
<p>Very nice post thanks</p>
<hr>
<h3 id="sudeep"><a href="#sudeep" aria-hidden="true"><span class="icon icon-link"></span></a>sudeep</h3>
<p><em>April 10, 2010 at 4:12 am</em></p>
<p>dear Very very thankxxxxxx</p>
<hr>
<h3 id="heisler"><a href="#heisler" aria-hidden="true"><span class="icon icon-link"></span></a>heisler</h3>
<p><em>August 4, 2010 at 3:29 pm</em></p>
<p>Gracias</p>
<hr>
<h3 id="rayhan"><a href="#rayhan" aria-hidden="true"><span class="icon icon-link"></span></a>Rayhan</h3>
<p><em>January 16, 2011 at 3:20 pm</em></p>
<p>It‚Äôs awesome! thanks a lot</p>
<hr>
<h3 id="triathlon-wetsuit"><a href="#triathlon-wetsuit" aria-hidden="true"><span class="icon icon-link"></span></a>triathlon wetsuit</h3>
<p><em>February 8, 2011 at 10:28 am</em></p>
<p>Awesome!</p>
<hr>
<h3 id="frederik-"><a href="#frederik-" aria-hidden="true"><span class="icon icon-link"></span></a>Frederik .</h3>
<p><em>May 18, 2011 at 8:53 am</em></p>
<p>exactly what is was looking for, thanks !</p>
<hr>
<h3 id="kevin-phillips"><a href="#kevin-phillips" aria-hidden="true"><span class="icon icon-link"></span></a>Kevin Phillips</h3>
<p><em>July 30, 2011 at 9:38 pm</em></p>
<p>As of ci 2 with csrf enabled you also need to add the ci_csrf_token into the post data.</p>
<p>You will need to add jquery.cookie.js
ie:
create a var inside the script</p>
<pre class="language-text"><code class="language-text">var cct = $.cookie(‚Äòci_csrf_token‚Äô);</code></pre>
<p>then at that to the post data</p>
<pre class="language-text"><code class="language-text">{ajax:‚Äôtrue‚Äô, ‚Äòci_csrf_token‚Äô:cct}</code></pre>
<hr>
<h3 id="kevin-phillips-1"><a href="#kevin-phillips-1" aria-hidden="true"><span class="icon icon-link"></span></a>Kevin Phillips</h3>
<p><em>July 30, 2011 at 11:00 pm</em></p>
<p>I‚Äôve made an update of this tutorial for codeigniter2 with csrf enabled
<a href="http://www.kevinphillips.co.nz/news/jquery-axaj-codeigniter-2" target="_blank" rel="nofollow noopener noreferrer">http://www.kevinphillips.co.nz/news/jquery-axaj-codeigniter-2</a></p>
<hr>
</div><div class="post__footer"><div class="post-tags"><a href="/tag/CodeIgniter/" class="post-tags__link"><span>#</span> CodeIgniter
		</a><a href="/tag/JavaScript/" class="post-tags__link"><span>#</span> JavaScript
		</a><a href="/tag/PHP/" class="post-tags__link"><span>#</span> PHP
		</a></div></div></div><div class="post-comments"><div class="comments"></div></div><div class="author post-author"><img alt="Author image" src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 180 180' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-79abe12977319e63670ceacd51dd8a4b'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='5'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-79abe12977319e63670ceacd51dd8a4b)' width='180' height='180' xlink:href='data:image/png%3bbase64%2c/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCABAAEADASIAAhEBAxEB/8QAGwAAAgMBAQEAAAAAAAAAAAAABgcDBAUCAAj/xAA2EAACAQMCBAUCBAMJAAAAAAABAgMABBEFEgYhMUETFCJRYYGRMkJxsRUjQwckUlOSocHh8P/EABoBAAIDAQEAAAAAAAAAAAAAAAMEAgUGAQD/xAAiEQACAgIDAAMAAwAAAAAAAAABAgADBBESITETMkFRUmH/2gAMAwEAAhEDEQA/AK0Gpp3NaMGpxcvWKR68V3I6Qp/qNSpxbddoo/uavzwP7ALYB%2bR8w6pD3kFXodVg/wAYpDWPEep3MgWKKIfJzyogtLe8uWDXVxOT7KxVR9BSeRdVV6Y9jVtd9Vjmi1iAf1BVuPWbYdZBSgNtd2mXinmIx%2bFiSP8AesDUtf1mylCtJHsb8LbP%2b%2btQpau/6mEuU0dsvU%2bh01q2/wAwVMuvWg/qCvmccUay6H%2b8IueWQnSoBrusH8Wo3GfYAUU4v%2bwIyk/rBKKEsnpjYnufDNTrbkc/V9gKopMXX8bL7hTit7gSxsrniexj1CHxoHYqUfmuSDgkVNrAiltb1EUTkwXfsJ%2bDbBXXcycyM02dC0qIwjCBnIoJ/ggs%2bJzbWlzLbWpIYQx4KOh5cs9OnaiTUJNZEiraDytui8goyzcuWc1mb7BY/In2X9G604gTensU2srQ4YdsUvOPrCNdLmfZtKMrAgc%2buDWrqvE/EECmOOO0kgEiQtO6sHBI9RA6EDkP1oY1u%2b1K70uSC6hQO7D%2bbk8hnJPM47UfDYrapncluVTAwQTwWwi5L%2bzEZ/erHlpw%2bFs5Xj6DPpyf1zUwRlRWDAY6kSxjNeW%2b3QSALNKg6%2bE4Uj26jn9K1Psz2tezDjt4nw0YAI7bQR96ns7g2s8UsLL40TB1b5FCFlqTxPi43PH3OeYol0K5OoNMI7Vo4EGQ5Oct7UuuTTYP4kSjodiMnRtcudZ16zlvIoIp1UACEnaBnPPPemv56J7X1Ebscl6/ekrpkvlLvzcrB2ib%2bYoAHowOYpk6XMLiziEZVnUblBOdw%2bcfFZjLTi/XQl5hXc17Pc4vPBigm8zHJI7qGQgct3sR2FDP9oUlv/AUtlIUzsuWRc47mjDiK6tptOeKOwkgutuPFjnYqnzg0s9X1Q39wDbBPBjyqFsnce7f%2b9qYwKi1y78ELmWlaiP0wesNLVAQqM2fzFcCr1rowLEyTMqkcwMYNT%2bcnGAQucflWozqUgk27JmPydo%2b1an5UUdSgCExfaPw1dX6iSQeBD2Zhlj%2bgpkaTYxwaawRRE0C7ACM8uh5fQHPzU6afJGztEq7ipySG6fBB5dv2qNFaORAno3rtdeqnqcN8nlVGAF8k2JaSW8ckURmhZjOhO/aCwIJ5ZPatXh7WBYTvJtZ7V2ICJgNH7deo%2bKpRlUjaOEgq4AZtp6g5OfrgCqF1blpJH2oi4VmELkdu/vzHfpQ7EFg0Z2p2rbawm4s4kgm02ZLWO5FwQUI8NgFz3JpaXV1Laadb4O4lih5de/X61rh5JDcDxnV4xuYE8zyzn9qw%2bIIvN27ywJKu3JTxGyygdj2yftXqKxUdrGbLzaumE9BrLbQuNo6DHLFcX1%2b7gEy%2b4wTQ5FeBgBIeZ/MB/xXE1xzG71D4pv5eoKf/9k=' /%3e%3c/svg%3e" width="180" data-src="/assets/static/author.e6b6009.01fea4a6eb109fed65874b88d6ddc592.png" data-srcset="/assets/static/author.e6b6009.01fea4a6eb109fed65874b88d6ddc592.png 180w" data-sizes="(max-width: 180px) 100vw, 180px" class="author__image g-image g-image--lazy g-image--loading"><noscript><img src="/assets/static/author.e6b6009.01fea4a6eb109fed65874b88d6ddc592.png" class="author__image g-image g-image--loaded" width="180" alt="Author image"></noscript><!----><p class="author__intro">
		I only want to help you...
	</p><p class="author__links"><a href="//www.linkedin.com/in/hashbang/">LinkedIn</a><a href="//twitter.com/andyjrowland">Twitter</a><a href="//github.com/ajrowland">GitHub</a></p></div></main><footer class="footer"><span class="footer__copyright">Copyright ¬© 2019. </span><span class="footer__links"></span></footer></div>
    <script>window.__INITIAL_STATE__={"data":{"post":{"title":"CodeIgniter and Ajax","path":"\u002Fcode-igniter-and-ajax\u002F","date":"27. April 2008","timeToRead":4,"tags":[{"id":"CodeIgniter","title":"CodeIgniter","path":"\u002Ftag\u002FCodeIgniter\u002F"},{"id":"JavaScript","title":"JavaScript","path":"\u002Ftag\u002FJavaScript\u002F"},{"id":"PHP","title":"PHP","path":"\u002Ftag\u002FPHP\u002F"}],"description":"I've been asked to create a dashboard for many devices across our network. To display real-time information on each component, I'm thinking of using Web services, and AJAX. Like most aspects of coding, using a framework to do all the heavy lifting, rather than developing your own, is a sensible approach.\nSo today I took a look at jQuery, a JavaScript framework. I have to admit, I'm pretty impressed. It did not take me long to come up with some example code, that degrades well when JavaScript is disabled in the browser.","content":"\u003Cp\u003EI've been asked to create a dashboard for many devices across our network. To display real-time information on each component, I'm thinking of using Web services, and AJAX. Like most aspects of coding, using a framework to do all the heavy lifting, rather than developing your own, is a sensible approach.\u003C\u002Fp\u003E\n\u003Cp\u003ESo today I took a look at jQuery, a JavaScript framework. I have to admit, I'm pretty impressed. It did not take me long to come up with some example code, that degrades well when JavaScript is disabled in the browser.\u003C\u002Fp\u003E\n\u003Cp\u003EMy example app lists continents. Clicking on a continent will return a list of countries in that continent.\u003C\u002Fp\u003E\n\u003Cp\u003ECreate a CodeIgniter controller and save as \u003Cstrong\u003Eworld.php\u003C\u002Fstrong\u003E:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-text\"\u003E\u003Ccode class=\"language-text\"\u003E&lt;?php\nclass World extends Controller {\n\n    function World()\n    {\n        parent::Controller();\n    }\n\n    function index($continent = NULL)\n    {\n        \u002F\u002F Set continents data.  In a real application we\n        \u002F\u002F would obtain this from a database via a model.\n        $data[&#39;continents&#39;] = array(\n                1 =&gt; &#39;Europe&#39;,\n                2 =&gt; &#39;Africa&#39;,\n                3 =&gt; &#39;North America&#39;,\n            );\n\n        \u002F\u002F If a non-Ajax continent selection is made, call the\n        \u002F\u002F list_countries method, and set countries data.\n        if (isset($continent))\n        {\n            $data[&#39;countries&#39;] = $this-&gt;list_countries($continent);\n        }\n\n        \u002F\u002F Load world view.\n        $this-&gt;load-&gt;view(&#39;world_view&#39;, $data);\n    }\n\n    function list_countries($continent)\n    {\n        \u002F\u002F Generated countries data.  As before, this would be\n        \u002F\u002F obtained from a model.\n        $continents = array(\n                1 =&gt; array(&#39;UK&#39;, &#39;France&#39;, &#39;Germany&#39;),\n                2 =&gt; array(&#39;South Africa&#39;, &#39;Zimbabwe&#39;, &#39;Cameroon&#39;),\n                3 =&gt; array(&#39;USA&#39;, &#39;Canada&#39;),\n            );\n\n        \u002F\u002F Decide whether to return JSON data, or an array,\n        \u002F\u002F depending if $_POST[&#39;ajax&#39;] is set.\n        if (isset($_POST[&#39;ajax&#39;]))\n        {\n            echo json_encode($continents[$continent]);\n        }\n        else\n        {\n            return $continents[$continent];\n        }\n    }\n}\n?&gt;\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003ECreate a view and save as \u003Cstrong\u003Eworld_view.php\u003C\u002Fstrong\u003E:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-text\"\u003E\u003Ccode class=\"language-text\"\u003E&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;World example&lt;\u002Ftitle&gt;\n    &lt;script type=&quot;text\u002Fjavascript&quot; src=&quot;\u002Fjquery.js&quot;&gt;&lt;\u002Fscript&gt;\n    &lt;script type=&quot;text\u002Fjavascript&quot;&gt;\n    function list_countries(id) {\n        $(&#39;li &gt; ul&#39;).slideUp(&#39;slow&#39;);\n\n        if ($(&#39;#id_&#39; + id).children(&#39;ul&#39;).length == 0) {\n            $.post(&#39;\u002Fworld\u002Flist_countries\u002F&#39; + id, {ajax:&#39;true&#39;},\n                function(data){\n                    unorderedlist = $(&#39;&lt;ul\u002F&gt;&#39;).css(&#39;display&#39;, &#39;none&#39;);\n\n                    $.each(data, function(i, country){\n                        $(&#39;&lt;li\u002F&gt;&#39;).text(country).appendTo(unorderedlist);\n                    });\n\n                    unorderedlist.appendTo(&#39;#id_&#39; + id);\n                    unorderedlist.slideDown(&#39;slow&#39;);\n                }, &#39;json&#39;);\n        } else {\n            $(&#39;#id_&#39; + id + &#39; &gt; ul&#39;).slideDown(&#39;slow&#39;);\n        }\n\n        return false;\n    }\n    &lt;\u002Fscript&gt;\n&lt;\u002Fhead&gt;\n\n&lt;body&gt;\n\n&lt;ul&gt;\n    &lt;?php foreach($continents as $id =&gt; $name):?&gt;\n    &lt;li id=&quot;id_&lt;?=$id;?&gt;&quot;&gt;&lt;a onclick=&quot;return list_countries(&lt;?=$id;?&gt;);&quot; href=&quot;&lt;?=site_url(&quot;\u002Fworld\u002Findex\u002F$id&quot;);?&gt;&quot; title=&quot;Show countries in &lt;?=$name;?&gt;&quot;&gt;&lt;?=$name;?&gt;&lt;\u002Fa&gt;\n    &lt;?php if ($id == $this-&gt;uri-&gt;segment(3)):?&gt;\n    &lt;ul&gt;\n        &lt;?php foreach($countries as $country):?&gt;\n        &lt;li&gt;&lt;?=$country;?&gt;&lt;\u002Fa&gt;&lt;\u002Fli&gt;\n        &lt;?php endforeach;?&gt;\n    &lt;\u002Ful&gt;&lt;\u002Fli&gt;\n    &lt;?php endif;?&gt;\n    &lt;?php endforeach;?&gt;\n&lt;\u002Ful&gt;\n\n&lt;\u002Fbody&gt;\n&lt;\u002Fhtml&gt;\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EI just noticed that my ISP only has PHP4 installed. If this is the case for you, you will have to alter the controller to get this to work. Change the line:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-text\"\u003E\u003Ccode class=\"language-text\"\u003E&lt;a href=&quot;http:\u002F\u002Fwww.php.net\u002Fecho&quot;&gt;echo&lt;\u002Fa&gt; json_encode($continents[$continent]);\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003ETo:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-text\"\u003E\u003Ccode class=\"language-text\"\u003E&lt;a href=&quot;http:\u002F\u002Fwww.php.net\u002Fecho&quot;&gt;echo&lt;\u002Fa&gt; &#39;[&quot;&#39; . &lt;a href=&quot;http:\u002F\u002Fwww.php.net\u002Fimplode&quot;&gt;implode&lt;\u002Fa&gt;(&#39;&quot;,&quot;&#39;, $continents[$continent]) . &#39;&quot;]&#39;;\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EObviously this solution does not scale well for more complex data structures. I would advise using a JSON serializer library of some description. You could also create a view for the JSON structures, and pass data to that. This would actually be a sensible approach, as you would have complete control over the output.\u003C\u002Fp\u003E\n\u003Ch2 id=\"12-thoughts-on-codeigniter-and-ajax\"\u003E\u003Ca href=\"#12-thoughts-on-codeigniter-and-ajax\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003E12 thoughts on ‚ÄúCodeIgniter and Ajax‚Äù\u003C\u002Fh2\u003E\n\u003Ch3 id=\"anonymous\"\u003E\u003Ca href=\"#anonymous\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EAnonymous\u003C\u002Fh3\u003E\n\u003Cp\u003E\u003Cem\u003EAugust 12, 2008 at 5:34 pm\u003C\u002Fem\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EIncredible, thanks a lot for this‚Ä¶ it is exactly what I was looking for +invisible props.\u003C\u002Fp\u003E\n\u003Chr\u003E\n\u003Ch3 id=\"christophe-sautot\"\u003E\u003Ca href=\"#christophe-sautot\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EChristophe Sautot\u003C\u002Fh3\u003E\n\u003Cp\u003E\u003Cem\u003EMay 13, 2009 at 4:37 am\u003C\u002Fem\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EThank you for posting this. It was really simple to understand, and straight to the point.\u003C\u002Fp\u003E\n\u003Chr\u003E\n\u003Ch3 id=\"jedd\"\u003E\u003Ca href=\"#jedd\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EJedd\u003C\u002Fh3\u003E\n\u003Cp\u003E\u003Cem\u003ENovember 6, 2009 at 6:38 pm\u003C\u002Fem\u003E\u003C\u002Fp\u003E\n\u003Cp\u003ELooks interesting, and easy to follow. Reading is a bit frustrating on a 22‚Ä≥ monitor, given the code lumps are only showing about a 1\u002F4 to a 1\u002F3 of the width (much left &#x26; right scrolling required). Flippin‚Äô pixel-based stylesheets!\u003C\u002Fp\u003E\n\u003Chr\u003E\n\u003Ch3 id=\"ghprod\"\u003E\u003Ca href=\"#ghprod\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003Eghprod\u003C\u002Fh3\u003E\n\u003Cp\u003E\u003Cem\u003EDecember 30, 2009 at 8:45 am\u003C\u002Fem\u003E\u003C\u002Fp\u003E\n\u003Cp\u003Ewonderful application!\u003C\u002Fp\u003E\n\u003Cp\u003Ethanks for sharing this ajax!\u003C\u002Fp\u003E\n\u003Chr\u003E\n\u003Ch3 id=\"rick\"\u003E\u003Ca href=\"#rick\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003ERick\u003C\u002Fh3\u003E\n\u003Cp\u003E\u003Cem\u003EJanuary 28, 2010 at 4:17 am\u003C\u002Fem\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EYou have to load the url helper in the controller constructor like so:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-text\"\u003E\u003Ccode class=\"language-text\"\u003E$this-&gt;load-&gt;helper(‚Äòurl‚Äô); or you will get an undefined function error site url();\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EVery nice post thanks\u003C\u002Fp\u003E\n\u003Chr\u003E\n\u003Ch3 id=\"sudeep\"\u003E\u003Ca href=\"#sudeep\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003Esudeep\u003C\u002Fh3\u003E\n\u003Cp\u003E\u003Cem\u003EApril 10, 2010 at 4:12 am\u003C\u002Fem\u003E\u003C\u002Fp\u003E\n\u003Cp\u003Edear Very very thankxxxxxx\u003C\u002Fp\u003E\n\u003Chr\u003E\n\u003Ch3 id=\"heisler\"\u003E\u003Ca href=\"#heisler\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003Eheisler\u003C\u002Fh3\u003E\n\u003Cp\u003E\u003Cem\u003EAugust 4, 2010 at 3:29 pm\u003C\u002Fem\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EGracias\u003C\u002Fp\u003E\n\u003Chr\u003E\n\u003Ch3 id=\"rayhan\"\u003E\u003Ca href=\"#rayhan\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003ERayhan\u003C\u002Fh3\u003E\n\u003Cp\u003E\u003Cem\u003EJanuary 16, 2011 at 3:20 pm\u003C\u002Fem\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EIt‚Äôs awesome! thanks a lot\u003C\u002Fp\u003E\n\u003Chr\u003E\n\u003Ch3 id=\"triathlon-wetsuit\"\u003E\u003Ca href=\"#triathlon-wetsuit\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003Etriathlon wetsuit\u003C\u002Fh3\u003E\n\u003Cp\u003E\u003Cem\u003EFebruary 8, 2011 at 10:28 am\u003C\u002Fem\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EAwesome!\u003C\u002Fp\u003E\n\u003Chr\u003E\n\u003Ch3 id=\"frederik-\"\u003E\u003Ca href=\"#frederik-\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EFrederik .\u003C\u002Fh3\u003E\n\u003Cp\u003E\u003Cem\u003EMay 18, 2011 at 8:53 am\u003C\u002Fem\u003E\u003C\u002Fp\u003E\n\u003Cp\u003Eexactly what is was looking for, thanks !\u003C\u002Fp\u003E\n\u003Chr\u003E\n\u003Ch3 id=\"kevin-phillips\"\u003E\u003Ca href=\"#kevin-phillips\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EKevin Phillips\u003C\u002Fh3\u003E\n\u003Cp\u003E\u003Cem\u003EJuly 30, 2011 at 9:38 pm\u003C\u002Fem\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EAs of ci 2 with csrf enabled you also need to add the ci_csrf_token into the post data.\u003C\u002Fp\u003E\n\u003Cp\u003EYou will need to add jquery.cookie.js\nie:\ncreate a var inside the script\u003C\u002Fp\u003E\n\u003Cpre class=\"language-text\"\u003E\u003Ccode class=\"language-text\"\u003Evar cct = $.cookie(‚Äòci_csrf_token‚Äô);\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003Ethen at that to the post data\u003C\u002Fp\u003E\n\u003Cpre class=\"language-text\"\u003E\u003Ccode class=\"language-text\"\u003E{ajax:‚Äôtrue‚Äô, ‚Äòci_csrf_token‚Äô:cct}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Chr\u003E\n\u003Ch3 id=\"kevin-phillips-1\"\u003E\u003Ca href=\"#kevin-phillips-1\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EKevin Phillips\u003C\u002Fh3\u003E\n\u003Cp\u003E\u003Cem\u003EJuly 30, 2011 at 11:00 pm\u003C\u002Fem\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EI‚Äôve made an update of this tutorial for codeigniter2 with csrf enabled\n\u003Ca href=\"http:\u002F\u002Fwww.kevinphillips.co.nz\u002Fnews\u002Fjquery-axaj-codeigniter-2\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003Ehttp:\u002F\u002Fwww.kevinphillips.co.nz\u002Fnews\u002Fjquery-axaj-codeigniter-2\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Chr\u003E\n","cover_image":null}},"context":{}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script><script src="/assets/js/app.c118ccac.js" defer></script><script src="/assets/js/page--src-templates-post-vue.64ac9a83.js" defer></script>
  </body>
</html>