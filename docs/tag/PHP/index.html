<!DOCTYPE html>
<html data-html-server-rendered="true" lang="en" data-vue-tag="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>PHP - Andrew Rowland</title><meta name="gridsome:hash" content="b440d2dfedc5f7355f69b42f14a3a17b5add6387"><meta data-vue-tag="ssr" charset="utf-8"><meta data-vue-tag="ssr" name="generator" content="Gridsome v0.7.12"><meta data-vue-tag="ssr" data-key="viewport" name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta data-vue-tag="ssr" data-key="format-detection" name="format-detection" content="telephone=no"><meta data-vue-tag="ssr" data-key="description" name="description" content="I only want to help you"><link data-vue-tag="ssr" rel="icon" href="data:,"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="16x16" href="/assets/static/favicon.ce0531f.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="32x32" href="/assets/static/favicon.ac8d93a.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="96x96" href="/assets/static/favicon.b9532cc.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="76x76" href="/assets/static/favicon.f22e9f3.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="152x152" href="/assets/static/favicon.62d22cb.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="120x120" href="/assets/static/favicon.1539b60.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="167x167" href="/assets/static/favicon.dc0cdc5.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="180x180" href="/assets/static/favicon.7b22250.9bb7ffafafc09ac851d81afb65b8ef59.png"><link rel="preload" href="/assets/css/0.styles.11ed0a24.css" as="style"><link rel="preload" href="/assets/js/app.261c0a70.js" as="script"><link rel="preload" href="/assets/js/page--src--templates--tag-vue.e41997c1.js" as="script"><link rel="prefetch" href="/assets/js/page--src--pages--404-vue.3dc0d434.js"><link rel="prefetch" href="/assets/js/page--src--pages--index-vue.279a9bb8.js"><link rel="prefetch" href="/assets/js/page--src--templates--post-vue.8ad119a0.js"><link rel="prefetch" href="/assets/js/page--src--templates--redirect-vue.91df8a62.js"><link rel="stylesheet" href="/assets/css/0.styles.11ed0a24.css"><noscript data-vue-tag="ssr"><style>.g-image--loading{display:none;}</style></noscript>
  </head>
  <body >
    <script>
      // Add dark / light detection that runs before Vue.js load. Borrowed from overreacted.io
      (function() {
        window.__onThemeChange = function() {};
        function setTheme(newTheme) {
          window.__theme = newTheme;
          preferredTheme = newTheme;
          document.body.setAttribute('data-theme', newTheme);
          window.__onThemeChange(newTheme);
        }

        var preferredTheme;
        try {
          preferredTheme = localStorage.getItem('theme');
        } catch (err) { }

        window.__setPreferredTheme = function(newTheme) {
          setTheme(newTheme);
          try {
            localStorage.setItem('theme', newTheme);
          } catch (err) {}
        }

        var darkQuery = window.matchMedia('(prefers-color-scheme: dark)');
        darkQuery.addListener(function(e) {
          window.__setPreferredTheme(e.matches ? 'dark' : 'light')
        });

        setTheme(preferredTheme || (darkQuery.matches ? 'dark' : 'light'));
      })();
    </script>

    <div id="app" data-server-rendered="true"><header class="header"><div class="header__left"><a href="/" class="logo active"><span class="logo__text">
    ← Andrew Rowland
  </span></a></div><div class="header__right"><button role="button" aria-label="Toggle dark/light" class="toggle-theme"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg></button></div></header><main class="main"><h1 class="tag-title text-center space-bottom">
    # PHP
  </h1><div class="posts"><div class="post-card content-box"><div class="post-card__header"><!----></div><div class="post-card__content"><h2 class="post-card__title">Wolf CMS Related Pages plugin</h2><p class="post-card__description">For many small projects I've been using Wolf CMS. a really nice and fairly lightweight application for managing content. What I like about it is that the core code is quite minimal, but allows you to extend using plugins.</p><div class="post-meta post-card__meta">
   Posted 17. May 2010.
   <strong>1 min read.</strong></div><div class="post-tags post-card__tags"></div><a href="/wolf-cms-related-pages-plugin/" class="post-card__link">Link</a></div></div><div class="post-card content-box"><div class="post-card__header"><!----></div><div class="post-card__content"><h2 class="post-card__title">Using the Zend framework Lucene library Part 2</h2><p class="post-card__description">Note: Since this article was written I’ve moved to WordPress, and have not implemented the example code listed below.
In a previous article I talked about using a library from the Zend framework to create a site search. As you try out this functionality using the search box, above right.</p><div class="post-meta post-card__meta">
   Posted 4. July 2008.
   <strong>3 min read.</strong></div><div class="post-tags post-card__tags"></div><a href="/using-the-zend-framework-lucene-library-part-2/" class="post-card__link">Link</a></div></div><div class="post-card content-box"><div class="post-card__header"><!----></div><div class="post-card__content"><h2 class="post-card__title">Using the Zend framework Lucene library</h2><p class="post-card__description">I know, only a few articles in, so I don't really need a site search function. But you never know, I might actually keep writing (even if no-one is reading) and so I've been looking around for some solutions.</p><div class="post-meta post-card__meta">
   Posted 23. May 2008.
   <strong>2 min read.</strong></div><div class="post-tags post-card__tags"></div><a href="/using-the-zend-framework-lucene-library/" class="post-card__link">Link</a></div></div><div class="post-card content-box"><div class="post-card__header"><!----></div><div class="post-card__content"><h2 class="post-card__title">CodeIgniter and Ajax</h2><p class="post-card__description">I've been asked to create a dashboard for many devices across our network. To display real-time information on each component, I'm thinking of using Web services, and AJAX. Like most aspects of coding, using a framework to do all the heavy lifting, rather than developing your own, is a sensible approach.
So today I took a look at jQuery, a JavaScript framework. I have to admit, I'm pretty impressed. It did not take me long to come up with some example code, that degrades well when JavaScript is disabled in the browser.</p><div class="post-meta post-card__meta">
   Posted 27. April 2008.
   <strong>3 min read.</strong></div><div class="post-tags post-card__tags"></div><a href="/code-igniter-and-ajax/" class="post-card__link">Link</a></div></div></div></main><footer class="footer"><span class="footer__copyright">Copyright © 2019. </span><span class="footer__links"></span></footer></div>
    <script>window.__INITIAL_STATE__={"data":{"tag":{"title":"PHP","belongsTo":{"edges":[{"node":{"title":"Wolf CMS Related Pages plugin","path":"\u002Fwolf-cms-related-pages-plugin\u002F","date":"17. May 2010","timeToRead":1,"description":"For many small projects I've been using Wolf CMS. a really nice and fairly lightweight application for managing content. What I like about it is that the core code is quite minimal, but allows you to extend using plugins.","content":"\u003Cp\u003EFor many small projects I've been using Wolf CMS, a really nice and fairly lightweight application for managing content. What I like about it is that the core code is quite minimal, but allows you to extend using plugins.\u003C\u002Fp\u003E\n\u003Cp\u003ERecently I've been asked to build a site that requires a the ability to relate other pages to the one an editor is currently editing.\u003C\u002Fp\u003E\n\u003Cp\u003EThe plugin can be \u003Ca href=\"\u002Fdownloads\u002Frelated_pages.zip\"\u003Edownloaded here\u003C\u002Fa\u003E. Note: This version is for Wolf 0.7.2 and above. The older plugin for Wolf 0.6 is \u003Ca href=\"\u002Fdownloads\u002Frelated_pages_0_0_2.zip\"\u003Ealso available\u003C\u002Fa\u003E. Once installed in the plugins directory and enabled in the administration screen, the following tab is now available when editing pages: Once installed in the plugins directory and enabled in the admininistration screen, the following tab is now available when editing pages:\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg class=\"g-image g-image--lazy g-image--loading\" src=\"data:image\u002Fsvg+xml,%3csvg fill='none' viewBox='0 0 478 450' xmlns='http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg' xmlns:xlink='http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-5033ed37e3b6c24e79e25cce3c03d112'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'\u002F%3e%3c\u002Ffilter%3e%3c\u002Fdefs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-5033ed37e3b6c24e79e25cce3c03d112)' width='478' height='450' xlink:href='data:image\u002Fgif%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAA8CAYAAADWibxkAAAACXBIWXMAAAPoAAAD6AG1e1JrAAANb0lEQVRo3uVa%2bXNb1RXO39JSIHsIJBCyEdbpTCnlh7a\u002FMHSmUEJbhgIpy5AQKB1mykACZCEZyrBkIU7sOI4db7JlO973Rbtlydpl2ZZsSZZtWYu\u002FnnOf3rOsyEsCjeWgmW\u002Fu03v3vvfueWf5zrl3jdNth2fIhRG\u002F72eJNW6vE\u002F0DRtReV6OuvgbXG%2boItdJxfa1A5vk7CWsC46N4%2b503ce\u002Fae\u002FDAtvuxceN6bNy0AVvvvw%2bbt2zClvs2i%2bMNG9Zh0%2baNos\u002F9D2ydB76%2bWrFmLOjHiy%2b9gLvv%2bRW20mR%2b88xv8fTTv8ZmmvieR3Zj1%2b6HqeNWPPPs7\u002FDkE\u002Fuwdt292EBCYmGsW79WEdZ9W7esSpAARvHy3\u002Fbj7rvvwoMP78Chf32IP\u002F7%2bWbz8yqs4\u002FMFBHPrgEB5\u002F4gkcPPwe\u002FvnmGzjwxut4%2ba\u002F78dL%2bF\u002FHagQN4\u002Frk\u002FkEA2rFpNkARAE7qHNGD7jofw1sFD%2bNPzz%2bGtd9\u002FFoffewYG3D%2bDRxx7Hq\u002F94BY899SS%2bOP4Fjnx2FJ988h8c\u002F\u002FJLvPr3F7CezINNY9WawF9eehG\u002FvOsXwuZ37HoYu\u002FfsxPaHtmPbdrLx1MQ2bFyHtet5olvx6JNPYf\u002F%2bP5N\u002F2ETXtmAjmcOmVQrhBF8\u002F8BpN9gH60vvI5ndiJ2H3nl3YvXc39jAe2YNH9u3Fvkf3ivM7d%2b3Atge3SdcIfG3vPqnPaoMIgzqDFp3dHeju7VoWevq60avpWXb\u002FXMYal8cBu9MGm2PwZwkhAKvNArOlHwNWcwr9RI5MhH5x3pxqpXMS5veXkK1P%2bthsY8Q47p82VoxLIb0fXzOZjTCY9ALGfoOAoX\u002FumMF9uG%2b2Z2VCCGDQbhF\u002FLIMDSuvyOOFw2YWUuB20W0XrdDsEbPRf7iuPY0FyHwfRa25Zsxwum9TyGLqXZZAenBojjxNj%2bN6pZ9pdkkbanYPKM1gYXp8H4Ykg4skYZpHATDyKmdg04okZxPiYEJ2ZFH3cXpcYY0l7VjZkCIDB2mBA8dUrUNfVorW9lehwnbD7anUVyq4Vo6qqEp29Pco4MXkSiEHfh6rqKqjV1ahSq9DQeB11dXWoIxqtqiqne7VJk1eEPYBB2wBqa6tRc70OZaVFqFBVoL6hES1tzWhqaRbvIwsgFB4H\u002Fzpa6lFdU4cBM02QNEyj6SItMMFKlN5is4s%2bwdCY0KqbEoAQAn1Fg7EXBZfycPrkSXz6%2bRf4%2bOOP0dDSApVKhW9OncCxz4%2biTF0DB30hoaYEK30xbXc7Tp\u002F%2bL04cP4avv\u002F0aJ48dwdEj1J\u002F4wudHP8U3Z87BnK76BJt9AAUXzxOnOI2vvjqOb777GieOnsSxU1\u002FiFI0zWgZgpRdllR4LBsTkivPzcJB4yvuHP8Rnn36C9z84TKTtPfp\u002FGIWlKtFnbNwvxshatmwTYDXmllXRQr6guaURfTqNMAGG%2bBryV6e%2b2WBJ%2bQO2x36yx7nWqNxf9E216fbeb6H3sJjQ2NwAvcmg3JOvsWoDSUi\u002FhFB9VntuGYmk1IIMhDVgsXeUoQjATA\u002FmCU5FJ4VdRWemxM3Y1ti%2bpun8NJ2LpsB9FgOPyYZotv6pa\u002FI4bpOzceVYvA8hkbJ9vsYtBJIK%2bJwM7ruc90wJwCq%2bADseHijfjDtMTUeQ\u002FTebeolkGhLzXiIb5ve\u002F8cWz908o\u002FXjyy0Hm2IVwgwAkFUqKyffqdNAa9LCRKnZ190Cj16KX7Ly1rQ1joaAQwnJf6KdCugZkQ3qf5WBBAbD6cSjk0MMCaGlpRVVNDbqa61BYVILR8TEhAFktF3po%2bvnZZWjI7UZWAaTbEQuCfxOREDxDHsVE0n%2byEFggEubMJFcnvqQA5r04HRsp5vaQSTgGTSgoKEBZZTmulRShrKKSYr0ajQ0tiJC\u002F8PmGMDLiw8ioj7x2aPVqQKYacwgKhQOIRILoFzTURHxBRyGLWCOxPK\u002FHg0mKFP7AKPz%2bYQz5vHeOANiTeoa86Og1YCwwQhMLZ6j%2bwj\u002FFD6xGE2AkUgLQ6PtRpGqDzaDB%2be\u002FO4lzBJZz9\u002FgwuEmN0k3A8Hi%2b8XjdcLiecDhu1Drg9bsRn%2bUGyMFehAGTHxnyA1T%2bRYl3sFGeIaISp5R%2bf4z6CKEUZk4I8zXL8ViYfX31O0DfsRWCM7JpU32qzIhDwoa%2bvBx2d7TAa9RikZKVPo0GUWdsMMbkYZ2QpJimzupQjXSxELifGr4gAPENuMXlOLnwjQ3BTAlRZXoyGpibUUxbX1NxESVINguEgmYBXqD2bgcdNqS2lwcMjwySApGRO5DOWJipzJpMTApApI\u002F%2bfSfFx5gbMCaZI1dN\u002FccERZB6QXMQ1JhSekMkbpMnnWBRIpCbmoq\u002Fq9nAxxIbOPg1cNhOaW9txrbgIhcQJiq9eJk7QDF1POy4XFKGK6wgdzVDX1ENVRn0KC1FdrcaFvB9IgxoprAYFZ\u002FD7RzBCCBK9zikNmHOCSckRToVFbOeqC79wZCJAXMCIvt4uaIwGWAb00GoN8A050cO5g0GHQUptu7p64Rw0o6OjHWazGTrKKTilnoiEyaeMYpR4A1Pu8eDYPH%2bREybABIi9u9vrQZfGiHAoQL5gWAhkenoCkalISnkX5wMLsIQbM0yefK7kAiwEJ8Vzv99HWaEZBWXN8DgHkJ93AecuFaKmqoQSoyLkMR8oLCYTKIKfkiS7XeIBHCG8xBHYZySUokVMwULJU05pAMdyUcgQhZBJJOnFmer6hj2i6jJJGsDtNIU%2bqWLD7C9G2jGpOM3Mr5wtT89MZ3OICCUV9eZwyPY6TIlOsaqFGJ8ddoeFvrYLDhrLZXQj2X03OUifzwk92brVyiUyK%2bUPJthtFqEhUqUmKgiTXH2KpUpbt1sIS2pAujNkR%2bUdcpEAhtHUaRCcQG\u002FSoqq0FLXXa9HSRpygvBTFFWqixjbYBq2oLi9BHpnLtWvlaGuug9bUj1Hy\u002FEyb3U4X3ZO4g9sFu9NOrHJCCbk5lQ5nsrTJqQnwuKloRJjE\u002FFieruqCHQhaLDtKWavSfYCoPdBzV4INLlsA\u002FPpuj1OAv1aXllJhSozKy1UopfhfUVWDzq4ONDRch2%2bUTcVPYS1ANJracemYw1xiVnJyS5W0clAASeHseCKcCPGqcpgwQPbd292G1vZOaTWmX4\u002FxcEiQnGFS9VESxjDlEz5SdabFiXnZ4c3X\u002FFamIpQmBHnVpUdnEgyOIf8ik2EaH0vz9FkMIy3O50KR5KZ8gEyJnZTs5JU0w6TpRFl5GQquFKP0yiWcOZuHC%2bfPY5iE4vaQwyTyxImRi0zGLWi0C7FETITJH1v9ve0akH6OwxbvLGEmOEVwi4k6ECFqyz5CcIFkPLVqEyMnGBEpslRxTk%2bIkvMSrpXwBTcdBVgDOBPs7O2jL%2byElUKdzWaFl74uawbfr6u7g2zeDZNOjz5tN0bGx%2bFyDECj14lr\u002FWYTorGoEv8zV5NyUgPm0uNZSoSG4aQJD3ns6OjsxJX8PPxw5nsUkSlU84bK2kpUqcpx9UIhyipKUNvUCrOhDwWXL6O47BrU6koaP0RJk1twAAYL1UHEirWJtSanBCAfx1OxmnmA3WETSZK8hBZPfT2h3IkoJpUltYSw%2b\u002FkMIZFleW1W9BX8QMkHco0HUJjzEBxOUnOtFvYBE3raOlAr1v\u002FLcLW0BNdVtbASQ6xWqdDYWIMmum7QkpYUlqCysgzqmhqxv%2bBy0VWEKHfwB\u002FwYI67AZbdgaDzj%2bZlVohXmAcwBuDTGPIDNIBzyY2DADI22B62tzdAbdeho6UAwEoRG0wudrgca8gM6TRf6ujXo6mhFd28PDEY9Wqh\u002FaCJE9wuI5IoF6xseElq0UK1wxQSQyQPGee2dnB\u002FzgdHRIaLE04rnTyImSI%2b0bjCj%2bI3xUCBraSye4KX3qSzZ4lxpbe5d4itTEsssjTkppndrNRiixKi7qQ6FxeXkCPMJl9He1Q61qhLnvv0WFwou4srVK5QwGZGfdxZ55ATzL15AXkE%2bCi\u002Fn4dz5i6hvqMHVwmsYIRPgtQVeWvN43ATJ3NKLqv8PLLo\u002FINs6vrx0zrm\u002FSGFjU2KlaIwmEKB0mdVaFE1ddlEpZmc5MTmBcDhAPsRN4dIpKs3MG7geyGYVDI6LgirXELjkNkn9mVOwqUkVp6XX%2bW8VN2yRiZCHF1tPFtjlIXZzpCo73MrH6VoiL7EnhUePK9Ejm0ATYlxMqQekV4wkzCi7SJba7XEruGGTlLJXJ22\u002FX%2bYev6U2Ht0KFrvnUju9fgxu0AB2cBzfkxlOh6XF8Z\u002FVV95\u002F91MLYSVwgw%2bQihNRNDfVw0jOS9NLOX5zC%2bX4o1IEIJuVt5\u002FdCZgvAGrZGcXjUzh17AiOnTyBkyeO4d8ffQR1Q6tSF%2bStqHfC18%2bqAXNl8aQS9ycnQ6LqK3MAlhz3lfcOrmYsui6QToOR9l\u002FemHgnYMFdYpy\u002FRygec92fW3aMoVBQHE%2bIGH1z4Pusmh0i8ldvqlWjoqJUFDyrKotxMS%2bf8nuDsj1mKZYlL4rwdluvoMe3f1\u002FhLe0TlFQ9AafDITZFDDqcgtFZBgcxTNGAqSmnuLFEfEnEkwnB5qZnoqtrj5C0ASqZkZzMKvsEFtoLnA1c4JD39Oca\u002Fge73Iv7xIu6FgAAAABJRU5ErkJggg==' \u002F%3e%3c\u002Fsvg%3e\" width=\"478\" alt=\"Related pages plug-in screenshot\" data-srcset=\"\u002Fassets\u002Fstatic\u002Fscreenshot_related_pages.69ed4eb.107b7ea9498b975710aa5c68c68d7a96.gif 478w\" data-sizes=\"(max-width: 478px) 100vw, 478px\" data-src=\"\u002Fassets\u002Fstatic\u002Fscreenshot_related_pages.69ed4eb.107b7ea9498b975710aa5c68c68d7a96.gif\"\u003E\u003Cnoscript\u003E\u003Cimg class=\"g-image g-image--lazy g-image--loaded\" src=\"\u002Fassets\u002Fstatic\u002Fscreenshot_related_pages.69ed4eb.107b7ea9498b975710aa5c68c68d7a96.gif\" width=\"478\" alt=\"Related pages plug-in screenshot\"\u003E\u003C\u002Fnoscript\u003E\u003C\u002Fp\u003E\n\u003Cp\u003ESee the documention screen for sample frontend code which lists the related pages.\u003C\u002Fp\u003E\n\u003Cp\u003EPlease be aware that I really did knock this together rather quickly, but it works for me. If anyone finds any bugs, please let me know.\u003C\u002Fp\u003E\n"}},{"node":{"title":"Using the Zend framework Lucene library Part 2","path":"\u002Fusing-the-zend-framework-lucene-library-part-2\u002F","date":"4. July 2008","timeToRead":3,"description":"Note: Since this article was written I’ve moved to WordPress, and have not implemented the example code listed below.\nIn a previous article I talked about using a library from the Zend framework to create a site search. As you try out this functionality using the search box, above right.","content":"\u003Cp\u003E\u003Cstrong\u003ENote\u003C\u002Fstrong\u003E: Since this article was written I’ve moved to WordPress, and have not implemented the example code listed below.\u003C\u002Fp\u003E\n\u003Cp\u003EIn a previous article I talked about using a library from the Zend framework to create a site search. As you try out this functionality using the search box, above right.\u003C\u002Fp\u003E\n\u003Cp\u003EI never finished the article, so I'll explain here how I implemented this using CodeIgniter. I'll also detail how I built the 'quick results' tool (click in the search box).\u003C\u002Fp\u003E\n\u003Cp\u003EBelow is an example controller class that shows how I constructed the search index by pulling articles out of the database. My actual class calls security methods that require authentication before performing any of these methods. I left them out of the listing to keep it short and sweet. You will have to alter the code to allow for the difference in database schema, and to suit your intended available search criteria.\u003C\u002Fp\u003E\n\u003Cpre class=\"language-text\"\u003E\u003Ccode class=\"language-text\"\u003E&lt;?php\nclass Search extends Controller {\n\n    function Search()\n    {\n        parent::Controller();\n\n        \u002F\u002F Load Zend Lucene library.  See previous article.\n        $this-&gt;load-&gt;library(&#39;zend&#39;);\n        $this-&gt;zend-&gt;load( &#39;Zend\u002FSearch\u002FLucene&#39;);\n\n        \u002F\u002F Location of search index.  Used by all Search controller methods.\n        $this-&gt;search_index = APPPATH . &#39;search\u002Findex&#39;;\n    }\n\n    function reindex()\n    {\n        \u002F\u002F Create index.  Will delete any existing index.\n        $index = Zend_Search_Lucene::create($this-&gt;search_index);\n\n        \u002F\u002F Obtain all articles.\n        $query = $this-&gt;db-&gt;get(&#39;articles&#39;);\n\n        \u002F\u002F Loop through articles, adding an index for each one.\t\t\n        foreach ($query-&gt;result() as $article)\n        {\n            \u002F\u002F Create Lucene document for this article.\n            $doc = new Zend_Search_Lucene_Document();\n\n            \u002F\u002F Add required fields.\n            $doc-&gt;addField(Zend_Search_Lucene_Field::Text(&#39;title&#39;, $article-&gt;title));\n            $doc-&gt;addField(Zend_Search_Lucene_Field::Text(&#39;subtitle&#39;, $subtitle));\n            $doc-&gt;addField(Zend_Search_Lucene_Field::Text(&#39;category&#39;, $category_list));\n            $doc-&gt;addField(Zend_Search_Lucene_Field::Text(&#39;path&#39;, &#39;\u002Farticle\u002Fdisplay\u002F&#39; . $article-&gt;path));\n            $doc-&gt;addField(Zend_Search_Lucene_Field::UnStored(&#39;content&#39;, $article-&gt;summary . $article-&gt;text));\n\n            \u002F\u002F Add docuument to index.\n            $index-&gt;addDocument($doc);\n\n            echo &#39;Added &#39; . $item-&gt;title . &#39; to index.&lt;br \u002F&gt;&#39;;\n        }\n\n        $index-&gt;optimize();\n    }\n\n    function optimize()\n    {\n        $index = Zend_Search_Lucene::open($this-&gt;search_index);\n        $index-&gt;optimize();\n\n        echo &#39;&lt;p&gt;Index optimized.&lt;\u002Fp&gt;&#39;;\n    }\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003ETo utilise the index a result method is required:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-text\"\u003E\u003Ccode class=\"language-text\"\u003Efunction result()\n{\n    \u002F\u002F Create empty array, in case there are no results.\n    $data[&#39;results&#39;] = array();\n\n    \u002F\u002F If a search_query parameter has been posted, search the index.\n    if ($this-&gt;input-&gt;post(&#39;search_query&#39;))\n    {\n        $index = Zend_Search_Lucene::open($this-&gt;search_index);\n\n        \u002F\u002F Get results.\n        $data[&#39;results&#39;] = $index-&gt;find($this-&gt;input-&gt;post(&#39;search_query&#39;));\n    }\n\n    \u002F\u002F Load view, and populate with results.\n    $this-&gt;load-&gt;view(&#39;search_result_view&#39;, $data);\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EAnd, of course, a view is required to display the results:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-text\"\u003E\u003Ccode class=\"language-text\"\u003E&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;Search results&lt;\u002Ftitle&gt;\n&lt;\u002Fhead&gt;\n&lt;body&gt;\t\t\n\n&lt;h1&gt;Search results&lt;\u002Fh1&gt;\n\n&lt;?php if (empty($_POST[&#39;search_query&#39;])):?&gt;\n&lt;p&gt;No search query submitted.&lt;\u002Fp&gt;\n&lt;?php else:?&gt;\n    &lt;?php if (count($results)):?&gt;\n&lt;p&gt;&lt;?php echo count($results) ?&gt; result(s) returned for query: &lt;?php echo $_POST[&#39;search_query&#39;];?&gt;&lt;\u002Fp&gt;\n&lt;ul&gt;\n    &lt;?php foreach($results as $result):?&gt;\n    &lt;li&gt;&lt;?=anchor(site_url($result-&gt;path), $result-&gt;title);?&gt; (&lt;?php echo round($result-&gt;score, 2) * 100;?&gt;%)&lt;\u002Fli&gt;\n    &lt;?php endforeach;?&gt;\n&lt;\u002Ful&gt;\n    &lt;?php else:?&gt;\n&lt;p&gt;No results were returned for query: &lt;?php echo $_POST[&#39;search_query&#39;];?&gt;&lt;\u002Fp&gt;\n    &lt;?php endif;?&gt;\n&lt;?php endif;?&gt;\n\n&lt;\u002Fbody&gt;\n&lt;\u002Fhtml&gt;\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n"}},{"node":{"title":"Using the Zend framework Lucene library","path":"\u002Fusing-the-zend-framework-lucene-library\u002F","date":"23. May 2008","timeToRead":2,"description":"I know, only a few articles in, so I don't really need a site search function. But you never know, I might actually keep writing (even if no-one is reading) and so I've been looking around for some solutions.","content":"\u003Cp\u003EI know, only a few articles in, so I don't really need a site search function. But you never know, I might actually keep writing (even if no-one is reading) and so I've been looking around for some solutions.\u003C\u002Fp\u003E\n\u003Cp\u003EI've looked at a few, for example: \u003Ca href=\"http:\u002F\u002Fwww.swish-e.org\u002F\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003ESwish-e\u003C\u002Fa\u003E, and \u003Ca href=\"http:\u002F\u002Fwww.sphider.eu\u002F\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003ESphider\u003C\u002Fa\u003E. Nothing really float my boat, until I had a look at the Zend Framework. It's another MVC based PHP framework, though it looks a little heavier than CodeIgniter. The documentation is not as good either, but it did have a Lucene library.\u003C\u002Fp\u003E\n\u003Cp\u003EI found a way of incorporating a Zend framework class as a CodeIgniter library here by Fred Wu. Nice work Fred, thanks.\u003C\u002Fp\u003E\n\u003Cp\u003EAs Fred suggests, copy the Zend folder from the framework library to application\u002Flibraries\u002F in your CodeIgniter installation. I discovered that I only needed the Zend\u002FSearch folder, and the Zend\u002FException.php file.\u003C\u002Fp\u003E\n\u003Cp\u003EContinuing Fred's instructions, create a Zend.php library file with the code posted on his blog page. Now we can get started.\u003C\u002Fp\u003E\n\u003Cp\u003ECreate a directory for the index. In my example code I created a directory called application\u002Fsearch. Now we can create a controller called search.php that will contain some simple create, and search methods:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-text\"\u003E\u003Ccode class=\"language-text\"\u003E&lt;?php\nclass Search extends MY_Controller {\n\n    function Search()\n    {\n        parent::MY_Controller();\n\n        $this-&gt;load-&gt;library(&#39;zend&#39;);\n        $this-&gt;zend-&gt;load(&#39;Zend\u002FSearch\u002FLucene&#39;); \n    }\n\n    function create()\n    {\n        \u002F\u002F This method should be authenticated, or removed once the index is created.\n        \u002F\u002F TODO: Some sort of site spidering process to add the entire site to the index.\n\n        $index = Zend_Search_Lucene::create(APPPATH . &#39;search\u002Findex&#39;);\n\n            $doc = Zend_Search_Lucene_Document_Html::loadHTMLFile(&#39;http:\u002F\u002Fwww.andrewrowland.com&#39;);\n\n            $index-&gt;addDocument($doc);\n\n        echo &#39;&lt;p&gt;Index created&lt;\u002Fp&gt;&#39;;\n    }\n\n    function index()\n    {\n        \u002F\u002F TODO: Create an index method that contains a search form.\n    }\n\n    function result()\n    {\n        \u002F\u002F Hardcoded search result example.\n        \u002F\u002F TODO: Take a user search query, and expand the result summary\n\n        $index = Zend_Search_Lucene::open(APPPATH . &#39;search\u002Findex&#39;);\n\n        $data[&#39;results&#39;] = $index-&gt;find(&#39;andrew&#39;);\n\n        $this-&gt;load-&gt;view(&#39;search_result_view&#39;, $data);\t\t\n    }\n}\n?&gt;\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EI didn't bother with the create index view, as all that is needed is a simple message explaining that the index is created. The search_result_view.php view will display the results:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-text\"\u003E\u003Ccode class=\"language-text\"\u003E&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;Search example&lt;\u002Ftitle&gt;\n&lt;\u002Fhead&gt;\n&lt;body&gt;\n\n&lt;ul&gt;\n    &lt;?php foreach($results as $result):?&gt;\n    &lt;li&gt;&lt;?php echo $result-&gt;title;?&gt;&lt;\u002Fli&gt;\n    &lt;?php endforeach;?&gt;\n&lt;\u002Ful&gt;\n\n&lt;\u002Fbody&gt;\n&lt;\u002Fhtml&gt;\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EAs you can see, I've noted a few TODO's. Might add a bit of jQuery action (because I'm worth it) in there to. Weekend coming up, so I'll expand on this next week.\u003C\u002Fp\u003E\n"}},{"node":{"title":"CodeIgniter and Ajax","path":"\u002Fcode-igniter-and-ajax\u002F","date":"27. April 2008","timeToRead":3,"description":"I've been asked to create a dashboard for many devices across our network. To display real-time information on each component, I'm thinking of using Web services, and AJAX. Like most aspects of coding, using a framework to do all the heavy lifting, rather than developing your own, is a sensible approach.\nSo today I took a look at jQuery, a JavaScript framework. I have to admit, I'm pretty impressed. It did not take me long to come up with some example code, that degrades well when JavaScript is disabled in the browser.","content":"\u003Cp\u003EI've been asked to create a dashboard for many devices across our network. To display real-time information on each component, I'm thinking of using Web services, and AJAX. Like most aspects of coding, using a framework to do all the heavy lifting, rather than developing your own, is a sensible approach.\u003C\u002Fp\u003E\n\u003Cp\u003ESo today I took a look at jQuery, a JavaScript framework. I have to admit, I'm pretty impressed. It did not take me long to come up with some example code, that degrades well when JavaScript is disabled in the browser.\u003C\u002Fp\u003E\n\u003Cp\u003EMy example app lists continents. Clicking on a continent will return a list of countries in that continent.\u003C\u002Fp\u003E\n\u003Cp\u003ECreate a CodeIgniter controller and save as \u003Cstrong\u003Eworld.php\u003C\u002Fstrong\u003E:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-text\"\u003E\u003Ccode class=\"language-text\"\u003E&lt;?php\nclass World extends Controller {\n\n    function World()\n    {\n        parent::Controller();\n    }\n\n    function index($continent = NULL)\n    {\n        \u002F\u002F Set continents data.  In a real application we\n        \u002F\u002F would obtain this from a database via a model.\n        $data[&#39;continents&#39;] = array(\n                1 =&gt; &#39;Europe&#39;,\n                2 =&gt; &#39;Africa&#39;,\n                3 =&gt; &#39;North America&#39;,\n            );\n\n        \u002F\u002F If a non-Ajax continent selection is made, call the\n        \u002F\u002F list_countries method, and set countries data.\n        if (isset($continent))\n        {\n            $data[&#39;countries&#39;] = $this-&gt;list_countries($continent);\n        }\n\n        \u002F\u002F Load world view.\n        $this-&gt;load-&gt;view(&#39;world_view&#39;, $data);\n    }\n\n    function list_countries($continent)\n    {\n        \u002F\u002F Generated countries data.  As before, this would be\n        \u002F\u002F obtained from a model.\n        $continents = array(\n                1 =&gt; array(&#39;UK&#39;, &#39;France&#39;, &#39;Germany&#39;),\n                2 =&gt; array(&#39;South Africa&#39;, &#39;Zimbabwe&#39;, &#39;Cameroon&#39;),\n                3 =&gt; array(&#39;USA&#39;, &#39;Canada&#39;),\n            );\n\n        \u002F\u002F Decide whether to return JSON data, or an array,\n        \u002F\u002F depending if $_POST[&#39;ajax&#39;] is set.\n        if (isset($_POST[&#39;ajax&#39;]))\n        {\n            echo json_encode($continents[$continent]);\n        }\n        else\n        {\n            return $continents[$continent];\n        }\n    }\n}\n?&gt;\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003ECreate a view and save as \u003Cstrong\u003Eworld_view.php\u003C\u002Fstrong\u003E:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-text\"\u003E\u003Ccode class=\"language-text\"\u003E&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;World example&lt;\u002Ftitle&gt;\n    &lt;script type=&quot;text\u002Fjavascript&quot; src=&quot;\u002Fjquery.js&quot;&gt;&lt;\u002Fscript&gt;\n    &lt;script type=&quot;text\u002Fjavascript&quot;&gt;\n    function list_countries(id) {\n        $(&#39;li &gt; ul&#39;).slideUp(&#39;slow&#39;);\n\n        if ($(&#39;#id_&#39; + id).children(&#39;ul&#39;).length == 0) {\n            $.post(&#39;\u002Fworld\u002Flist_countries\u002F&#39; + id, {ajax:&#39;true&#39;},\n                function(data){\n                    unorderedlist = $(&#39;&lt;ul\u002F&gt;&#39;).css(&#39;display&#39;, &#39;none&#39;);\n\n                    $.each(data, function(i, country){\n                        $(&#39;&lt;li\u002F&gt;&#39;).text(country).appendTo(unorderedlist);\n                    });\n\n                    unorderedlist.appendTo(&#39;#id_&#39; + id);\n                    unorderedlist.slideDown(&#39;slow&#39;);\n                }, &#39;json&#39;);\t\n        } else {\n            $(&#39;#id_&#39; + id + &#39; &gt; ul&#39;).slideDown(&#39;slow&#39;);\n        }\n\n        return false;\n    }\n    &lt;\u002Fscript&gt;\n&lt;\u002Fhead&gt;\n\n&lt;body&gt;\n\n&lt;ul&gt;\n    &lt;?php foreach($continents as $id =&gt; $name):?&gt;\n    &lt;li id=&quot;id_&lt;?=$id;?&gt;&quot;&gt;&lt;a onclick=&quot;return list_countries(&lt;?=$id;?&gt;);&quot; href=&quot;&lt;?=site_url(&quot;\u002Fworld\u002Findex\u002F$id&quot;);?&gt;&quot; title=&quot;Show countries in &lt;?=$name;?&gt;&quot;&gt;&lt;?=$name;?&gt;&lt;\u002Fa&gt;\n    &lt;?php if ($id == $this-&gt;uri-&gt;segment(3)):?&gt;\n    &lt;ul&gt;\n        &lt;?php foreach($countries as $country):?&gt;\n        &lt;li&gt;&lt;?=$country;?&gt;&lt;\u002Fa&gt;&lt;\u002Fli&gt;\n        &lt;?php endforeach;?&gt;\n    &lt;\u002Ful&gt;&lt;\u002Fli&gt;\n    &lt;?php endif;?&gt;\n    &lt;?php endforeach;?&gt;\n&lt;\u002Ful&gt;\n\n&lt;\u002Fbody&gt;\n&lt;\u002Fhtml&gt;\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EI just noticed that my ISP only has PHP4 installed. If this is the case for you, you will have to alter the controller to get this to work. Change the line:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-text\"\u003E\u003Ccode class=\"language-text\"\u003E&lt;a href=&quot;http:\u002F\u002Fwww.php.net\u002Fecho&quot;&gt;echo&lt;\u002Fa&gt; json_encode($continents[$continent]);\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003ETo:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-text\"\u003E\u003Ccode class=\"language-text\"\u003E&lt;a href=&quot;http:\u002F\u002Fwww.php.net\u002Fecho&quot;&gt;echo&lt;\u002Fa&gt; &#39;[&quot;&#39; . &lt;a href=&quot;http:\u002F\u002Fwww.php.net\u002Fimplode&quot;&gt;implode&lt;\u002Fa&gt;(&#39;&quot;,&quot;&#39;, $continents[$continent]) . &#39;&quot;]&#39;;\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EObviously this solution does not scale well for more complex data structures. I would advise using a JSON serializer library of some description. You could also create a view for the JSON structures, and pass data to that. This would actually be a sensible approach, as you would have complete control over the output.\u003C\u002Fp\u003E\n"}}]}}},"context":{}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script><script src="/assets/js/app.261c0a70.js" defer></script><script src="/assets/js/page--src--templates--tag-vue.e41997c1.js" defer></script>
  </body>
</html>