<!DOCTYPE html>
<html data-html-server-rendered="true" lang="en" data-vue-tag="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-5KQZ3N');</script>
    <!-- End Google Tag Manager -->
    <title>Using the Zend framework Lucene library Part 2 - Andrew Rowland</title><meta name="gridsome:hash" content="e21a68655b6a4b87516a75fe5be7f5d170f57ee5"><meta data-vue-tag="ssr" charset="utf-8"><meta data-vue-tag="ssr" name="generator" content="Gridsome v0.7.12"><meta data-vue-tag="ssr" data-key="viewport" name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta data-vue-tag="ssr" data-key="format-detection" name="format-detection" content="telephone=no"><meta data-vue-tag="ssr" data-key="description" name="description" content="I only want to help you"><meta data-vue-tag="ssr" name="description" content="Note: Since this article was written I’ve moved to WordPress, and have not implemented the example code listed below.
In a previous article I talked about using a library from the Zend framework to create a site search. As you try out this functionality using the search box, above right."><link data-vue-tag="ssr" rel="icon" href="data:,"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="16x16" href="/assets/static/favicon.ce0531f.ac64c76abcd4710b88c6efd7d6aa8915.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="32x32" href="/assets/static/favicon.ac8d93a.ac64c76abcd4710b88c6efd7d6aa8915.png"><link rel="preload" href="/assets/css/0.styles.7169b5b9.css" as="style"><link rel="preload" href="/assets/js/app.be40519f.js" as="script"><link rel="preload" href="/assets/js/page--src-templates-post-vue.178f401d.js" as="script"><link rel="prefetch" href="/assets/js/page--src-pages-404-vue.fb0b6ddc.js"><link rel="prefetch" href="/assets/js/page--src-pages-index-vue.3b48f244.js"><link rel="prefetch" href="/assets/js/page--src-templates-redirect-vue.39c2f231.js"><link rel="prefetch" href="/assets/js/page--src-templates-tag-vue.e4f73c69.js"><link rel="stylesheet" href="/assets/css/0.styles.7169b5b9.css"><noscript data-vue-tag="ssr"><style>.g-image--loading{display:none;}</style></noscript>
  </head>
  <body >
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5KQZ3N"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    <script>
      // Add dark / light detection that runs before Vue.js load. Borrowed from overreacted.io
      (function() {
        window.__onThemeChange = function() {};
        function setTheme(newTheme) {
          window.__theme = newTheme;
          preferredTheme = newTheme;
          document.body.setAttribute('data-theme', newTheme);
          window.__onThemeChange(newTheme);
        }

        var preferredTheme;
        try {
          preferredTheme = localStorage.getItem('theme') || 'dark';
        } catch (err) { }

        window.__setPreferredTheme = function(newTheme) {
          setTheme(newTheme);
          try {
            localStorage.setItem('theme', newTheme);
          } catch (err) {}
        }

        var darkQuery = window.matchMedia('(prefers-color-scheme: dark)');
        darkQuery.addListener(function(e) {
          window.__setPreferredTheme(e.matches ? 'dark' : 'light')
        });

        setTheme(preferredTheme || (darkQuery.matches ? 'dark' : 'light'));
      })();
    </script>

    <div id="app" data-server-rendered="true"><header class="header"><div class="header__left"><a href="/" class="logo active"><span class="logo__text">
    ← Andrew Rowland
  </span></a></div><div class="header__right"><button role="button" aria-label="Toggle dark/light" class="toggle-theme"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg></button></div></header><main class="main"><div class="post-title"><h1 class="post-title__text">
      Using the Zend framework Lucene library Part 2
    </h1><div class="post-meta">
   Posted 4. July 2008.
   <strong>10 min read.</strong></div></div><div class="post content-box"><div class="post__header"><!----></div><div class="post__content"><p><strong>Note</strong>: Since this article was written I’ve moved to WordPress, and have not implemented the example code listed below.</p>
<p>In a previous article I talked about using a library from the Zend framework to create a site search. As you try out this functionality using the search box, above right.</p>
<p>I never finished the article, so I'll explain here how I implemented this using CodeIgniter. I'll also detail how I built the 'quick results' tool (click in the search box).</p>
<p>Below is an example controller class that shows how I constructed the search index by pulling articles out of the database. My actual class calls security methods that require authentication before performing any of these methods. I left them out of the listing to keep it short and sweet. You will have to alter the code to allow for the difference in database schema, and to suit your intended available search criteria.</p>
<pre class="language-text"><code class="language-text">&lt;?php
class Search extends Controller {

    function Search()
    {
        parent::Controller();

        // Load Zend Lucene library.  See previous article.
        $this-&gt;load-&gt;library(&#39;zend&#39;);
        $this-&gt;zend-&gt;load( &#39;Zend/Search/Lucene&#39;);

        // Location of search index.  Used by all Search controller methods.
        $this-&gt;search_index = APPPATH . &#39;search/index&#39;;
    }

    function reindex()
    {
        // Create index.  Will delete any existing index.
        $index = Zend_Search_Lucene::create($this-&gt;search_index);

        // Obtain all articles.
        $query = $this-&gt;db-&gt;get(&#39;articles&#39;);

        // Loop through articles, adding an index for each one.
        foreach ($query-&gt;result() as $article)
        {
            // Create Lucene document for this article.
            $doc = new Zend_Search_Lucene_Document();

            // Add required fields.
            $doc-&gt;addField(Zend_Search_Lucene_Field::Text(&#39;title&#39;, $article-&gt;title));
            $doc-&gt;addField(Zend_Search_Lucene_Field::Text(&#39;subtitle&#39;, $subtitle));
            $doc-&gt;addField(Zend_Search_Lucene_Field::Text(&#39;category&#39;, $category_list));
            $doc-&gt;addField(Zend_Search_Lucene_Field::Text(&#39;path&#39;, &#39;/article/display/&#39; . $article-&gt;path));
            $doc-&gt;addField(Zend_Search_Lucene_Field::UnStored(&#39;content&#39;, $article-&gt;summary . $article-&gt;text));

            // Add docuument to index.
            $index-&gt;addDocument($doc);

            echo &#39;Added &#39; . $item-&gt;title . &#39; to index.&lt;br /&gt;&#39;;
        }

        $index-&gt;optimize();
    }

    function optimize()
    {
        $index = Zend_Search_Lucene::open($this-&gt;search_index);
        $index-&gt;optimize();

        echo &#39;&lt;p&gt;Index optimized.&lt;/p&gt;&#39;;
    }
}</code></pre>
<p>To utilise the index a result method is required:</p>
<pre class="language-text"><code class="language-text">function result()
{
    // Create empty array, in case there are no results.
    $data[&#39;results&#39;] = array();

    // If a search_query parameter has been posted, search the index.
    if ($this-&gt;input-&gt;post(&#39;search_query&#39;))
    {
        $index = Zend_Search_Lucene::open($this-&gt;search_index);

        // Get results.
        $data[&#39;results&#39;] = $index-&gt;find($this-&gt;input-&gt;post(&#39;search_query&#39;));
    }

    // Load view, and populate with results.
    $this-&gt;load-&gt;view(&#39;search_result_view&#39;, $data);
}</code></pre>
<p>And, of course, a view is required to display the results:</p>
<pre class="language-text"><code class="language-text">&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Search results&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;

&lt;h1&gt;Search results&lt;/h1&gt;

&lt;?php if (empty($_POST[&#39;search_query&#39;])):?&gt;
&lt;p&gt;No search query submitted.&lt;/p&gt;
&lt;?php else:?&gt;
    &lt;?php if (count($results)):?&gt;
&lt;p&gt;&lt;?php echo count($results) ?&gt; result(s) returned for query: &lt;?php echo $_POST[&#39;search_query&#39;];?&gt;&lt;/p&gt;
&lt;ul&gt;
    &lt;?php foreach($results as $result):?&gt;
    &lt;li&gt;&lt;?=anchor(site_url($result-&gt;path), $result-&gt;title);?&gt; (&lt;?php echo round($result-&gt;score, 2) * 100;?&gt;%)&lt;/li&gt;
    &lt;?php endforeach;?&gt;
&lt;/ul&gt;
    &lt;?php else:?&gt;
&lt;p&gt;No results were returned for query: &lt;?php echo $_POST[&#39;search_query&#39;];?&gt;&lt;/p&gt;
    &lt;?php endif;?&gt;
&lt;?php endif;?&gt;

&lt;/body&gt;
&lt;/html&gt;</code></pre>
<h2 id="20-thoughts-on-using-the-zend-framework-lucene-library-part-2"><a href="#20-thoughts-on-using-the-zend-framework-lucene-library-part-2" aria-hidden="true"><span class="icon icon-link"></span></a>20 thoughts on “Using the Zend framework Lucene library Part 2”</h2>
<h3 id="jeff"><a href="#jeff" aria-hidden="true"><span class="icon icon-link"></span></a>Jeff</h3>
<p><em>November 14, 2008 at 8:07 am</em></p>
<p>Great post! Keep it up.</p>
<hr>
<h3 id="rob"><a href="#rob" aria-hidden="true"><span class="icon icon-link"></span></a>Rob</h3>
<p><em>March 9, 2009 at 6:01 am</em></p>
<p>Hi Andrew,</p>
<p>Many thanks for these articles, after a little tweakage I managed to get it all going on a project I’m working on. (I’m pretty new to CI/PHP/Apache having come from ASP/VBScript/IIS [Yuk, I know..])</p>
<p>However, I have a question: At the moment, same as your tutorial, I’m searching on only one table in the db, a table called Items (news, events, careers) which is fine but I need to be able to index a number of other tables. What I’m mostly wondering about is how to set the link in the result, I presume the rest is just replicating the code I already have for indexing?</p>
<p>Have you any insights, experience, wisdom, links? Any help would be greatly appreciated.</p>
<p>Thanks,</p>
<p>Rob.</p>
<hr>
<h3 id="rob-1"><a href="#rob-1" aria-hidden="true"><span class="icon icon-link"></span></a>Rob</h3>
<p><em>March 11, 2009 at 5:35 am</em></p>
<p>Andrew,</p>
<p>Many thanks for your swift and insightful reply.. I haven’t had a chance to test it yet but your code and explanations make sense and have cleared up a lot for me.</p>
<p>Thanks again for your time, you’ve saved me a lot of mine!</p>
<p>Cheers!</p>
<p>Rob.</p>
<hr>
<h3 id="zaw"><a href="#zaw" aria-hidden="true"><span class="icon icon-link"></span></a>zaw</h3>
<p><em>March 13, 2009 at 9:42 am</em></p>
<p>In the display result view page, when searching html file content the result will be long text.
How can I display only the synopsis of the long text?
I want to show the parts of text in result that found the search terms.</p>
<p>e.g. in google result when I find the search term | zend framework sample |</p>
<p>Akra?s DevNotes ? Tutorial: Getting Started with Zend Framework
The original tutorial for Zend Framework 1.0 is still available, ... Rob, Did you have a sample of using Zend call linux command ? how to do that? ...</p>
<p>In above e.g., Google show two parts of text. How can I do like this?</p>
<hr>
<h3 id="zaw-1"><a href="#zaw-1" aria-hidden="true"><span class="icon icon-link"></span></a>zaw</h3>
<p><em>March 14, 2009 at 3:28 pm</em></p>
<p>Hi Andrew</p>
<p>I mean in the result list I would like to show only the line near the search term found.</p>
<p>I’m testing with zend frame sample code ZendFramework-1.7.6demosZendSearchLucenefeed-searchsearch-index.php</p>
<p>At line 41 of search-index.php, trim(substr($hit->$field,0,76)). It is only show the first 76 characters of result text.</p>
<p>I’m afraid that the search term may not include within first 76 characters.
I mean if the search term found at the postition of 100th character, I want to show the text near 100th character like google result.</p>
<p>thanks</p>
<hr>
<h3 id="andy"><a href="#andy" aria-hidden="true"><span class="icon icon-link"></span></a>Andy</h3>
<p><em>March 15, 2009 at 12:52 pm</em></p>
<p>Hello Zaw</p>
<p>Take a look at:</p>
<p><a href="http://framework.zend.com/manual/en/zend.search.lucene.searching.html#" target="_blank" rel="nofollow noopener noreferrer">http://framework.zend.com/manual/en/zend.search.lucene.searching.html#</a>
zend.search.lucene.searching.highlighting</p>
<p>You will need to store the content as a text field, so it can be used by the Zend Query Parser to highlight the returned text.</p>
<p>The main problem you will have, is restricting the amount of content returned, as you will not want the entire document, only the sentence(s) in which the highlighed search terms appear.</p>
<p>I had a go quick on my site, and made it work, but did not get around to the final problem I’ve, er, highlighed.</p>
<hr>
<h3 id="zaw-2"><a href="#zaw-2" aria-hidden="true"><span class="icon icon-link"></span></a>Zaw</h3>
<p><em>May 13, 2009 at 4:38 am</em></p>
<p>Hello</p>
<p>Thanks for your reply.</p>
<p>I found a way to display search results as I want in the following link
<a href="http://www.whatstyle.net/articles/6/displaying_search_results_with_php" target="_blank" rel="nofollow noopener noreferrer">http://www.whatstyle.net/articles/6/displaying_search_results_with_php</a></p>
<p>This class can show the parts of content near search keyword.
I want to integrate this class with zend lucene result.
But this chunk class require three parameters</p>
<ol>
<li>the subject string,</li>
<li>a maximum amount of characters and</li>
<li>an array of search words.</li>
</ol>
<p>How can I get array of search words from zend lucene result?
If I query with wild card in lucene, the result hightlight text may vary depend of the content of file.</p>
<p>e.g. If I query like meth*, the result may include method, methodology, etc.
I need to know which words are found in the file to use the chunk class.</p>
<p>Is there a way to find the list of keywords that found for a search result?</p>
<p>Thanks</p>
<hr>
<h3 id="junaid"><a href="#junaid" aria-hidden="true"><span class="icon icon-link"></span></a>junaid</h3>
<p><em>May 16, 2009 at 12:13 pm</em></p>
<p>hi andrew,
i have a problem while using your method code. i have only included exception .php file and Zend/Search folder in my application/libraries. i get an error
Message:</p>
<pre class="language-text"><code class="language-text">CI_Zend::require_once(Zend/Search/Lucene.php) [ci-zend.require-once]: failed to open stream: No such file or directory

Filename: libraries/Zend.php

Line Number: 35</code></pre>
<p>if u can please help me .</p>
<hr>
<h3 id="junaid-1"><a href="#junaid-1" aria-hidden="true"><span class="icon icon-link"></span></a>junaid</h3>
<p><em>May 17, 2009 at 4:18 am</em></p>
<p>hi,
thanks for your reply.</p>
<pre class="language-text"><code class="language-text">/system/application/libraries/Zend/Search/Lucene.php does exist.</code></pre>
<p>i m on windows with XAMPP. i m also using CI 1.71. but i read on codeigniter/forums that u have to write</p>
<pre class="language-text"><code class="language-text">$this-&gt;load-&gt;library(‘zend’);
$this-&gt;zend-&gt;load( ‘Zend/Search/Lucene’);</code></pre>
<p>instead of</p>
<pre class="language-text"><code class="language-text">$this-&gt;load-&gt;library(‘zend’, ‘Zend/Search/Lucene’);</code></pre>
<p>in the controller.</p>
<p>also i have upgraded log_threshold to 4. i have checked the log and classes are successfully initialized and loaded...</p>
<p>i have changed the reindex function according to my database. i have a “event” table in my DB. and it has a “Event_name” field. so reindex looks like</p>
<pre class="language-text"><code class="language-text">function reindex()
{
    // Create index. Will delete any existing index.
    $this-&gt;create();

    // Obtain all events.
    $query = $this-&gt;db-&gt;get(‘event’);

    // Loop through articles, adding an index for each one.
    foreach ($query-&gt;result() as $event)
    {
        // Create Lucene document for this article.
        $doc = new Zend_Search_Lucene_Document();

        // Add required fields.
        $doc-&gt;addField(Zend_Search_Lucene_Field::Text(‘eventname’, $event-&gt;Event_name));

        $index-&gt;addDocument($doc);

        echo ‘Added ‘ . $item-&gt;eventname . ‘ to index.
        ‘;
    }

    $index-&gt;optimize();
}</code></pre>
<p>and i get a long long error</p>
<pre class="language-text"><code class="language-text">Fatal error: Uncaught exception ‘Zend_Search_Lucene_Exception’ with message ‘Index doesn’t exists in the specified directory.’ in C:xampphtdocscodeignitersystemapplicationlibrariesZendSearchLucene.php:547 Stack trace: #0 C:xampphtdocscodeignitersystemapplicationlibrariesZendSearchLucene.php(214): Zend_Search_Lucene-&gt;__construct(‘C:xampphtdocs…’, false) #1 C:xampphtdocscodeignitersystemapplicationcontrollerssearch.php(70): Zend_Search_Lucene::open(‘C:xampphtdocs…’) #2 C:xampphtdocscodeignitersystemcodeigniterCodeIgniter.php(233): Search-&gt;result() #3 C:xampphtdocscodeigniterindex.php(115): require_once(‘C:xampphtdocs…’) #4 {main} thrown in C:xampphtdocscodeignitersystemapplicationlibrariesZendSearchLucene.php on line 547</code></pre>
<hr>
<h3 id="andy-1"><a href="#andy-1" aria-hidden="true"><span class="icon icon-link"></span></a>Andy</h3>
<p><em>May 17, 2009 at 4:19 am</em></p>
<p>It looks like an error in my code. I’ve changed the way the library is loaded, as you suggested. Removed the create method, and have created the index directly within the reindex method.</p>
<hr>
<h3 id="john"><a href="#john" aria-hidden="true"><span class="icon icon-link"></span></a>john</h3>
<p><em>May 21, 2009 at 6:51 am</em></p>
<pre class="language-text"><code class="language-text">A PHP Error was encountered
Severity: Notice</code></pre>
<p>I got this error when i try ur code. i spend few days but i still can’t fix it. please help</p>
<pre class="language-text"><code class="language-text">Message: iconv_strlen() [function.iconv-strlen]: Wrong charset, conversion from `’ to `UCS-4LE’ is not allowed

Filename: Search/QueryLexer.php

Line Number: 343</code></pre>
<hr>
<h3 id="andy-2"><a href="#andy-2" aria-hidden="true"><span class="icon icon-link"></span></a>Andy</h3>
<p><em>May 21, 2009 at 6:55 am</em></p>
<p>You appear to be having a problem with the Zend library class rather than my code.</p>
<p>A quick Google brings something that might help.</p>
<hr>
<h3 id="yeiniel"><a href="#yeiniel" aria-hidden="true"><span class="icon icon-link"></span></a>yeiniel</h3>
<p><em>February 10, 2010 at 11:47 am</em></p>
<p>there is no problem width the code, the problem here is that the search index is not created. you need to create the index first. see Zend framework documentation to acomplish that</p>
<hr>
<h3 id="noel"><a href="#noel" aria-hidden="true"><span class="icon icon-link"></span></a>noel</h3>
<p><em>May 14, 2010 at 4:50 am</em></p>
<p>This works fine on my local, but as soon as i put it on my live server i get:</p>
<pre class="language-text"><code class="language-text">A PHP Error was encountered

Severity: Warning

Message: CI_Zend::require_once(Zend/Search/Lucene.php) [ci-zend.require-once]: failed to open stream: No such file or directory

Filename: libraries/Zend.php

Line Number: 51</code></pre>
<hr>
<h3 id="brian"><a href="#brian" aria-hidden="true"><span class="icon icon-link"></span></a>Brian</h3>
<p><em>January 3, 2011 at 12:58 pm</em></p>
<p>Thank you, I have the Lucene searching within the CI framework now, but do you know of a way to paginate the results? The CI Library is fine for database queries, but I am not sure how to implement pagination with the Lucene indexes...</p>
<hr>
<h3 id="tom"><a href="#tom" aria-hidden="true"><span class="icon icon-link"></span></a>tom</h3>
<p><em>January 3, 2011 at 12:59 pm</em></p>
<p>pls help me...</p>
<pre class="language-text"><code class="language-text">Fatal error: Class ‘Zend_Search_Lucene’ not found</code></pre>
<hr>
<h3 id="ria"><a href="#ria" aria-hidden="true"><span class="icon icon-link"></span></a>ria</h3>
<p><em>March 19, 2011 at 1:54 pm</em></p>
<p>very helpful resource. thanks for sharing.</p>
<hr>
<h3 id="annony"><a href="#annony" aria-hidden="true"><span class="icon icon-link"></span></a>annony</h3>
<p><em>August 8, 2011 at 9:57 am</em></p>
<p>Index doesnâ€™t exists in the specified directory::</p>
<p>I work on windows, and may be its due to file permission. Anyway, I tried using create first and then open . See,
<a href="http://framework.zend.com/manual/1.11/en/learning.lucene.index-opening.html" target="_blank" rel="nofollow noopener noreferrer">http://framework.zend.com/manual/1.11/en/learning.lucene.index-opening.html</a></p>
<p>Once created , I removed create statement, and worked fine</p>
<hr>
<h3 id="leonardo-siagian"><a href="#leonardo-siagian" aria-hidden="true"><span class="icon icon-link"></span></a>Leonardo Siagian</h3>
<p><em>March 10, 2014 at 5:18 am</em></p>
<p>how if i use category in searching? it’s mean, i select firstly category before searching.</p>
<p>i try this code:</p>
<pre class="language-text"><code class="language-text">$category= $this-&gt;input-&gt;post(‘category’);
$keyword =strtolower($this-&gt;input-&gt;post(‘keyword’));

$query = new Zend_Search_Lucene_Search_Query_MultiTerm();
$query-&gt;addTerm(new Zend_Search_Lucene_Index_Term($keyword,’content_article’),true);
$query-&gt;addTerm(new Zend_Search_Lucene_Index_Term($category,category_article’), true);
$data[‘results’] = $index-&gt;find($query);</code></pre>
<p>according that code, i just can use single word as the keyword, and can not use(find) more than one word (phrase).</p>
<p>anybody can solve my problem? thanks ...</p>
<hr>
<h3 id="kopano-unity"><a href="#kopano-unity" aria-hidden="true"><span class="icon icon-link"></span></a>Kopano Unity</h3>
<p><em>July 22, 2014 at 1:41 pm</em>
Hi Jeff</p>
<p>Thanks for the post first of all it is very understandable, but I keep coming across an error in my code hope you can help me here is my stackoverflow question link <a href="http://stackoverflow.com/questions/24887645/zend-lucene-search-content-inside-a-datebase-in-html-on-a-live-website-404-er" target="_blank" rel="nofollow noopener noreferrer">http://stackoverflow.com/questions/24887645/zend-lucene-search-content-inside-a-datebase-in-html-on-a-live-website-404-er</a></p>
<hr>
</div><div class="post__footer"><div class="post-tags"><a href="/tag/CodeIgniter/" class="post-tags__link"><span>#</span> CodeIgniter
		</a><a href="/tag/PHP/" class="post-tags__link"><span>#</span> PHP
		</a></div></div></div><div class="post-comments"><div class="comments"></div></div><div class="author post-author"><img alt="Author image" src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 180 180' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-79abe12977319e63670ceacd51dd8a4b'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='5'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-79abe12977319e63670ceacd51dd8a4b)' width='180' height='180' xlink:href='data:image/png%3bbase64%2c/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCABAAEADASIAAhEBAxEB/8QAGwAAAgMBAQEAAAAAAAAAAAAABgcDBAUCAAj/xAA2EAACAQMCBAUCBAMJAAAAAAABAgMABBEFEgYhMUETFCJRYYGRMkJxsRUjQwckUlOSocHh8P/EABoBAAIDAQEAAAAAAAAAAAAAAAMEAgUGAQD/xAAiEQACAgIDAAMAAwAAAAAAAAABAgADBBESITETMkFRUmH/2gAMAwEAAhEDEQA/AK0Gpp3NaMGpxcvWKR68V3I6Qp/qNSpxbddoo/uavzwP7ALYB%2bR8w6pD3kFXodVg/wAYpDWPEep3MgWKKIfJzyogtLe8uWDXVxOT7KxVR9BSeRdVV6Y9jVtd9Vjmi1iAf1BVuPWbYdZBSgNtd2mXinmIx%2bFiSP8AesDUtf1mylCtJHsb8LbP%2b%2btQpau/6mEuU0dsvU%2bh01q2/wAwVMuvWg/qCvmccUay6H%2b8IueWQnSoBrusH8Wo3GfYAUU4v%2bwIyk/rBKKEsnpjYnufDNTrbkc/V9gKopMXX8bL7hTit7gSxsrniexj1CHxoHYqUfmuSDgkVNrAiltb1EUTkwXfsJ%2bDbBXXcycyM02dC0qIwjCBnIoJ/ggs%2bJzbWlzLbWpIYQx4KOh5cs9OnaiTUJNZEiraDytui8goyzcuWc1mb7BY/In2X9G604gTensU2srQ4YdsUvOPrCNdLmfZtKMrAgc%2buDWrqvE/EECmOOO0kgEiQtO6sHBI9RA6EDkP1oY1u%2b1K70uSC6hQO7D%2bbk8hnJPM47UfDYrapncluVTAwQTwWwi5L%2bzEZ/erHlpw%2bFs5Xj6DPpyf1zUwRlRWDAY6kSxjNeW%2b3QSALNKg6%2bE4Uj26jn9K1Psz2tezDjt4nw0YAI7bQR96ns7g2s8UsLL40TB1b5FCFlqTxPi43PH3OeYol0K5OoNMI7Vo4EGQ5Oct7UuuTTYP4kSjodiMnRtcudZ16zlvIoIp1UACEnaBnPPPemv56J7X1Ebscl6/ekrpkvlLvzcrB2ib%2bYoAHowOYpk6XMLiziEZVnUblBOdw%2bcfFZjLTi/XQl5hXc17Pc4vPBigm8zHJI7qGQgct3sR2FDP9oUlv/AUtlIUzsuWRc47mjDiK6tptOeKOwkgutuPFjnYqnzg0s9X1Q39wDbBPBjyqFsnce7f%2b9qYwKi1y78ELmWlaiP0wesNLVAQqM2fzFcCr1rowLEyTMqkcwMYNT%2bcnGAQucflWozqUgk27JmPydo%2b1an5UUdSgCExfaPw1dX6iSQeBD2Zhlj%2bgpkaTYxwaawRRE0C7ACM8uh5fQHPzU6afJGztEq7ipySG6fBB5dv2qNFaORAno3rtdeqnqcN8nlVGAF8k2JaSW8ckURmhZjOhO/aCwIJ5ZPatXh7WBYTvJtZ7V2ICJgNH7deo%2bKpRlUjaOEgq4AZtp6g5OfrgCqF1blpJH2oi4VmELkdu/vzHfpQ7EFg0Z2p2rbawm4s4kgm02ZLWO5FwQUI8NgFz3JpaXV1Laadb4O4lih5de/X61rh5JDcDxnV4xuYE8zyzn9qw%2bIIvN27ywJKu3JTxGyygdj2yftXqKxUdrGbLzaumE9BrLbQuNo6DHLFcX1%2b7gEy%2b4wTQ5FeBgBIeZ/MB/xXE1xzG71D4pv5eoKf/9k=' /%3e%3c/svg%3e" width="180" data-src="/assets/static/author.e6b6009.01fea4a6eb109fed65874b88d6ddc592.png" data-srcset="/assets/static/author.e6b6009.01fea4a6eb109fed65874b88d6ddc592.png 180w" data-sizes="(max-width: 180px) 100vw, 180px" class="author__image g-image g-image--lazy g-image--loading"><noscript><img src="/assets/static/author.e6b6009.01fea4a6eb109fed65874b88d6ddc592.png" class="author__image g-image g-image--loaded" width="180" alt="Author image"></noscript><!----><p class="author__intro">
		I only want to help you...
	</p><p class="author__links"><a href="//www.linkedin.com/in/hashbang/">LinkedIn</a><a href="//twitter.com/andyjrowland">Twitter</a><a href="//github.com/ajrowland">GitHub</a></p></div></main><footer class="footer"><span class="footer__copyright">Copyright © 2020. </span><span class="footer__links"></span></footer></div>
    <script>window.__INITIAL_STATE__={"data":{"post":{"title":"Using the Zend framework Lucene library Part 2","path":"\u002Fusing-the-zend-framework-lucene-library-part-2\u002F","date":"4. July 2008","timeToRead":10,"tags":[{"id":"CodeIgniter","title":"CodeIgniter","path":"\u002Ftag\u002FCodeIgniter\u002F"},{"id":"PHP","title":"PHP","path":"\u002Ftag\u002FPHP\u002F"}],"description":"Note: Since this article was written I’ve moved to WordPress, and have not implemented the example code listed below.\nIn a previous article I talked about using a library from the Zend framework to create a site search. As you try out this functionality using the search box, above right.","content":"\u003Cp\u003E\u003Cstrong\u003ENote\u003C\u002Fstrong\u003E: Since this article was written I’ve moved to WordPress, and have not implemented the example code listed below.\u003C\u002Fp\u003E\n\u003Cp\u003EIn a previous article I talked about using a library from the Zend framework to create a site search. As you try out this functionality using the search box, above right.\u003C\u002Fp\u003E\n\u003Cp\u003EI never finished the article, so I'll explain here how I implemented this using CodeIgniter. I'll also detail how I built the 'quick results' tool (click in the search box).\u003C\u002Fp\u003E\n\u003Cp\u003EBelow is an example controller class that shows how I constructed the search index by pulling articles out of the database. My actual class calls security methods that require authentication before performing any of these methods. I left them out of the listing to keep it short and sweet. You will have to alter the code to allow for the difference in database schema, and to suit your intended available search criteria.\u003C\u002Fp\u003E\n\u003Cpre class=\"language-text\"\u003E\u003Ccode class=\"language-text\"\u003E&lt;?php\nclass Search extends Controller {\n\n    function Search()\n    {\n        parent::Controller();\n\n        \u002F\u002F Load Zend Lucene library.  See previous article.\n        $this-&gt;load-&gt;library(&#39;zend&#39;);\n        $this-&gt;zend-&gt;load( &#39;Zend\u002FSearch\u002FLucene&#39;);\n\n        \u002F\u002F Location of search index.  Used by all Search controller methods.\n        $this-&gt;search_index = APPPATH . &#39;search\u002Findex&#39;;\n    }\n\n    function reindex()\n    {\n        \u002F\u002F Create index.  Will delete any existing index.\n        $index = Zend_Search_Lucene::create($this-&gt;search_index);\n\n        \u002F\u002F Obtain all articles.\n        $query = $this-&gt;db-&gt;get(&#39;articles&#39;);\n\n        \u002F\u002F Loop through articles, adding an index for each one.\n        foreach ($query-&gt;result() as $article)\n        {\n            \u002F\u002F Create Lucene document for this article.\n            $doc = new Zend_Search_Lucene_Document();\n\n            \u002F\u002F Add required fields.\n            $doc-&gt;addField(Zend_Search_Lucene_Field::Text(&#39;title&#39;, $article-&gt;title));\n            $doc-&gt;addField(Zend_Search_Lucene_Field::Text(&#39;subtitle&#39;, $subtitle));\n            $doc-&gt;addField(Zend_Search_Lucene_Field::Text(&#39;category&#39;, $category_list));\n            $doc-&gt;addField(Zend_Search_Lucene_Field::Text(&#39;path&#39;, &#39;\u002Farticle\u002Fdisplay\u002F&#39; . $article-&gt;path));\n            $doc-&gt;addField(Zend_Search_Lucene_Field::UnStored(&#39;content&#39;, $article-&gt;summary . $article-&gt;text));\n\n            \u002F\u002F Add docuument to index.\n            $index-&gt;addDocument($doc);\n\n            echo &#39;Added &#39; . $item-&gt;title . &#39; to index.&lt;br \u002F&gt;&#39;;\n        }\n\n        $index-&gt;optimize();\n    }\n\n    function optimize()\n    {\n        $index = Zend_Search_Lucene::open($this-&gt;search_index);\n        $index-&gt;optimize();\n\n        echo &#39;&lt;p&gt;Index optimized.&lt;\u002Fp&gt;&#39;;\n    }\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003ETo utilise the index a result method is required:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-text\"\u003E\u003Ccode class=\"language-text\"\u003Efunction result()\n{\n    \u002F\u002F Create empty array, in case there are no results.\n    $data[&#39;results&#39;] = array();\n\n    \u002F\u002F If a search_query parameter has been posted, search the index.\n    if ($this-&gt;input-&gt;post(&#39;search_query&#39;))\n    {\n        $index = Zend_Search_Lucene::open($this-&gt;search_index);\n\n        \u002F\u002F Get results.\n        $data[&#39;results&#39;] = $index-&gt;find($this-&gt;input-&gt;post(&#39;search_query&#39;));\n    }\n\n    \u002F\u002F Load view, and populate with results.\n    $this-&gt;load-&gt;view(&#39;search_result_view&#39;, $data);\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EAnd, of course, a view is required to display the results:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-text\"\u003E\u003Ccode class=\"language-text\"\u003E&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;Search results&lt;\u002Ftitle&gt;\n&lt;\u002Fhead&gt;\n&lt;body&gt;\n\n&lt;h1&gt;Search results&lt;\u002Fh1&gt;\n\n&lt;?php if (empty($_POST[&#39;search_query&#39;])):?&gt;\n&lt;p&gt;No search query submitted.&lt;\u002Fp&gt;\n&lt;?php else:?&gt;\n    &lt;?php if (count($results)):?&gt;\n&lt;p&gt;&lt;?php echo count($results) ?&gt; result(s) returned for query: &lt;?php echo $_POST[&#39;search_query&#39;];?&gt;&lt;\u002Fp&gt;\n&lt;ul&gt;\n    &lt;?php foreach($results as $result):?&gt;\n    &lt;li&gt;&lt;?=anchor(site_url($result-&gt;path), $result-&gt;title);?&gt; (&lt;?php echo round($result-&gt;score, 2) * 100;?&gt;%)&lt;\u002Fli&gt;\n    &lt;?php endforeach;?&gt;\n&lt;\u002Ful&gt;\n    &lt;?php else:?&gt;\n&lt;p&gt;No results were returned for query: &lt;?php echo $_POST[&#39;search_query&#39;];?&gt;&lt;\u002Fp&gt;\n    &lt;?php endif;?&gt;\n&lt;?php endif;?&gt;\n\n&lt;\u002Fbody&gt;\n&lt;\u002Fhtml&gt;\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Ch2 id=\"20-thoughts-on-using-the-zend-framework-lucene-library-part-2\"\u003E\u003Ca href=\"#20-thoughts-on-using-the-zend-framework-lucene-library-part-2\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003E20 thoughts on “Using the Zend framework Lucene library Part 2”\u003C\u002Fh2\u003E\n\u003Ch3 id=\"jeff\"\u003E\u003Ca href=\"#jeff\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EJeff\u003C\u002Fh3\u003E\n\u003Cp\u003E\u003Cem\u003ENovember 14, 2008 at 8:07 am\u003C\u002Fem\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EGreat post! Keep it up.\u003C\u002Fp\u003E\n\u003Chr\u003E\n\u003Ch3 id=\"rob\"\u003E\u003Ca href=\"#rob\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003ERob\u003C\u002Fh3\u003E\n\u003Cp\u003E\u003Cem\u003EMarch 9, 2009 at 6:01 am\u003C\u002Fem\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EHi Andrew,\u003C\u002Fp\u003E\n\u003Cp\u003EMany thanks for these articles, after a little tweakage I managed to get it all going on a project I’m working on. (I’m pretty new to CI\u002FPHP\u002FApache having come from ASP\u002FVBScript\u002FIIS [Yuk, I know..])\u003C\u002Fp\u003E\n\u003Cp\u003EHowever, I have a question: At the moment, same as your tutorial, I’m searching on only one table in the db, a table called Items (news, events, careers) which is fine but I need to be able to index a number of other tables. What I’m mostly wondering about is how to set the link in the result, I presume the rest is just replicating the code I already have for indexing?\u003C\u002Fp\u003E\n\u003Cp\u003EHave you any insights, experience, wisdom, links? Any help would be greatly appreciated.\u003C\u002Fp\u003E\n\u003Cp\u003EThanks,\u003C\u002Fp\u003E\n\u003Cp\u003ERob.\u003C\u002Fp\u003E\n\u003Chr\u003E\n\u003Ch3 id=\"rob-1\"\u003E\u003Ca href=\"#rob-1\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003ERob\u003C\u002Fh3\u003E\n\u003Cp\u003E\u003Cem\u003EMarch 11, 2009 at 5:35 am\u003C\u002Fem\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EAndrew,\u003C\u002Fp\u003E\n\u003Cp\u003EMany thanks for your swift and insightful reply.. I haven’t had a chance to test it yet but your code and explanations make sense and have cleared up a lot for me.\u003C\u002Fp\u003E\n\u003Cp\u003EThanks again for your time, you’ve saved me a lot of mine!\u003C\u002Fp\u003E\n\u003Cp\u003ECheers!\u003C\u002Fp\u003E\n\u003Cp\u003ERob.\u003C\u002Fp\u003E\n\u003Chr\u003E\n\u003Ch3 id=\"zaw\"\u003E\u003Ca href=\"#zaw\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003Ezaw\u003C\u002Fh3\u003E\n\u003Cp\u003E\u003Cem\u003EMarch 13, 2009 at 9:42 am\u003C\u002Fem\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EIn the display result view page, when searching html file content the result will be long text.\nHow can I display only the synopsis of the long text?\nI want to show the parts of text in result that found the search terms.\u003C\u002Fp\u003E\n\u003Cp\u003Ee.g. in google result when I find the search term | zend framework sample |\u003C\u002Fp\u003E\n\u003Cp\u003EAkra?s DevNotes ? Tutorial: Getting Started with Zend Framework\nThe original tutorial for Zend Framework 1.0 is still available, ... Rob, Did you have a sample of using Zend call linux command ? how to do that? ...\u003C\u002Fp\u003E\n\u003Cp\u003EIn above e.g., Google show two parts of text. How can I do like this?\u003C\u002Fp\u003E\n\u003Chr\u003E\n\u003Ch3 id=\"zaw-1\"\u003E\u003Ca href=\"#zaw-1\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003Ezaw\u003C\u002Fh3\u003E\n\u003Cp\u003E\u003Cem\u003EMarch 14, 2009 at 3:28 pm\u003C\u002Fem\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EHi Andrew\u003C\u002Fp\u003E\n\u003Cp\u003EI mean in the result list I would like to show only the line near the search term found.\u003C\u002Fp\u003E\n\u003Cp\u003EI’m testing with zend frame sample code ZendFramework-1.7.6demosZendSearchLucenefeed-searchsearch-index.php\u003C\u002Fp\u003E\n\u003Cp\u003EAt line 41 of search-index.php, trim(substr($hit-\u003E$field,0,76)). It is only show the first 76 characters of result text.\u003C\u002Fp\u003E\n\u003Cp\u003EI’m afraid that the search term may not include within first 76 characters.\nI mean if the search term found at the postition of 100th character, I want to show the text near 100th character like google result.\u003C\u002Fp\u003E\n\u003Cp\u003Ethanks\u003C\u002Fp\u003E\n\u003Chr\u003E\n\u003Ch3 id=\"andy\"\u003E\u003Ca href=\"#andy\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EAndy\u003C\u002Fh3\u003E\n\u003Cp\u003E\u003Cem\u003EMarch 15, 2009 at 12:52 pm\u003C\u002Fem\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EHello Zaw\u003C\u002Fp\u003E\n\u003Cp\u003ETake a look at:\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ca href=\"http:\u002F\u002Fframework.zend.com\u002Fmanual\u002Fen\u002Fzend.search.lucene.searching.html#\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003Ehttp:\u002F\u002Fframework.zend.com\u002Fmanual\u002Fen\u002Fzend.search.lucene.searching.html#\u003C\u002Fa\u003E\nzend.search.lucene.searching.highlighting\u003C\u002Fp\u003E\n\u003Cp\u003EYou will need to store the content as a text field, so it can be used by the Zend Query Parser to highlight the returned text.\u003C\u002Fp\u003E\n\u003Cp\u003EThe main problem you will have, is restricting the amount of content returned, as you will not want the entire document, only the sentence(s) in which the highlighed search terms appear.\u003C\u002Fp\u003E\n\u003Cp\u003EI had a go quick on my site, and made it work, but did not get around to the final problem I’ve, er, highlighed.\u003C\u002Fp\u003E\n\u003Chr\u003E\n\u003Ch3 id=\"zaw-2\"\u003E\u003Ca href=\"#zaw-2\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EZaw\u003C\u002Fh3\u003E\n\u003Cp\u003E\u003Cem\u003EMay 13, 2009 at 4:38 am\u003C\u002Fem\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EHello\u003C\u002Fp\u003E\n\u003Cp\u003EThanks for your reply.\u003C\u002Fp\u003E\n\u003Cp\u003EI found a way to display search results as I want in the following link\n\u003Ca href=\"http:\u002F\u002Fwww.whatstyle.net\u002Farticles\u002F6\u002Fdisplaying_search_results_with_php\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003Ehttp:\u002F\u002Fwww.whatstyle.net\u002Farticles\u002F6\u002Fdisplaying_search_results_with_php\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EThis class can show the parts of content near search keyword.\nI want to integrate this class with zend lucene result.\nBut this chunk class require three parameters\u003C\u002Fp\u003E\n\u003Col\u003E\n\u003Cli\u003Ethe subject string,\u003C\u002Fli\u003E\n\u003Cli\u003Ea maximum amount of characters and\u003C\u002Fli\u003E\n\u003Cli\u003Ean array of search words.\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Cp\u003EHow can I get array of search words from zend lucene result?\nIf I query with wild card in lucene, the result hightlight text may vary depend of the content of file.\u003C\u002Fp\u003E\n\u003Cp\u003Ee.g. If I query like meth*, the result may include method, methodology, etc.\nI need to know which words are found in the file to use the chunk class.\u003C\u002Fp\u003E\n\u003Cp\u003EIs there a way to find the list of keywords that found for a search result?\u003C\u002Fp\u003E\n\u003Cp\u003EThanks\u003C\u002Fp\u003E\n\u003Chr\u003E\n\u003Ch3 id=\"junaid\"\u003E\u003Ca href=\"#junaid\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003Ejunaid\u003C\u002Fh3\u003E\n\u003Cp\u003E\u003Cem\u003EMay 16, 2009 at 12:13 pm\u003C\u002Fem\u003E\u003C\u002Fp\u003E\n\u003Cp\u003Ehi andrew,\ni have a problem while using your method code. i have only included exception .php file and Zend\u002FSearch folder in my application\u002Flibraries. i get an error\nMessage:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-text\"\u003E\u003Ccode class=\"language-text\"\u003ECI_Zend::require_once(Zend\u002FSearch\u002FLucene.php) [ci-zend.require-once]: failed to open stream: No such file or directory\n\nFilename: libraries\u002FZend.php\n\nLine Number: 35\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003Eif u can please help me .\u003C\u002Fp\u003E\n\u003Chr\u003E\n\u003Ch3 id=\"junaid-1\"\u003E\u003Ca href=\"#junaid-1\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003Ejunaid\u003C\u002Fh3\u003E\n\u003Cp\u003E\u003Cem\u003EMay 17, 2009 at 4:18 am\u003C\u002Fem\u003E\u003C\u002Fp\u003E\n\u003Cp\u003Ehi,\nthanks for your reply.\u003C\u002Fp\u003E\n\u003Cpre class=\"language-text\"\u003E\u003Ccode class=\"language-text\"\u003E\u002Fsystem\u002Fapplication\u002Flibraries\u002FZend\u002FSearch\u002FLucene.php does exist.\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003Ei m on windows with XAMPP. i m also using CI 1.71. but i read on codeigniter\u002Fforums that u have to write\u003C\u002Fp\u003E\n\u003Cpre class=\"language-text\"\u003E\u003Ccode class=\"language-text\"\u003E$this-&gt;load-&gt;library(‘zend’);\n$this-&gt;zend-&gt;load( ‘Zend\u002FSearch\u002FLucene’);\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003Einstead of\u003C\u002Fp\u003E\n\u003Cpre class=\"language-text\"\u003E\u003Ccode class=\"language-text\"\u003E$this-&gt;load-&gt;library(‘zend’, ‘Zend\u002FSearch\u002FLucene’);\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003Ein the controller.\u003C\u002Fp\u003E\n\u003Cp\u003Ealso i have upgraded log_threshold to 4. i have checked the log and classes are successfully initialized and loaded...\u003C\u002Fp\u003E\n\u003Cp\u003Ei have changed the reindex function according to my database. i have a “event” table in my DB. and it has a “Event_name” field. so reindex looks like\u003C\u002Fp\u003E\n\u003Cpre class=\"language-text\"\u003E\u003Ccode class=\"language-text\"\u003Efunction reindex()\n{\n    \u002F\u002F Create index. Will delete any existing index.\n    $this-&gt;create();\n\n    \u002F\u002F Obtain all events.\n    $query = $this-&gt;db-&gt;get(‘event’);\n\n    \u002F\u002F Loop through articles, adding an index for each one.\n    foreach ($query-&gt;result() as $event)\n    {\n        \u002F\u002F Create Lucene document for this article.\n        $doc = new Zend_Search_Lucene_Document();\n\n        \u002F\u002F Add required fields.\n        $doc-&gt;addField(Zend_Search_Lucene_Field::Text(‘eventname’, $event-&gt;Event_name));\n\n        $index-&gt;addDocument($doc);\n\n        echo ‘Added ‘ . $item-&gt;eventname . ‘ to index.\n        ‘;\n    }\n\n    $index-&gt;optimize();\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003Eand i get a long long error\u003C\u002Fp\u003E\n\u003Cpre class=\"language-text\"\u003E\u003Ccode class=\"language-text\"\u003EFatal error: Uncaught exception ‘Zend_Search_Lucene_Exception’ with message ‘Index doesn’t exists in the specified directory.’ in C:xampphtdocscodeignitersystemapplicationlibrariesZendSearchLucene.php:547 Stack trace: #0 C:xampphtdocscodeignitersystemapplicationlibrariesZendSearchLucene.php(214): Zend_Search_Lucene-&gt;__construct(‘C:xampphtdocs…’, false) #1 C:xampphtdocscodeignitersystemapplicationcontrollerssearch.php(70): Zend_Search_Lucene::open(‘C:xampphtdocs…’) #2 C:xampphtdocscodeignitersystemcodeigniterCodeIgniter.php(233): Search-&gt;result() #3 C:xampphtdocscodeigniterindex.php(115): require_once(‘C:xampphtdocs…’) #4 {main} thrown in C:xampphtdocscodeignitersystemapplicationlibrariesZendSearchLucene.php on line 547\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Chr\u003E\n\u003Ch3 id=\"andy-1\"\u003E\u003Ca href=\"#andy-1\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EAndy\u003C\u002Fh3\u003E\n\u003Cp\u003E\u003Cem\u003EMay 17, 2009 at 4:19 am\u003C\u002Fem\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EIt looks like an error in my code. I’ve changed the way the library is loaded, as you suggested. Removed the create method, and have created the index directly within the reindex method.\u003C\u002Fp\u003E\n\u003Chr\u003E\n\u003Ch3 id=\"john\"\u003E\u003Ca href=\"#john\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003Ejohn\u003C\u002Fh3\u003E\n\u003Cp\u003E\u003Cem\u003EMay 21, 2009 at 6:51 am\u003C\u002Fem\u003E\u003C\u002Fp\u003E\n\u003Cpre class=\"language-text\"\u003E\u003Ccode class=\"language-text\"\u003EA PHP Error was encountered\nSeverity: Notice\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EI got this error when i try ur code. i spend few days but i still can’t fix it. please help\u003C\u002Fp\u003E\n\u003Cpre class=\"language-text\"\u003E\u003Ccode class=\"language-text\"\u003EMessage: iconv_strlen() [function.iconv-strlen]: Wrong charset, conversion from `’ to `UCS-4LE’ is not allowed\n\nFilename: Search\u002FQueryLexer.php\n\nLine Number: 343\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Chr\u003E\n\u003Ch3 id=\"andy-2\"\u003E\u003Ca href=\"#andy-2\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EAndy\u003C\u002Fh3\u003E\n\u003Cp\u003E\u003Cem\u003EMay 21, 2009 at 6:55 am\u003C\u002Fem\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EYou appear to be having a problem with the Zend library class rather than my code.\u003C\u002Fp\u003E\n\u003Cp\u003EA quick Google brings something that might help.\u003C\u002Fp\u003E\n\u003Chr\u003E\n\u003Ch3 id=\"yeiniel\"\u003E\u003Ca href=\"#yeiniel\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003Eyeiniel\u003C\u002Fh3\u003E\n\u003Cp\u003E\u003Cem\u003EFebruary 10, 2010 at 11:47 am\u003C\u002Fem\u003E\u003C\u002Fp\u003E\n\u003Cp\u003Ethere is no problem width the code, the problem here is that the search index is not created. you need to create the index first. see Zend framework documentation to acomplish that\u003C\u002Fp\u003E\n\u003Chr\u003E\n\u003Ch3 id=\"noel\"\u003E\u003Ca href=\"#noel\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003Enoel\u003C\u002Fh3\u003E\n\u003Cp\u003E\u003Cem\u003EMay 14, 2010 at 4:50 am\u003C\u002Fem\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EThis works fine on my local, but as soon as i put it on my live server i get:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-text\"\u003E\u003Ccode class=\"language-text\"\u003EA PHP Error was encountered\n\nSeverity: Warning\n\nMessage: CI_Zend::require_once(Zend\u002FSearch\u002FLucene.php) [ci-zend.require-once]: failed to open stream: No such file or directory\n\nFilename: libraries\u002FZend.php\n\nLine Number: 51\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Chr\u003E\n\u003Ch3 id=\"brian\"\u003E\u003Ca href=\"#brian\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EBrian\u003C\u002Fh3\u003E\n\u003Cp\u003E\u003Cem\u003EJanuary 3, 2011 at 12:58 pm\u003C\u002Fem\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EThank you, I have the Lucene searching within the CI framework now, but do you know of a way to paginate the results? The CI Library is fine for database queries, but I am not sure how to implement pagination with the Lucene indexes...\u003C\u002Fp\u003E\n\u003Chr\u003E\n\u003Ch3 id=\"tom\"\u003E\u003Ca href=\"#tom\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003Etom\u003C\u002Fh3\u003E\n\u003Cp\u003E\u003Cem\u003EJanuary 3, 2011 at 12:59 pm\u003C\u002Fem\u003E\u003C\u002Fp\u003E\n\u003Cp\u003Epls help me...\u003C\u002Fp\u003E\n\u003Cpre class=\"language-text\"\u003E\u003Ccode class=\"language-text\"\u003EFatal error: Class ‘Zend_Search_Lucene’ not found\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Chr\u003E\n\u003Ch3 id=\"ria\"\u003E\u003Ca href=\"#ria\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003Eria\u003C\u002Fh3\u003E\n\u003Cp\u003E\u003Cem\u003EMarch 19, 2011 at 1:54 pm\u003C\u002Fem\u003E\u003C\u002Fp\u003E\n\u003Cp\u003Every helpful resource. thanks for sharing.\u003C\u002Fp\u003E\n\u003Chr\u003E\n\u003Ch3 id=\"annony\"\u003E\u003Ca href=\"#annony\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003Eannony\u003C\u002Fh3\u003E\n\u003Cp\u003E\u003Cem\u003EAugust 8, 2011 at 9:57 am\u003C\u002Fem\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EIndex doesnâ€™t exists in the specified directory::\u003C\u002Fp\u003E\n\u003Cp\u003EI work on windows, and may be its due to file permission. Anyway, I tried using create first and then open . See,\n\u003Ca href=\"http:\u002F\u002Fframework.zend.com\u002Fmanual\u002F1.11\u002Fen\u002Flearning.lucene.index-opening.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003Ehttp:\u002F\u002Fframework.zend.com\u002Fmanual\u002F1.11\u002Fen\u002Flearning.lucene.index-opening.html\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EOnce created , I removed create statement, and worked fine\u003C\u002Fp\u003E\n\u003Chr\u003E\n\u003Ch3 id=\"leonardo-siagian\"\u003E\u003Ca href=\"#leonardo-siagian\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003ELeonardo Siagian\u003C\u002Fh3\u003E\n\u003Cp\u003E\u003Cem\u003EMarch 10, 2014 at 5:18 am\u003C\u002Fem\u003E\u003C\u002Fp\u003E\n\u003Cp\u003Ehow if i use category in searching? it’s mean, i select firstly category before searching.\u003C\u002Fp\u003E\n\u003Cp\u003Ei try this code:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-text\"\u003E\u003Ccode class=\"language-text\"\u003E$category= $this-&gt;input-&gt;post(‘category’);\n$keyword =strtolower($this-&gt;input-&gt;post(‘keyword’));\n\n$query = new Zend_Search_Lucene_Search_Query_MultiTerm();\n$query-&gt;addTerm(new Zend_Search_Lucene_Index_Term($keyword,’content_article’),true);\n$query-&gt;addTerm(new Zend_Search_Lucene_Index_Term($category,category_article’), true);\n$data[‘results’] = $index-&gt;find($query);\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003Eaccording that code, i just can use single word as the keyword, and can not use(find) more than one word (phrase).\u003C\u002Fp\u003E\n\u003Cp\u003Eanybody can solve my problem? thanks ...\u003C\u002Fp\u003E\n\u003Chr\u003E\n\u003Ch3 id=\"kopano-unity\"\u003E\u003Ca href=\"#kopano-unity\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EKopano Unity\u003C\u002Fh3\u003E\n\u003Cp\u003E\u003Cem\u003EJuly 22, 2014 at 1:41 pm\u003C\u002Fem\u003E\nHi Jeff\u003C\u002Fp\u003E\n\u003Cp\u003EThanks for the post first of all it is very understandable, but I keep coming across an error in my code hope you can help me here is my stackoverflow question link \u003Ca href=\"http:\u002F\u002Fstackoverflow.com\u002Fquestions\u002F24887645\u002Fzend-lucene-search-content-inside-a-datebase-in-html-on-a-live-website-404-er\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003Ehttp:\u002F\u002Fstackoverflow.com\u002Fquestions\u002F24887645\u002Fzend-lucene-search-content-inside-a-datebase-in-html-on-a-live-website-404-er\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Chr\u003E\n","cover_image":null}},"context":{}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script><script src="/assets/js/app.be40519f.js" defer></script><script src="/assets/js/page--src-templates-post-vue.178f401d.js" defer></script>
  </body>
</html>