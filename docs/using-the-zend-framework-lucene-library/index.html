<!DOCTYPE html>
<html data-html-server-rendered="true" lang="en" data-vue-tag="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-5KQZ3N');</script>
    <!-- End Google Tag Manager -->
    <title>Using the Zend framework Lucene library - Andrew Rowland</title><meta name="gridsome:hash" content="7a4543962a9c9fdc79942c2ec9ee69f3625333b8"><meta data-vue-tag="ssr" charset="utf-8"><meta data-vue-tag="ssr" name="generator" content="Gridsome v0.7.12"><meta data-vue-tag="ssr" data-key="viewport" name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta data-vue-tag="ssr" data-key="format-detection" name="format-detection" content="telephone=no"><meta data-vue-tag="ssr" data-key="description" name="description" content="I only want to help you"><meta data-vue-tag="ssr" name="description" content="I know, only a few articles in, so I don&#x27;t really need a site search function. But you never know, I might actually keep writing (even if no-one is reading) and so I&#x27;ve been looking around for some solutions."><link data-vue-tag="ssr" rel="icon" href="data:,"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="16x16" href="/assets/static/favicon.ce0531f.ac64c76abcd4710b88c6efd7d6aa8915.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="32x32" href="/assets/static/favicon.ac8d93a.ac64c76abcd4710b88c6efd7d6aa8915.png"><link rel="preload" href="/assets/css/0.styles.7169b5b9.css" as="style"><link rel="preload" href="/assets/js/app.6123b84a.js" as="script"><link rel="preload" href="/assets/js/page--src-templates-post-vue.61f72de3.js" as="script"><link rel="prefetch" href="/assets/js/page--src-pages-404-vue.fb0b6ddc.js"><link rel="prefetch" href="/assets/js/page--src-pages-index-vue.f33899c6.js"><link rel="prefetch" href="/assets/js/page--src-templates-redirect-vue.00797293.js"><link rel="prefetch" href="/assets/js/page--src-templates-tag-vue.4714354b.js"><link rel="stylesheet" href="/assets/css/0.styles.7169b5b9.css"><noscript data-vue-tag="ssr"><style>.g-image--loading{display:none;}</style></noscript>
  </head>
  <body >
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5KQZ3N"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    <script>
      // Add dark / light detection that runs before Vue.js load. Borrowed from overreacted.io
      (function() {
        window.__onThemeChange = function() {};
        function setTheme(newTheme) {
          window.__theme = newTheme;
          preferredTheme = newTheme;
          document.body.setAttribute('data-theme', newTheme);
          window.__onThemeChange(newTheme);
        }

        var preferredTheme;
        try {
          preferredTheme = localStorage.getItem('theme') || 'dark';
        } catch (err) { }

        window.__setPreferredTheme = function(newTheme) {
          setTheme(newTheme);
          try {
            localStorage.setItem('theme', newTheme);
          } catch (err) {}
        }

        var darkQuery = window.matchMedia('(prefers-color-scheme: dark)');
        darkQuery.addListener(function(e) {
          window.__setPreferredTheme(e.matches ? 'dark' : 'light')
        });

        setTheme(preferredTheme || (darkQuery.matches ? 'dark' : 'light'));
      })();
    </script>

    <div id="app" data-server-rendered="true"><header class="header"><div class="header__left"><a href="/" class="logo active"><span class="logo__text">
    ← Andrew Rowland
  </span></a></div><div class="header__right"><button role="button" aria-label="Toggle dark/light" class="toggle-theme"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg></button></div></header><main class="main"><div class="post-title"><h1 class="post-title__text">
      Using the Zend framework Lucene library
    </h1><div class="post-meta">
   Posted 23. May 2008.
   <strong>6 min read.</strong></div></div><div class="post content-box"><div class="post__header"><!----></div><div class="post__content"><p>I know, only a few articles in, so I don't really need a site search function. But you never know, I might actually keep writing (even if no-one is reading) and so I've been looking around for some solutions.</p>
<p>I've looked at a few, for example: <a href="http://www.swish-e.org/" target="_blank" rel="nofollow noopener noreferrer">Swish-e</a>, and <a href="http://www.sphider.eu/" target="_blank" rel="nofollow noopener noreferrer">Sphider</a>. Nothing really float my boat, until I had a look at the Zend Framework. It's another MVC based PHP framework, though it looks a little heavier than CodeIgniter. The documentation is not as good either, but it did have a Lucene library.</p>
<p>I found a way of incorporating a Zend framework class as a CodeIgniter library here by Fred Wu. Nice work Fred, thanks.</p>
<p>As Fred suggests, copy the Zend folder from the framework library to application/libraries/ in your CodeIgniter installation. I discovered that I only needed the Zend/Search folder, and the Zend/Exception.php file.</p>
<p>Continuing Fred's instructions, create a Zend.php library file with the code posted on his blog page. Now we can get started.</p>
<p>Create a directory for the index. In my example code I created a directory called application/search. Now we can create a controller called search.php that will contain some simple create, and search methods:</p>
<pre class="language-text"><code class="language-text">&lt;?php
class Search extends MY_Controller {

    function Search()
    {
        parent::MY_Controller();

        $this-&gt;load-&gt;library(&#39;zend&#39;);
        $this-&gt;zend-&gt;load(&#39;Zend/Search/Lucene&#39;);
    }

    function create()
    {
        // This method should be authenticated, or removed once the index is created.
        // TODO: Some sort of site spidering process to add the entire site to the index.

        $index = Zend_Search_Lucene::create(APPPATH . &#39;search/index&#39;);

            $doc = Zend_Search_Lucene_Document_Html::loadHTMLFile(&#39;http://www.andrewrowland.com&#39;);

            $index-&gt;addDocument($doc);

        echo &#39;&lt;p&gt;Index created&lt;/p&gt;&#39;;
    }

    function index()
    {
        // TODO: Create an index method that contains a search form.
    }

    function result()
    {
        // Hardcoded search result example.
        // TODO: Take a user search query, and expand the result summary

        $index = Zend_Search_Lucene::open(APPPATH . &#39;search/index&#39;);

        $data[&#39;results&#39;] = $index-&gt;find(&#39;andrew&#39;);

        $this-&gt;load-&gt;view(&#39;search_result_view&#39;, $data);
    }
}
?&gt;</code></pre>
<p>I didn't bother with the create index view, as all that is needed is a simple message explaining that the index is created. The search_result_view.php view will display the results:</p>
<pre class="language-text"><code class="language-text">&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Search example&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;

&lt;ul&gt;
    &lt;?php foreach($results as $result):?&gt;
    &lt;li&gt;&lt;?php echo $result-&gt;title;?&gt;&lt;/li&gt;
    &lt;?php endforeach;?&gt;
&lt;/ul&gt;

&lt;/body&gt;
&lt;/html&gt;</code></pre>
<p>As you can see, I've noted a few TODO's. Might add a bit of jQuery action (because I'm worth it) in there to. Weekend coming up, so I'll expand on this next week.</p>
<h2 id="13-thoughts-on-using-the-zend-framework-lucene-library"><a href="#13-thoughts-on-using-the-zend-framework-lucene-library" aria-hidden="true"><span class="icon icon-link"></span></a>13 thoughts on “Using the Zend framework Lucene library”</h2>
<h3 id="alex"><a href="#alex" aria-hidden="true"><span class="icon icon-link"></span></a>alex</h3>
<p><em>May 17, 2009 at 2:36 pm</em></p>
<p>what do i have to wrote in the code where it is the comment “ro do”?</p>
<hr>
<h3 id="andy"><a href="#andy" aria-hidden="true"><span class="icon icon-link"></span></a>Andy</h3>
<p><em>May 17, 2009 at 3:07 pm</em></p>
<p>The index method doesn’t have to do much really, apart from load the view for this method.</p>
<p>The view will consist of a form to post your search term. This will post to your result method, which is currently hardcoded with the term ‘Andrew’. You would change this to take the value from the form field.</p>
<p>Clear? If not, I’ll amend the example.</p>
<hr>
<h3 id="suresh"><a href="#suresh" aria-hidden="true"><span class="icon icon-link"></span></a>Suresh</h3>
<p><em>June 30, 2009 at 11:48 am</em></p>
<p>Hi Andy,</p>
<p>Could you please post the content for Zend.php library file( CI ). As the link to Fred Wu site is down.</p>
<p>Thanks for coming up with this search article.</p>
<hr>
<h3 id="andy-1"><a href="#andy-1" aria-hidden="true"><span class="icon icon-link"></span></a>Andy</h3>
<p><em>June 30, 2009 at 11:56 am</em></p>
<p>No problem, you can obtain it here. I don’t know if he ever altered it, but this is the version of the code I use on my site.</p>
<hr>
<h3 id="peter"><a href="#peter" aria-hidden="true"><span class="icon icon-link"></span></a>Peter</h3>
<p><em>August 7, 2009 at 6:28 pm</em></p>
<p>Hi,</p>
<p>I followed your instruction and got Lucene for Zend to work in Code Igniter on my home server. Unfortunately after i copied it over to the hosted staging server i get these errors whenever i try to execute any Lucene methods:</p>
<pre class="language-text"><code class="language-text">A PHP Error was encountered
Severity: Notice
Message: Hex number is too big: 0x100000000
Filename: Storage/File.php
Line Number: 268</code></pre>
<p>Do you have any idea what could be wrong?</p>
<p>Thanks</p>
<p>Peter</p>
<hr>
<h3 id="asif"><a href="#asif" aria-hidden="true"><span class="icon icon-link"></span></a>Asif</h3>
<p><em>August 7, 2009 at 6:30 pm</em></p>
<p>will it crawl the whole domain going through each link and create the search content?</p>
<p>if that is the case then how can i generate the url link with the search keyword in the search result display?</p>
<hr>
<h3 id="andy-2"><a href="#andy-2" aria-hidden="true"><span class="icon icon-link"></span></a>Andy</h3>
<p><em>August 7, 2009 at 6:47 pm</em></p>
<p>This example is just a test case that indexes the home page of my site. A more complete example can be found in the next part of this article.</p>
<hr>
<h3 id="nir-gavish"><a href="#nir-gavish" aria-hidden="true"><span class="icon icon-link"></span></a>Nir Gavish</h3>
<p><em>September 13, 2009 at 2:29 am</em></p>
<p>i’ve seen much talk about using lucene as an indexer, but what about using it as the sole data repository? anyone ever try it? how did it preform? how reliable was it? thanks</p>
<hr>
<h3 id="junaid"><a href="#junaid" aria-hidden="true"><span class="icon icon-link"></span></a>junaid</h3>
<p><em>April 10, 2010 at 4:12 am</em></p>
<p>Hi,
a month ago i sent you comments regarding your article about integration of zend lucene with CI. I have got out of the errors as i reported to you before. but got into some new ones. Now i want to search html docs in my application…every query i m submitting in search is returning no results..when there actually are. i am sending you the code..plz if you can have a look at it and point out my mistake.</p>
<p>Controller</p>
<pre class="language-text"><code class="language-text">&lt;?php
class Search extends Controller {
    function Search()
    {
        parent::Controller();

        $this-&gt;load-&gt;library(‘zend’);
        $this-&gt;zend-&gt;load(‘Zend/Search/Lucene’);
        $this-&gt;search_index = APPPATH . ‘search/index’;
    }

    function create()
    {
        Zend_Search_Lucene::create($this-&gt;search_index);
        $doc = Zend_Search_Lucene_Document_Html::loadHTMLFile(’http://localhost/codeigniter/index.php/universities/home’);
        $doc-&gt;addField(Zend_Search_Lucene_Field::UnIndexed(‘url’, ‘http://localhost/codeigniter/index.php/universities/home’));

        $index-&gt;addDocument($doc);
        $index-&gt;commit();

        $index-&gt;optimize();
    }

    function optimize()
    {
        $this-&gt;login();

        $index = Zend_Search_Lucene::open($this-&gt;search_index);
        $index-&gt;optimize();

        echo ‘

        Index optimized.

        ‘;
    }

    function result()
    {
        // Create empty array, in case there are no results.
        $data[‘results’] = array();

        // If a search_query parameter has been posted, search the index.
        if ($this-&gt;input-&gt;post(‘search_query’))

        {
            $index = Zend_Search_Lucene::open($this-&gt;search_index);
            $data[‘results’] = $index-&gt;find($this-&gt;input-&gt;post(‘search_query’));
        }
        // Load view, and populate with results.
        $this-&gt;load-&gt;view(‘search/search_result’, $data);
    }
}
?&gt;</code></pre>
<p>and at search_result view i get every time “No results were returned for query: a”.</p>
<p>can u figure aut my mistake plz.</p>
<hr>
<h3 id="jesmar"><a href="#jesmar" aria-hidden="true"><span class="icon icon-link"></span></a>Jesmar</h3>
<p><em>February 8, 2011 at 10:28 am</em></p>
<p>HELLO..i have a problem in my ordering system…I have an error on my controller…Fatal error: <code class="language-text">Call to a member function result() on a non-object in C:xampphtdocscifofb1projectsystemapplicationcontrollerscuser.php on line 210</code>…pls help me</p>
<hr>
<h3 id="noor"><a href="#noor" aria-hidden="true"><span class="icon icon-link"></span></a>Noor</h3>
<p><em>January 8, 2015 at 7:27 am</em></p>
<p>I downloaded the latest Zend framework release ‘ZendFramework-2.3.3.zip’ form site <a href="http://framework.zend.com/downloads" target="_blank" rel="nofollow noopener noreferrer">http://framework.zend.com/downloads</a>, but I did not find the folder “Search” in path “Zend/Search/Lucene” !! from where I can get it?</p>
<hr>
<h3 id="noor-1"><a href="#noor-1" aria-hidden="true"><span class="icon icon-link"></span></a>Noor</h3>
<p><em>January 8, 2015 at 8:18 am</em></p>
<p>Ok, I discover the problem, zf2 put zendSearch as an optional library, so I have to download it alone</p>
<hr>
<h3 id="noor-2"><a href="#noor-2" aria-hidden="true"><span class="icon icon-link"></span></a>Noor</h3>
<p><em>January 8, 2015 at 11:08 am</em></p>
<p>following your steps, the search works for the previous version of zf1., but right now I want to work with zf2.
I put the folder ZendSearch under librariy/zend, and I have chnaged the links to look like this:</p>
<pre class="language-text"><code class="language-text">$this-&gt;load-&gt;library(‘zend’);
$this-&gt;zend-&gt;load(‘Zend/ZendSearch/Lucene/Lucene’);</code></pre>
<p>But unfortunately nothing works ?? what is wrong ?</p>
<hr>
</div><div class="post__footer"><div class="post-tags"><a href="/tag/CodeIgniter/" class="post-tags__link"><span>#</span> CodeIgniter
		</a><a href="/tag/PHP/" class="post-tags__link"><span>#</span> PHP
		</a></div></div></div><div class="post-comments"><div class="comments"></div></div><div class="author post-author"><img alt="Author image" src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 180 180' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-79abe12977319e63670ceacd51dd8a4b'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='5'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-79abe12977319e63670ceacd51dd8a4b)' width='180' height='180' xlink:href='data:image/png%3bbase64%2c/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCABAAEADASIAAhEBAxEB/8QAGwAAAgMBAQEAAAAAAAAAAAAABgcDBAUCAAj/xAA2EAACAQMCBAUCBAMJAAAAAAABAgMABBEFEgYhMUETFCJRYYGRMkJxsRUjQwckUlOSocHh8P/EABoBAAIDAQEAAAAAAAAAAAAAAAMEAgUGAQD/xAAiEQACAgIDAAMAAwAAAAAAAAABAgADBBESITETMkFRUmH/2gAMAwEAAhEDEQA/AK0Gpp3NaMGpxcvWKR68V3I6Qp/qNSpxbddoo/uavzwP7ALYB%2bR8w6pD3kFXodVg/wAYpDWPEep3MgWKKIfJzyogtLe8uWDXVxOT7KxVR9BSeRdVV6Y9jVtd9Vjmi1iAf1BVuPWbYdZBSgNtd2mXinmIx%2bFiSP8AesDUtf1mylCtJHsb8LbP%2b%2btQpau/6mEuU0dsvU%2bh01q2/wAwVMuvWg/qCvmccUay6H%2b8IueWQnSoBrusH8Wo3GfYAUU4v%2bwIyk/rBKKEsnpjYnufDNTrbkc/V9gKopMXX8bL7hTit7gSxsrniexj1CHxoHYqUfmuSDgkVNrAiltb1EUTkwXfsJ%2bDbBXXcycyM02dC0qIwjCBnIoJ/ggs%2bJzbWlzLbWpIYQx4KOh5cs9OnaiTUJNZEiraDytui8goyzcuWc1mb7BY/In2X9G604gTensU2srQ4YdsUvOPrCNdLmfZtKMrAgc%2buDWrqvE/EECmOOO0kgEiQtO6sHBI9RA6EDkP1oY1u%2b1K70uSC6hQO7D%2bbk8hnJPM47UfDYrapncluVTAwQTwWwi5L%2bzEZ/erHlpw%2bFs5Xj6DPpyf1zUwRlRWDAY6kSxjNeW%2b3QSALNKg6%2bE4Uj26jn9K1Psz2tezDjt4nw0YAI7bQR96ns7g2s8UsLL40TB1b5FCFlqTxPi43PH3OeYol0K5OoNMI7Vo4EGQ5Oct7UuuTTYP4kSjodiMnRtcudZ16zlvIoIp1UACEnaBnPPPemv56J7X1Ebscl6/ekrpkvlLvzcrB2ib%2bYoAHowOYpk6XMLiziEZVnUblBOdw%2bcfFZjLTi/XQl5hXc17Pc4vPBigm8zHJI7qGQgct3sR2FDP9oUlv/AUtlIUzsuWRc47mjDiK6tptOeKOwkgutuPFjnYqnzg0s9X1Q39wDbBPBjyqFsnce7f%2b9qYwKi1y78ELmWlaiP0wesNLVAQqM2fzFcCr1rowLEyTMqkcwMYNT%2bcnGAQucflWozqUgk27JmPydo%2b1an5UUdSgCExfaPw1dX6iSQeBD2Zhlj%2bgpkaTYxwaawRRE0C7ACM8uh5fQHPzU6afJGztEq7ipySG6fBB5dv2qNFaORAno3rtdeqnqcN8nlVGAF8k2JaSW8ckURmhZjOhO/aCwIJ5ZPatXh7WBYTvJtZ7V2ICJgNH7deo%2bKpRlUjaOEgq4AZtp6g5OfrgCqF1blpJH2oi4VmELkdu/vzHfpQ7EFg0Z2p2rbawm4s4kgm02ZLWO5FwQUI8NgFz3JpaXV1Laadb4O4lih5de/X61rh5JDcDxnV4xuYE8zyzn9qw%2bIIvN27ywJKu3JTxGyygdj2yftXqKxUdrGbLzaumE9BrLbQuNo6DHLFcX1%2b7gEy%2b4wTQ5FeBgBIeZ/MB/xXE1xzG71D4pv5eoKf/9k=' /%3e%3c/svg%3e" width="180" data-src="/assets/static/author.e6b6009.01fea4a6eb109fed65874b88d6ddc592.png" data-srcset="/assets/static/author.e6b6009.01fea4a6eb109fed65874b88d6ddc592.png 180w" data-sizes="(max-width: 180px) 100vw, 180px" class="author__image g-image g-image--lazy g-image--loading"><noscript><img src="/assets/static/author.e6b6009.01fea4a6eb109fed65874b88d6ddc592.png" class="author__image g-image g-image--loaded" width="180" alt="Author image"></noscript><!----><p class="author__intro">
		I only want to help you...
	</p><p class="author__links"><a href="//www.linkedin.com/in/hashbang/">LinkedIn</a><a href="//twitter.com/andyjrowland">Twitter</a><a href="//github.com/ajrowland">GitHub</a></p></div></main><footer class="footer"><span class="footer__copyright">Copyright © 2020. </span><span class="footer__links"></span></footer></div>
    <script>window.__INITIAL_STATE__={"data":{"post":{"title":"Using the Zend framework Lucene library","path":"\u002Fusing-the-zend-framework-lucene-library\u002F","date":"23. May 2008","timeToRead":6,"tags":[{"id":"CodeIgniter","title":"CodeIgniter","path":"\u002Ftag\u002FCodeIgniter\u002F"},{"id":"PHP","title":"PHP","path":"\u002Ftag\u002FPHP\u002F"}],"description":"I know, only a few articles in, so I don't really need a site search function. But you never know, I might actually keep writing (even if no-one is reading) and so I've been looking around for some solutions.","content":"\u003Cp\u003EI know, only a few articles in, so I don't really need a site search function. But you never know, I might actually keep writing (even if no-one is reading) and so I've been looking around for some solutions.\u003C\u002Fp\u003E\n\u003Cp\u003EI've looked at a few, for example: \u003Ca href=\"http:\u002F\u002Fwww.swish-e.org\u002F\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003ESwish-e\u003C\u002Fa\u003E, and \u003Ca href=\"http:\u002F\u002Fwww.sphider.eu\u002F\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003ESphider\u003C\u002Fa\u003E. Nothing really float my boat, until I had a look at the Zend Framework. It's another MVC based PHP framework, though it looks a little heavier than CodeIgniter. The documentation is not as good either, but it did have a Lucene library.\u003C\u002Fp\u003E\n\u003Cp\u003EI found a way of incorporating a Zend framework class as a CodeIgniter library here by Fred Wu. Nice work Fred, thanks.\u003C\u002Fp\u003E\n\u003Cp\u003EAs Fred suggests, copy the Zend folder from the framework library to application\u002Flibraries\u002F in your CodeIgniter installation. I discovered that I only needed the Zend\u002FSearch folder, and the Zend\u002FException.php file.\u003C\u002Fp\u003E\n\u003Cp\u003EContinuing Fred's instructions, create a Zend.php library file with the code posted on his blog page. Now we can get started.\u003C\u002Fp\u003E\n\u003Cp\u003ECreate a directory for the index. In my example code I created a directory called application\u002Fsearch. Now we can create a controller called search.php that will contain some simple create, and search methods:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-text\"\u003E\u003Ccode class=\"language-text\"\u003E&lt;?php\nclass Search extends MY_Controller {\n\n    function Search()\n    {\n        parent::MY_Controller();\n\n        $this-&gt;load-&gt;library(&#39;zend&#39;);\n        $this-&gt;zend-&gt;load(&#39;Zend\u002FSearch\u002FLucene&#39;);\n    }\n\n    function create()\n    {\n        \u002F\u002F This method should be authenticated, or removed once the index is created.\n        \u002F\u002F TODO: Some sort of site spidering process to add the entire site to the index.\n\n        $index = Zend_Search_Lucene::create(APPPATH . &#39;search\u002Findex&#39;);\n\n            $doc = Zend_Search_Lucene_Document_Html::loadHTMLFile(&#39;http:\u002F\u002Fwww.andrewrowland.com&#39;);\n\n            $index-&gt;addDocument($doc);\n\n        echo &#39;&lt;p&gt;Index created&lt;\u002Fp&gt;&#39;;\n    }\n\n    function index()\n    {\n        \u002F\u002F TODO: Create an index method that contains a search form.\n    }\n\n    function result()\n    {\n        \u002F\u002F Hardcoded search result example.\n        \u002F\u002F TODO: Take a user search query, and expand the result summary\n\n        $index = Zend_Search_Lucene::open(APPPATH . &#39;search\u002Findex&#39;);\n\n        $data[&#39;results&#39;] = $index-&gt;find(&#39;andrew&#39;);\n\n        $this-&gt;load-&gt;view(&#39;search_result_view&#39;, $data);\n    }\n}\n?&gt;\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EI didn't bother with the create index view, as all that is needed is a simple message explaining that the index is created. The search_result_view.php view will display the results:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-text\"\u003E\u003Ccode class=\"language-text\"\u003E&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;Search example&lt;\u002Ftitle&gt;\n&lt;\u002Fhead&gt;\n&lt;body&gt;\n\n&lt;ul&gt;\n    &lt;?php foreach($results as $result):?&gt;\n    &lt;li&gt;&lt;?php echo $result-&gt;title;?&gt;&lt;\u002Fli&gt;\n    &lt;?php endforeach;?&gt;\n&lt;\u002Ful&gt;\n\n&lt;\u002Fbody&gt;\n&lt;\u002Fhtml&gt;\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EAs you can see, I've noted a few TODO's. Might add a bit of jQuery action (because I'm worth it) in there to. Weekend coming up, so I'll expand on this next week.\u003C\u002Fp\u003E\n\u003Ch2 id=\"13-thoughts-on-using-the-zend-framework-lucene-library\"\u003E\u003Ca href=\"#13-thoughts-on-using-the-zend-framework-lucene-library\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003E13 thoughts on “Using the Zend framework Lucene library”\u003C\u002Fh2\u003E\n\u003Ch3 id=\"alex\"\u003E\u003Ca href=\"#alex\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003Ealex\u003C\u002Fh3\u003E\n\u003Cp\u003E\u003Cem\u003EMay 17, 2009 at 2:36 pm\u003C\u002Fem\u003E\u003C\u002Fp\u003E\n\u003Cp\u003Ewhat do i have to wrote in the code where it is the comment “ro do”?\u003C\u002Fp\u003E\n\u003Chr\u003E\n\u003Ch3 id=\"andy\"\u003E\u003Ca href=\"#andy\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EAndy\u003C\u002Fh3\u003E\n\u003Cp\u003E\u003Cem\u003EMay 17, 2009 at 3:07 pm\u003C\u002Fem\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EThe index method doesn’t have to do much really, apart from load the view for this method.\u003C\u002Fp\u003E\n\u003Cp\u003EThe view will consist of a form to post your search term. This will post to your result method, which is currently hardcoded with the term ‘Andrew’. You would change this to take the value from the form field.\u003C\u002Fp\u003E\n\u003Cp\u003EClear? If not, I’ll amend the example.\u003C\u002Fp\u003E\n\u003Chr\u003E\n\u003Ch3 id=\"suresh\"\u003E\u003Ca href=\"#suresh\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003ESuresh\u003C\u002Fh3\u003E\n\u003Cp\u003E\u003Cem\u003EJune 30, 2009 at 11:48 am\u003C\u002Fem\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EHi Andy,\u003C\u002Fp\u003E\n\u003Cp\u003ECould you please post the content for Zend.php library file( CI ). As the link to Fred Wu site is down.\u003C\u002Fp\u003E\n\u003Cp\u003EThanks for coming up with this search article.\u003C\u002Fp\u003E\n\u003Chr\u003E\n\u003Ch3 id=\"andy-1\"\u003E\u003Ca href=\"#andy-1\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EAndy\u003C\u002Fh3\u003E\n\u003Cp\u003E\u003Cem\u003EJune 30, 2009 at 11:56 am\u003C\u002Fem\u003E\u003C\u002Fp\u003E\n\u003Cp\u003ENo problem, you can obtain it here. I don’t know if he ever altered it, but this is the version of the code I use on my site.\u003C\u002Fp\u003E\n\u003Chr\u003E\n\u003Ch3 id=\"peter\"\u003E\u003Ca href=\"#peter\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EPeter\u003C\u002Fh3\u003E\n\u003Cp\u003E\u003Cem\u003EAugust 7, 2009 at 6:28 pm\u003C\u002Fem\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EHi,\u003C\u002Fp\u003E\n\u003Cp\u003EI followed your instruction and got Lucene for Zend to work in Code Igniter on my home server. Unfortunately after i copied it over to the hosted staging server i get these errors whenever i try to execute any Lucene methods:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-text\"\u003E\u003Ccode class=\"language-text\"\u003EA PHP Error was encountered\nSeverity: Notice\nMessage: Hex number is too big: 0x100000000\nFilename: Storage\u002FFile.php\nLine Number: 268\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EDo you have any idea what could be wrong?\u003C\u002Fp\u003E\n\u003Cp\u003EThanks\u003C\u002Fp\u003E\n\u003Cp\u003EPeter\u003C\u002Fp\u003E\n\u003Chr\u003E\n\u003Ch3 id=\"asif\"\u003E\u003Ca href=\"#asif\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EAsif\u003C\u002Fh3\u003E\n\u003Cp\u003E\u003Cem\u003EAugust 7, 2009 at 6:30 pm\u003C\u002Fem\u003E\u003C\u002Fp\u003E\n\u003Cp\u003Ewill it crawl the whole domain going through each link and create the search content?\u003C\u002Fp\u003E\n\u003Cp\u003Eif that is the case then how can i generate the url link with the search keyword in the search result display?\u003C\u002Fp\u003E\n\u003Chr\u003E\n\u003Ch3 id=\"andy-2\"\u003E\u003Ca href=\"#andy-2\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EAndy\u003C\u002Fh3\u003E\n\u003Cp\u003E\u003Cem\u003EAugust 7, 2009 at 6:47 pm\u003C\u002Fem\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EThis example is just a test case that indexes the home page of my site. A more complete example can be found in the next part of this article.\u003C\u002Fp\u003E\n\u003Chr\u003E\n\u003Ch3 id=\"nir-gavish\"\u003E\u003Ca href=\"#nir-gavish\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003ENir Gavish\u003C\u002Fh3\u003E\n\u003Cp\u003E\u003Cem\u003ESeptember 13, 2009 at 2:29 am\u003C\u002Fem\u003E\u003C\u002Fp\u003E\n\u003Cp\u003Ei’ve seen much talk about using lucene as an indexer, but what about using it as the sole data repository? anyone ever try it? how did it preform? how reliable was it? thanks\u003C\u002Fp\u003E\n\u003Chr\u003E\n\u003Ch3 id=\"junaid\"\u003E\u003Ca href=\"#junaid\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003Ejunaid\u003C\u002Fh3\u003E\n\u003Cp\u003E\u003Cem\u003EApril 10, 2010 at 4:12 am\u003C\u002Fem\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EHi,\na month ago i sent you comments regarding your article about integration of zend lucene with CI. I have got out of the errors as i reported to you before. but got into some new ones. Now i want to search html docs in my application…every query i m submitting in search is returning no results..when there actually are. i am sending you the code..plz if you can have a look at it and point out my mistake.\u003C\u002Fp\u003E\n\u003Cp\u003EController\u003C\u002Fp\u003E\n\u003Cpre class=\"language-text\"\u003E\u003Ccode class=\"language-text\"\u003E&lt;?php\nclass Search extends Controller {\n    function Search()\n    {\n        parent::Controller();\n\n        $this-&gt;load-&gt;library(‘zend’);\n        $this-&gt;zend-&gt;load(‘Zend\u002FSearch\u002FLucene’);\n        $this-&gt;search_index = APPPATH . ‘search\u002Findex’;\n    }\n\n    function create()\n    {\n        Zend_Search_Lucene::create($this-&gt;search_index);\n        $doc = Zend_Search_Lucene_Document_Html::loadHTMLFile(’http:\u002F\u002Flocalhost\u002Fcodeigniter\u002Findex.php\u002Funiversities\u002Fhome’);\n        $doc-&gt;addField(Zend_Search_Lucene_Field::UnIndexed(‘url’, ‘http:\u002F\u002Flocalhost\u002Fcodeigniter\u002Findex.php\u002Funiversities\u002Fhome’));\n\n        $index-&gt;addDocument($doc);\n        $index-&gt;commit();\n\n        $index-&gt;optimize();\n    }\n\n    function optimize()\n    {\n        $this-&gt;login();\n\n        $index = Zend_Search_Lucene::open($this-&gt;search_index);\n        $index-&gt;optimize();\n\n        echo ‘\n\n        Index optimized.\n\n        ‘;\n    }\n\n    function result()\n    {\n        \u002F\u002F Create empty array, in case there are no results.\n        $data[‘results’] = array();\n\n        \u002F\u002F If a search_query parameter has been posted, search the index.\n        if ($this-&gt;input-&gt;post(‘search_query’))\n\n        {\n            $index = Zend_Search_Lucene::open($this-&gt;search_index);\n            $data[‘results’] = $index-&gt;find($this-&gt;input-&gt;post(‘search_query’));\n        }\n        \u002F\u002F Load view, and populate with results.\n        $this-&gt;load-&gt;view(‘search\u002Fsearch_result’, $data);\n    }\n}\n?&gt;\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003Eand at search_result view i get every time “No results were returned for query: a”.\u003C\u002Fp\u003E\n\u003Cp\u003Ecan u figure aut my mistake plz.\u003C\u002Fp\u003E\n\u003Chr\u003E\n\u003Ch3 id=\"jesmar\"\u003E\u003Ca href=\"#jesmar\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EJesmar\u003C\u002Fh3\u003E\n\u003Cp\u003E\u003Cem\u003EFebruary 8, 2011 at 10:28 am\u003C\u002Fem\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EHELLO..i have a problem in my ordering system…I have an error on my controller…Fatal error: \u003Ccode class=\"language-text\"\u003ECall to a member function result() on a non-object in C:xampphtdocscifofb1projectsystemapplicationcontrollerscuser.php on line 210\u003C\u002Fcode\u003E…pls help me\u003C\u002Fp\u003E\n\u003Chr\u003E\n\u003Ch3 id=\"noor\"\u003E\u003Ca href=\"#noor\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003ENoor\u003C\u002Fh3\u003E\n\u003Cp\u003E\u003Cem\u003EJanuary 8, 2015 at 7:27 am\u003C\u002Fem\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EI downloaded the latest Zend framework release ‘ZendFramework-2.3.3.zip’ form site \u003Ca href=\"http:\u002F\u002Fframework.zend.com\u002Fdownloads\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003Ehttp:\u002F\u002Fframework.zend.com\u002Fdownloads\u003C\u002Fa\u003E, but I did not find the folder “Search” in path “Zend\u002FSearch\u002FLucene” !! from where I can get it?\u003C\u002Fp\u003E\n\u003Chr\u003E\n\u003Ch3 id=\"noor-1\"\u003E\u003Ca href=\"#noor-1\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003ENoor\u003C\u002Fh3\u003E\n\u003Cp\u003E\u003Cem\u003EJanuary 8, 2015 at 8:18 am\u003C\u002Fem\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EOk, I discover the problem, zf2 put zendSearch as an optional library, so I have to download it alone\u003C\u002Fp\u003E\n\u003Chr\u003E\n\u003Ch3 id=\"noor-2\"\u003E\u003Ca href=\"#noor-2\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003ENoor\u003C\u002Fh3\u003E\n\u003Cp\u003E\u003Cem\u003EJanuary 8, 2015 at 11:08 am\u003C\u002Fem\u003E\u003C\u002Fp\u003E\n\u003Cp\u003Efollowing your steps, the search works for the previous version of zf1., but right now I want to work with zf2.\nI put the folder ZendSearch under librariy\u002Fzend, and I have chnaged the links to look like this:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-text\"\u003E\u003Ccode class=\"language-text\"\u003E$this-&gt;load-&gt;library(‘zend’);\n$this-&gt;zend-&gt;load(‘Zend\u002FZendSearch\u002FLucene\u002FLucene’);\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EBut unfortunately nothing works ?? what is wrong ?\u003C\u002Fp\u003E\n\u003Chr\u003E\n","cover_image":null}},"context":{}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script><script src="/assets/js/app.6123b84a.js" defer></script><script src="/assets/js/page--src-templates-post-vue.61f72de3.js" defer></script>
  </body>
</html>